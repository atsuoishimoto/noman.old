<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../css/reset.css">
  <link rel="stylesheet" href="../../css/main.css">
  <link rel="stylesheet" href="../../css/main-ja.css">
  <link rel="stylesheet" href="../../css/search.css">
  <script src="../summary.js"></script>
  <script src="../../js/search.js"></script>
  <title>ssh-copy-id - noman</title>
</head>
<body>

  <!-- ナビゲーションバー -->
  <nav>
    <div class="nav-logo"><img src="../../../images/white.png" height="50px"></div>
    <div class="nav-right">
      <div class="nav-links">
        <a href="#">Docs</a>
        <a href="#">Try</a>
        <a href="#">GitHub</a>
      </div>
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command...">
      </div>
    </div>
  </nav>

  <div class="content">

  <main>


<h1>ssh-copy-id コマンド概要</h1>
<p><code>ssh-copy-id</code>は、リモートサーバーに自分の公開SSHキーをコピーするためのコマンドです。これにより、パスワード入力なしでSSH接続ができるようになります。</p>
<h2>主なオプション</h2>
<ul>
<li><p><strong>-i [identity_file]</strong>: 使用する公開鍵ファイルを指定します</p>
<ul>
<li>例: <code>ssh-copy-id -i ~/.ssh/id_rsa.pub user@server</code></li>
</ul>
</li>
<li><p><strong>-p [port]</strong>: 標準の22番以外のSSHポートを使用する場合に指定します</p>
<ul>
<li>例: <code>ssh-copy-id -p 2222 user@server</code></li>
</ul>
</li>
<li><p><strong>-f</strong>: 既存の公開鍵が存在する場合でも強制的に追加します</p>
<ul>
<li>例: <code>ssh-copy-id -f user@server</code></li>
</ul>
</li>
<li><p><strong>-n</strong>: 実際にコピーせず、何が行われるかをシミュレーションします（ドライラン）</p>
<ul>
<li>例: <code>ssh-copy-id -n user@server</code></li>
</ul>
</li>
</ul>
<h2>使用例</h2>
<h3>基本的な使用方法</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># デフォルトの公開鍵をリモートサーバーにコピーする</span>
ssh-copy-id<span style="color: #F8F8F8"> </span>username@remote-server

<span style="color: #8F5902; font-style: italic"># 出力例</span>
/usr/bin/ssh-copy-id:<span style="color: #F8F8F8"> </span>INFO:<span style="color: #F8F8F8"> </span>attempting<span style="color: #F8F8F8"> </span>to<span style="color: #F8F8F8"> </span>log<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>with<span style="color: #F8F8F8"> </span>the<span style="color: #F8F8F8"> </span>new<span style="color: #F8F8F8"> </span>key<span style="color: #CE5C00; font-weight: bold">(</span>s<span style="color: #CE5C00; font-weight: bold">)</span>,<span style="color: #F8F8F8"> </span>to<span style="color: #F8F8F8"> </span>filter<span style="color: #F8F8F8"> </span>out<span style="color: #F8F8F8"> </span>any<span style="color: #F8F8F8"> </span>that<span style="color: #F8F8F8"> </span>are<span style="color: #F8F8F8"> </span>already<span style="color: #F8F8F8"> </span>installed
/usr/bin/ssh-copy-id:<span style="color: #F8F8F8"> </span>INFO:<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #F8F8F8"> </span>key<span style="color: #CE5C00; font-weight: bold">(</span>s<span style="color: #CE5C00; font-weight: bold">)</span><span style="color: #F8F8F8"> </span>remain<span style="color: #F8F8F8"> </span>to<span style="color: #F8F8F8"> </span>be<span style="color: #F8F8F8"> </span>installed<span style="color: #F8F8F8"> </span>--<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #F8F8F8"> </span>you<span style="color: #F8F8F8"> </span>are<span style="color: #F8F8F8"> </span>prompted<span style="color: #F8F8F8"> </span>now<span style="color: #F8F8F8"> </span>it<span style="color: #F8F8F8"> </span>is<span style="color: #F8F8F8"> </span>to<span style="color: #F8F8F8"> </span>install<span style="color: #F8F8F8"> </span>the<span style="color: #F8F8F8"> </span>new<span style="color: #F8F8F8"> </span>keys
username@remote-server<span style="color: #4E9A06">&#39;s password: </span>

<span style="color: #4E9A06"># 成功した場合の出力</span>
<span style="color: #4E9A06">Number of key(s) added: 1</span>

<span style="color: #4E9A06">Now try logging into the machine, with:   &quot;ssh &#39;</span>username@remote-server<span style="color: #A40000; border: 1px solid #EF2929">&#39;</span><span style="color: #4E9A06">&quot;</span>
<span style="color: #4E9A06">and check to make sure that only the key(s) you wanted were added.</span>
</pre></div>
<h3>特定の公開鍵ファイルを指定する場合</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># 特定の公開鍵ファイルを使用する</span>
ssh-copy-id<span style="color: #F8F8F8"> </span>-i<span style="color: #F8F8F8"> </span>~/.ssh/custom_key.pub<span style="color: #F8F8F8"> </span>username@remote-server

<span style="color: #8F5902; font-style: italic"># 出力例は基本的な使用方法と同様</span>
</pre></div>
<h3>異なるポートを使用する場合</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># ポート2222を使用する</span>
ssh-copy-id<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">2222</span><span style="color: #F8F8F8"> </span>username@remote-server

<span style="color: #8F5902; font-style: italic"># 出力例は基本的な使用方法と同様</span>
</pre></div>
<h2>追加情報</h2>
<ul>
<li>初めて接続するサーバーの場合、ホストキーの確認メッセージが表示されます。「yes」と入力して続行してください。</li>
<li>リモートサーバーでは、コピーされた公開鍵は <code>~/.ssh/authorized_keys</code> ファイルに追加されます。</li>
<li>このコマンドを実行するには、最初の接続時にはリモートサーバーのパスワードが必要です。</li>
<li>公開鍵がコピーされた後は、<code>ssh username@remote-server</code> でパスワードなしでログインできるようになります。</li>
<li>公開鍵がない場合は、先に <code>ssh-keygen</code> コマンドを実行して鍵ペアを生成する必要があります。</li>
</ul>



    
  </main>
  </div>
<footer>
  <div>
    <a href="#">GitHub</a> |
    MIT License
  </div>
</footer>
</body>
</html>
