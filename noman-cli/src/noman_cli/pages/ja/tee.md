# teeコマンド

標準入力からデータを読み取り、それを同時にファイルと標準出力の両方に書き込むコマンドです。名前は配管のT字管（英語で「tee」）に由来しています。

## オプション

### **-a, --append**
指定したファイルに上書きせず、追記モードで書き込みます。

```console
$ echo "1行目" > sample.txt
$ echo "2行目" | tee -a sample.txt
2行目
$ cat sample.txt
1行目
2行目
```

### **-i, --ignore-interrupts**
割り込み信号（Ctrl+C）を無視します。長時間実行されるコマンドの出力をログに取る際に便利です。

```console
$ long_running_command | tee -i logfile.txt
[コマンドの出力がファイルに保存されながら画面にも表示されます]
```

## 使用例

### 基本的な使い方

```console
$ ls -l | tee ファイル一覧.txt
total 8
-rw-r--r--   1 user  staff   0 Apr  1 00:00 file1
-rw-r--r--   1 user  staff   0 Apr  1 00:00 file2
```
コマンドの出力をファイルに保存しながら、同時に画面にも表示しています。

### 複数のファイルに同時に書き込む

```console
$ echo "テストデータ" | tee ファイル1.txt ファイル2.txt
テストデータ
```
「テストデータ」が両方のファイルに書き込まれます。

### 管理者権限が必要なファイルの編集

```console
$ echo "設定内容" | sudo tee /etc/some_config_file
設定内容
```
通常のリダイレクト（`>`）ではできない管理者権限が必要なファイルへの書き込みができます。

## よくある質問

#### Q1. teeコマンドの主な用途は何ですか？
A. コマンドの出力を画面で確認しながら同時にファイルに保存したい場合に使用します。

#### Q2. sudoでファイルにリダイレクトする際にteeを使うのはなぜですか？
A. `sudo echo "内容" > /etc/ファイル` ではリダイレクト部分にsudo権限が適用されないため、teeコマンドを使って `echo "内容" | sudo tee /etc/ファイル` とすることで権限の問題を回避できます。

#### Q3. 複数のファイルに書き込む方法はありますか？
A. `tee ファイル1 ファイル2 ファイル3` のように複数のファイル名を指定するだけです。

## 追加メモ

* パイプラインの途中で出力を分岐させたいときに特に便利です。
* ログを取りながらコマンドを実行したい場合に非常に役立ちます。
* macOSでも同じように動作しますが、GNU版と比べて一部のオプションが異なる場合があります。

## 参考情報

https://www.gnu.org/software/coreutils/manual/html_node/tee-invocation.html

## 改訂履歴

2023/11/15 フォーマットを統一し、説明を簡潔にしました。FAQセクションを追加しました。