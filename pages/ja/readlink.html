<h1>readlinkコマンドの概要</h1>
<p><code>readlink</code>は、シンボリックリンクのターゲット（リンク先）を表示するコマンドです。リンクの解決や絶対パスの取得に役立ちます。</p>
<h2>主なオプション</h2>
<ul>
<li><p><strong>-f, --canonicalize</strong>: すべてのシンボリックリンクを再帰的に解決し、絶対パスを表示します</p>
<ul>
<li>存在しないコンポーネントがあっても処理を続行します</li>
</ul>
</li>
<li><p><strong>-e, --canonicalize-existing</strong>: すべてのシンボリックリンクを再帰的に解決し、絶対パスを表示しますが、パス内のすべてのコンポーネントが存在する必要があります</p>
</li>
<li><p><strong>-m, --canonicalize-missing</strong>: すべてのシンボリックリンクを再帰的に解決し、絶対パスを表示します</p>
<ul>
<li><code>-f</code>と似ていますが、存在しないファイルやディレクトリも処理します</li>
</ul>
</li>
<li><p><strong>-n, --no-newline</strong>: 出力の最後に改行を追加しません</p>
</li>
<li><p><strong>-z, --zero</strong>: 各出力行を改行ではなくNULLバイト（ゼロバイト）で終了します</p>
</li>
</ul>
<h2>使用例</h2>
<h3>基本的な使用法</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># シンボリックリンクのターゲットを表示</span>
$<span style="color: #F8F8F8"> </span>ln<span style="color: #F8F8F8"> </span>-s<span style="color: #F8F8F8"> </span>/etc/hosts<span style="color: #F8F8F8"> </span>mylink
$<span style="color: #F8F8F8"> </span>readlink<span style="color: #F8F8F8"> </span>mylink
/etc/hosts
</pre></div>
<h3>絶対パスの取得</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># シンボリックリンクの絶対パスを取得</span>
$<span style="color: #F8F8F8"> </span>readlink<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span>mylink
/etc/hosts

<span style="color: #8F5902; font-style: italic"># 相対パスの絶対パスへの変換</span>
$<span style="color: #F8F8F8"> </span>readlink<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span>../some/path
/absolute/path/to/some/path
</pre></div>
<h3>存在チェック付きの解決</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># 存在するパスのみ解決</span>
$<span style="color: #F8F8F8"> </span>readlink<span style="color: #F8F8F8"> </span>-e<span style="color: #F8F8F8"> </span>non_existent_file
<span style="color: #8F5902; font-style: italic"># 何も出力されず、エラーコードが返されます</span>

$<span style="color: #F8F8F8"> </span>readlink<span style="color: #F8F8F8"> </span>-e<span style="color: #F8F8F8"> </span>/etc/hosts
/etc/hosts
</pre></div>
<h3>スクリプトでの使用例</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902; font-style: italic"># スクリプト内でスクリプト自身のディレクトリを取得</span>
<span style="color: #000">SCRIPT_DIR</span><span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #204A87; font-weight: bold">$(</span>dirname<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">$(</span>readlink<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;</span><span style="color: #000">$0</span><span style="color: #4E9A06">&quot;</span><span style="color: #204A87; font-weight: bold">))</span>
<span style="color: #204A87">echo</span><span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;スクリプトは </span><span style="color: #000">$SCRIPT_DIR</span><span style="color: #4E9A06"> にあります&quot;</span>
</pre></div>
<h2>追加メモ</h2>
<ul>
<li><code>readlink -f</code>は、スクリプト内で絶対パスを取得するために非常によく使われます</li>
<li>macOSのデフォルトの<code>readlink</code>には<code>-f</code>オプションがないため、GNU版をインストールするか、代替手段を使用する必要があります</li>
<li>シンボリックリンクの連鎖（リンクがリンクを指している場合）も正しく解決できます</li>
<li>スクリプトの移植性を高めるために、ファイルパスを扱う際によく使用されます</li>
</ul>
