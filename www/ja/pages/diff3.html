<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  diff3 - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>diff3 コマンド</h1>
<p>3つのファイル間の違いを行ごとに比較して表示します。</p>
<h2>概要</h2>
<p><code>diff3</code>は3つのファイルを比較し、それらの間の違いを行単位で表示するコマンドです。主に、共通の元ファイルから派生した2つの異なるバージョンを比較する場合に役立ちます。これはバージョン管理システムでのマージ作業や、複数の人が同じファイルを編集した場合の変更点の確認に便利です。</p>
<h2>オプション</h2>
<h3><strong>-m (マージ出力)</strong></h3>
<p>3つのファイルをマージした結果を出力します。競合がある場合は、マークを付けて表示します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-m<span style="color: #F8F8F8"> </span>my-file.txt<span style="color: #F8F8F8"> </span>old-file.txt<span style="color: #F8F8F8"> </span>their-file.txt
<span style="color: #000; font-style: italic">&lt;&lt;&lt;&lt;&lt;&lt;&lt; my-file.txt</span>
<span style="color: #000; font-style: italic">私の変更内容</span>
<span style="color: #000; font-style: italic">||||||| old-file.txt</span>
<span style="color: #000; font-style: italic">元の内容</span>
<span style="color: #000; font-style: italic">=======</span>
<span style="color: #000; font-style: italic">彼らの変更内容</span>
<span style="color: #000; font-style: italic">&gt;&gt;&gt;&gt;&gt;&gt;&gt; their-file.txt</span>
</pre></div>
<h3><strong>-A, --show-all</strong></h3>
<p>すべての変更を統合して表示します。競合部分は特殊なマーカーで区切られます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-A<span style="color: #F8F8F8"> </span>my-file.txt<span style="color: #F8F8F8"> </span>old-file.txt<span style="color: #F8F8F8"> </span>their-file.txt
<span style="color: #000; font-style: italic">すべての内容が表示される</span>
<span style="color: #000; font-style: italic">&lt;&lt;&lt;&lt;&lt;&lt;&lt; my-file.txt</span>
<span style="color: #000; font-style: italic">私の変更内容</span>
<span style="color: #000; font-style: italic">||||||| old-file.txt</span>
<span style="color: #000; font-style: italic">元の内容</span>
<span style="color: #000; font-style: italic">=======</span>
<span style="color: #000; font-style: italic">彼らの変更内容</span>
<span style="color: #000; font-style: italic">&gt;&gt;&gt;&gt;&gt;&gt;&gt; their-file.txt</span>
<span style="color: #000; font-style: italic">その後の共通部分</span>
</pre></div>
<h3><strong>-e, --ed</strong></h3>
<p><code>ed</code>エディタ形式の出力を生成します。これはスクリプトとして使用して変更を適用できます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-e<span style="color: #F8F8F8"> </span>my-file.txt<span style="color: #F8F8F8"> </span>old-file.txt<span style="color: #F8F8F8"> </span>their-file.txt
<span style="color: #000; font-style: italic">w</span>
<span style="color: #000; font-style: italic">q</span>
</pre></div>
<h3><strong>-T, --initial-tab</strong></h3>
<p>出力の各行の先頭にタブを挿入して、見やすくします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-T<span style="color: #F8F8F8"> </span>my-file.txt<span style="color: #F8F8F8"> </span>old-file.txt<span style="color: #F8F8F8"> </span>their-file.txt
<span style="color: #000; font-style: italic">	====</span>
<span style="color: #000; font-style: italic">	1:1c</span>
<span style="color: #000; font-style: italic">	  私の行</span>
<span style="color: #000; font-style: italic">	2:1c</span>
<span style="color: #000; font-style: italic">	  元の行</span>
<span style="color: #000; font-style: italic">	3:1c</span>
<span style="color: #000; font-style: italic">	  彼らの行</span>
</pre></div>
<h2>使用例</h2>
<h3>基本的な3ファイル比較</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>file1.txt<span style="color: #F8F8F8"> </span>original.txt<span style="color: #F8F8F8"> </span>file2.txt
<span style="color: #000; font-style: italic">====</span>
<span style="color: #000; font-style: italic">1:1c</span>
<span style="color: #000; font-style: italic">  file1の変更された行</span>
<span style="color: #000; font-style: italic">2:1c</span>
<span style="color: #000; font-style: italic">  originalの元の行</span>
<span style="color: #000; font-style: italic">3:1c</span>
<span style="color: #000; font-style: italic">  file2の変更された行</span>
</pre></div>
<h3>マージ結果をファイルに保存</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-m<span style="color: #F8F8F8"> </span>file1.txt<span style="color: #F8F8F8"> </span>original.txt<span style="color: #F8F8F8"> </span>file2.txt<span style="color: #F8F8F8"> </span>&gt;<span style="color: #F8F8F8"> </span>merged.txt
<span style="color: #8F5902">$ </span>cat<span style="color: #F8F8F8"> </span>merged.txt
<span style="color: #000; font-style: italic">ファイルの共通部分</span>
<span style="color: #000; font-style: italic">&lt;&lt;&lt;&lt;&lt;&lt;&lt; file1.txt</span>
<span style="color: #000; font-style: italic">file1の変更部分</span>
<span style="color: #000; font-style: italic">||||||| original.txt</span>
<span style="color: #000; font-style: italic">originalの元の部分</span>
<span style="color: #000; font-style: italic">=======</span>
<span style="color: #000; font-style: italic">file2の変更部分</span>
<span style="color: #000; font-style: italic">&gt;&gt;&gt;&gt;&gt;&gt;&gt; file2.txt</span>
<span style="color: #000; font-style: italic">その後の共通部分</span>
</pre></div>
<h3>競合のないマージ</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>diff3<span style="color: #F8F8F8"> </span>-m<span style="color: #F8F8F8"> </span>file1.txt<span style="color: #F8F8F8"> </span>original.txt<span style="color: #F8F8F8"> </span>file2.txt
<span style="color: #8F5902"># </span>競合がない場合は、マージされた内容がそのまま表示される
</pre></div>
<h2>ヒント:</h2>
<h3>引数の順序に注意</h3>
<p><code>diff3</code>の引数の順序は重要です。通常は「my-file original-file other-file」の順で指定します。元ファイル（original）を中央に置くことで、2つの派生ファイルとの比較が明確になります。</p>
<h3>バージョン管理システムとの連携</h3>
<p>多くのバージョン管理システム（Git、Mercurialなど）は内部で<code>diff3</code>のようなアルゴリズムを使用しています。マージ競合を手動で解決する際の参考として<code>diff3</code>の出力を確認すると役立つことがあります。</p>
<h3>大きなファイルの比較</h3>
<p>大きなファイルを比較する場合は、<code>-T</code>オプションを使用すると出力が見やすくなります。また、結果をファイルにリダイレクトして後で確認することも検討してください。</p>
<h2>よくある質問</h2>
<h4>Q1. <code>diff</code>と<code>diff3</code>の違いは何ですか？</h4>
<p>A. <code>diff</code>は2つのファイルを比較するのに対し、<code>diff3</code>は3つのファイルを比較します。<code>diff3</code>は共通の元ファイルから派生した2つのファイルの変更を比較するのに特に役立ちます。</p>
<h4>Q2. マージ結果から競合マーカーを削除するには？</h4>
<p>A. マージ結果から競合マーカーを削除するには、テキストエディタで手動で編集するか、<code>sed</code>や<code>awk</code>などのテキスト処理ツールを使用して削除できます。</p>
<h4>Q3. <code>diff3</code>の出力形式を変更できますか？</h4>
<p>A. はい、<code>-e</code>（ed形式）、<code>-x</code>（拡張ed形式）、<code>-3</code>（3列形式）、<code>-A</code>（すべて表示）など、様々な出力形式のオプションがあります。</p>
<h4>Q4. macOSでの<code>diff3</code>は GNU版と違いがありますか？</h4>
<p>A. macOSの<code>diff3</code>は BSD版であり、GNU版と比べていくつかのオプションが異なる場合があります。特に高度な機能を使用する場合は、<code>man diff3</code>でオプションを確認することをお勧めします。</p>
<h2>参考資料</h2>
<p>https://www.gnu.org/software/diffutils/manual/html_node/Invoking-diff3.html</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/04/30 初版作成</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>