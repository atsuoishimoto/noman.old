<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  sftp - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>sftp コマンド</h1>
<p>暗号化された接続を介してホスト間でファイルを安全に転送します。</p>
<h2>概要</h2>
<p>SFTP（Secure File Transfer Protocol）は、コンピュータ間でファイルを安全に転送するためのネットワークプロトコルです。SSH上で動作し、暗号化と認証を提供します。<code>sftp</code>コマンドはFTPに似た対話型のファイル転送プログラムですが、SSH暗号化を使用しています。</p>
<h2>オプション</h2>
<h3><strong>-b</strong> / <strong>--batch</strong> <em>バッチファイル</em></h3>
<p>対話的に実行する代わりに、sftpコマンドのバッチファイルを処理します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>-b<span style="color: #F8F8F8"> </span>commands.txt<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">Connecting to remote.server...</span>
<span style="color: #000; font-style: italic">Batch file commands.txt processed</span>
</pre></div>
<h3><strong>-P</strong> / <strong>--port</strong> <em>ポート</em></h3>
<p>リモートホストに接続するポートを指定します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>-P<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">2222</span><span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">Connecting to remote.server port 2222...</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3><strong>-i</strong> / <strong>--identity</strong> <em>アイデンティティファイル</em></h3>
<p>公開鍵認証に使用するアイデンティティ（秘密鍵）を読み込むファイルを選択します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>-i<span style="color: #F8F8F8"> </span>~/.ssh/my_key<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">Connecting to remote.server...</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3><strong>-r</strong> / <strong>--recursive</strong></h3>
<p>アップロードまたはダウンロード時にディレクトリ全体を再帰的にコピーします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">sftp&gt; get -r remote_directory</span>
<span style="color: #000; font-style: italic">Fetching /remote_directory/ to remote_directory</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3><strong>-v</strong> / <strong>--verbose</strong></h3>
<p>ログレベルを上げ、詳細なデバッグ出力を提供します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>-v<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">OpenSSH_8.9p1, LibreSSL 3.3.6</span>
<span style="color: #000; font-style: italic">debug1: Reading configuration data /etc/ssh/ssh_config</span>
<span style="color: #000; font-style: italic">debug1: Connecting to remote.server port 22.</span>
<span style="color: #000; font-style: italic">...</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h2>使用例</h2>
<h3>リモートサーバーへの接続</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">Connected to remote.server.</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3>ファイルのダウンロード</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">sftp&gt; get remote_file.txt</span>
<span style="color: #000; font-style: italic">Fetching /home/user/remote_file.txt to remote_file.txt</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3>ファイルのアップロード</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">sftp&gt; put local_file.txt</span>
<span style="color: #000; font-style: italic">Uploading local_file.txt to /home/user/local_file.txt</span>
<span style="color: #000; font-style: italic">sftp&gt;</span>
</pre></div>
<h3>ディレクトリの移動</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sftp<span style="color: #F8F8F8"> </span>user@remote.server
<span style="color: #000; font-style: italic">sftp&gt; pwd</span>
<span style="color: #000; font-style: italic">Remote working directory: /home/user</span>
<span style="color: #000; font-style: italic">sftp&gt; cd documents</span>
<span style="color: #000; font-style: italic">sftp&gt; lpwd</span>
<span style="color: #000; font-style: italic">Local working directory: /Users/localuser</span>
<span style="color: #000; font-style: italic">sftp&gt; lcd Downloads</span>
</pre></div>
<h2>ヒント:</h2>
<h3>タブ補完を使用する</h3>
<p>SFTPはローカルとリモートの両方のファイルに対してタブ補完をサポートしており、完全なパスを入力せずに簡単にナビゲートできます。</p>
<h3>対話的なコマンド</h3>
<ul>
<li><code>ls</code> - リモートファイルを一覧表示する</li>
<li><code>lls</code> - ローカルファイルを一覧表示する</li>
<li><code>cd</code> - リモートディレクトリを変更する</li>
<li><code>lcd</code> - ローカルディレクトリを変更する</li>
<li><code>mkdir</code> - リモートディレクトリを作成する</li>
<li><code>rmdir</code> - リモートディレクトリを削除する</li>
<li><code>rm</code> - リモートファイルを削除する</li>
<li><code>help</code>または<code>?</code> - 利用可能なコマンドを表示する</li>
</ul>
<h3>自動化のためのバッチモード</h3>
<p>sftpコマンドを含むテキストファイルを作成し、スクリプトでの自動転送には<code>-b</code>オプションを使用します。</p>
<h3>複数のファイルにワイルドカードを使用する</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #000; font-style: italic">sftp&gt; get *.txt</span>
</pre></div>
<h2>よくある質問</h2>
<h4>Q1. SFTPとSCPの違いは何ですか？</h4>
<p>A. SFTPはSSH上で動作する対話型のファイル転送プロトコルであるのに対し、SCPは安全なコピーのための非対話型コマンドです。SFTPは転送の再開やディレクトリ一覧表示などの機能を提供します。</p>
<h4>Q2. ディレクトリ全体を転送するにはどうすればよいですか？</h4>
<p>A. getまたはputコマンドで<code>-r</code>（再帰的）オプションを使用します：<code>get -r remote_directory</code>または<code>put -r local_directory</code>。</p>
<h4>Q3. スクリプトでSFTPを使用できますか？</h4>
<p>A. はい、SFTPコマンドを含むバッチファイルと共に<code>-b</code>オプションを使用します：<code>sftp -b commands.txt user@remote.server</code>。</p>
<h4>Q4. リモートファイルの権限を変更するにはどうすればよいですか？</h4>
<p>A. SFTPセッション内で<code>chmod</code>コマンドを使用します：<code>chmod 644 remote_file.txt</code>。</p>
<h4>Q5. 中断されたファイル転送を再開するにはどうすればよいですか？</h4>
<p>A. ファイルのダウンロードを再開するには<code>reget</code>コマンドを、アップロードを再開するには<code>reput</code>コマンドを使用します。</p>
<h2>参考文献</h2>
<p>https://man.openbsd.org/sftp.1</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/04 初回改訂</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>