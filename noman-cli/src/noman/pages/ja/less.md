# less コマンド

テキストファイルをスクロール可能なインターフェースで表示し、前後の移動を可能にします。

## 概要

`less`はターミナルページャープログラムで、テキストファイルを一度に1画面ずつ表示できます。ファイル全体をターミナルに出力する`cat`と異なり、`less`は検索機能を備えた対話的なナビゲーションを提供し、ターミナルを圧迫することなく大きなファイルを読むのに最適です。

## オプション

### **-N, --line-numbers**

各行の先頭に行番号を表示します

```console
$ less -N example.txt
      1 This is the first line of the file.
      2 This is the second line.
      3 And this is the third line.
# 各行の先頭に行番号が表示されている
```

### **-i, --ignore-case**

検索時に大文字と小文字を区別しないようにします

```console
$ less -i example.txt
# /patternで検索すると、「Pattern」と「pattern」の両方にマッチする
```

### **-S, --chop-long-lines**

画面幅より長い行を折り返さずに切り詰めます

```console
$ less -S example.txt
# 長い行は折り返されず、画面の端で切り詰められる
```

### **-F, --quit-if-one-screen**

ファイル全体が最初の画面に表示できる場合、自動的に終了します

```console
$ less -F small_file.txt
# ファイルが1画面に収まる場合、lessは表示後すぐに終了する
```

### **-R, --RAW-CONTROL-CHARS**

ANSIカラーエスケープシーケンスをそのまま表示します（色付き出力に便利）

```console
$ ls --color=always | less -R
# lsからのカラー出力がlessで表示される際に保持される
```

### **-r, --raw-control-chars**

制御文字をそのまま表示します（-Rよりも広範囲の制御文字を処理）

```console
$ cat file_with_control_chars.txt | less -r
# 制御文字を含むファイルを表示する際に使用する
```

## 使用例

### 基本的なファイル表示

```console
$ less /var/log/syslog
# システムログファイルを表示するために開く
```

### コマンド出力の表示

```console
$ ps aux | less
# ps auxの出力をlessにパイプしてスクロール可能な形で表示
```

### 複数ファイルの表示

```console
$ less file1.txt file2.txt
# 複数のファイルを開く。:nと:pでファイル間を移動できる
```

## ヒント:

### ナビゲーションコマンド

`less`内では、以下のキーボードショートカットが使えます：
- `Space`または`f`：1ページ進む
- `b`：1ページ戻る
- `g`：最初の行に移動
- `G`：最後の行に移動
- `/pattern`：「pattern」を前方検索
- `n`：次の検索一致
- `N`：前の検索一致
- `q`：lessを終了

### 位置のマーク

任意の文字の前に`m`を押して位置をマークし、後で同じ文字の前に`'`（アポストロフィ）を押すことでその位置に戻れます。

### ログのフォローモード

ファイル表示中に`F`を押すと「フォローモード」（`tail -f`に似ています）になり、ファイルに新しい内容が追加されると自動的に表示されます。

## よくある質問

#### Q1. `less`と`more`の違いは何ですか？
A. `less`は`more`の改良版で、双方向スクロール、より優れた検索機能を持ち、表示前にファイル全体を読み込む必要がありません。

#### Q2. lessでテキストを検索するにはどうすればいいですか？
A. `/`に続けて検索語を入力してEnterを押します。`n`で次の一致を、`N`で前の一致を見つけられます。

#### Q3. lessで行番号を表示するにはどうすればいいですか？
A. lessを起動するときに`-N`オプションを使用します：`less -N ファイル名`

#### Q4. lessを終了するにはどうすればいいですか？
A. `q`を押して終了します。

#### Q5. lessでバイナリファイルを表示できますか？
A. lessはバイナリファイルを開くことはできますが、主にテキスト用に設計されています。バイナリファイルには、`-b`オプションか`hexdump`のような専用ツールを使用することをお勧めします。

## macOSでの注意点

macOSのlessはGNU版と若干動作が異なる場合があります。特に色付き出力の表示では、`-R`オプションが必要になることが多いです。また、macOSのHomebrewを使って最新版のlessをインストールすることで、より多くの機能を利用できます。

## 参考資料

https://www.greenwoodsoftware.com/less/

## 改訂履歴

- 2025/05/04 初版作成