# break

`break` コマンドはシェルのループ（for, while, until）や switch 文から即座に抜け出すために使用されるシェル組み込みコマンドです。

## オプション

### **n（数値）**

数値を指定すると、指定した数のネストされたループから抜け出します。デフォルトは1です。

```bash
$ for i in 1 2 3; do
>   echo "外側のループ: $i"
>   for j in a b c; do
>     echo "  内側のループ: $j"
>     if [ "$j" = "b" ]; then
>       break
>     fi
>   done
> done
外側のループ: 1
  内側のループ: a
  内側のループ: b
外側のループ: 2
  内側のループ: a
  内側のループ: b
外側のループ: 3
  内側のループ: a
  内側のループ: b
```

### **break 2**

2つのネストされたループから一度に抜け出します。

```bash
$ for i in 1 2 3; do
>   echo "外側のループ: $i"
>   for j in a b c; do
>     echo "  内側のループ: $j"
>     if [ "$j" = "b" ]; then
>       break 2
>     fi
>   done
> done
外側のループ: 1
  内側のループ: a
  内側のループ: b
```

## 使用例

### 条件に基づいてループを終了する

```bash
$ for file in *.txt; do
>   if [ "$file" = "secret.txt" ]; then
>     echo "秘密ファイルが見つかりました。処理を中止します。"
>     break
>   fi
>   echo "処理中: $file"
> done
処理中: file1.txt
処理中: file2.txt
秘密ファイルが見つかりました。処理を中止します。
```

### case文での使用

```bash
$ while true; do
>   read -p "コマンドを入力してください (quit で終了): " cmd
>   case "$cmd" in
>     quit)
>       echo "終了します"
>       break
>       ;;
>     help)
>       echo "ヘルプメッセージ"
>       ;;
>     *)
>       echo "不明なコマンド: $cmd"
>       ;;
>   esac
> done
コマンドを入力してください (quit で終了): help
ヘルプメッセージ
コマンドを入力してください (quit で終了): quit
終了します
```

## よくある質問

### Q1. `break`と`exit`の違いは何ですか？
A. `break`はループや条件分岐から抜け出すだけで、スクリプトの実行は継続します。一方、`exit`はスクリプト全体を終了させます。

### Q2. 複数のネストされたループから一度に抜け出すにはどうすればいいですか？
A. `break n`を使用します。ここで`n`は抜け出したいネストレベルの数です。例えば、`break 2`は2つのネストされたループから抜け出します。

### Q3. `break`はすべてのシェルで同じように動作しますか？
A. 基本的な機能は同じですが、細かい動作はシェル（bash, zsh, sh など）によって異なる場合があります。特に複雑なスクリプトでは、使用しているシェルのドキュメントを確認することをお勧めします。

## 追加情報

- `break`はシェルの組み込みコマンドであり、外部コマンドではありません。
- `break`はループ内でのみ意味を持ちます。ループ外で使用すると、エラーになります。
- 条件付きでループを継続したい場合は、`break`の代わりに`continue`コマンドの使用を検討してください。
- スクリプトの可読性を高めるために、`break`を使用する条件は明確にコメントしておくことをお勧めします。

## 参考情報

bash マニュアル: https://www.gnu.org/software/bash/manual/bash.html