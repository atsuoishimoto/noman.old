{
  "id": "msg_0122RWRcbHc7AqhJwfpvqKx3",
  "content": [
    {
      "text": "# dpkg command\n\nPackage management tool for Debian-based systems that handles installation, removal, and information about .deb packages.\n\n## Overview\n\n`dpkg` (Debian Package) is the core package management utility in Debian-based Linux distributions like Ubuntu. It directly handles .deb package files, allowing users to install, remove, configure, and query information about packages. Unlike higher-level tools like `apt`, `dpkg` works directly with package files and doesn't handle dependencies automatically.\n\n## Options\n\n### **-i, --install**\n\nInstall a package from a .deb file\n\n```console\n$ sudo dpkg -i package.deb\n(Reading database ... 200000 files and directories currently installed.)\nPreparing to unpack package.deb ...\nUnpacking package (1.0-1) ...\nSetting up package (1.0-1) ...\n```\n\n### **-r, --remove**\n\nRemove an installed package, keeping configuration files\n\n```console\n$ sudo dpkg -r package\n(Reading database ... 200000 files and directories currently installed.)\nRemoving package (1.0-1) ...\n```\n\n### **-P, --purge**\n\nRemove an installed package including configuration files\n\n```console\n$ sudo dpkg -P package\n(Reading database ... 200000 files and directories currently installed.)\nPurging configuration files for package (1.0-1) ...\n```\n\n### **-l, --list**\n\nList all installed packages matching a pattern\n\n```console\n$ dpkg -l firefox*\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name           Version      Architecture Description\n+++-==============-============-============-=================================\nii  firefox        115.0.2      amd64        Safe and easy web browser from Mozilla\n```\n\n### **-L, --listfiles**\n\nList files installed by a package\n\n```console\n$ dpkg -L firefox\n/usr/lib/firefox\n/usr/lib/firefox/browser\n/usr/lib/firefox/browser/chrome\n/usr/lib/firefox/browser/chrome.manifest\n...\n```\n\n### **-s, --status**\n\nDisplay package status details\n\n```console\n$ dpkg -s firefox\nPackage: firefox\nStatus: install ok installed\nPriority: optional\nSection: web\nInstalled-Size: 256000\nMaintainer: Ubuntu Mozilla Team <ubuntu-mozillateam@lists.ubuntu.com>\nArchitecture: amd64\nVersion: 115.0.2\n...\n```\n\n### **-S, --search**\n\nSearch for packages that own a file\n\n```console\n$ dpkg -S /usr/bin/firefox\nfirefox: /usr/bin/firefox\n```\n\n### **--configure**\n\nConfigure an unpacked package\n\n```console\n$ sudo dpkg --configure package\nSetting up package (1.0-1) ...\n```\n\n### **--unpack**\n\nUnpack a package without configuring it\n\n```console\n$ sudo dpkg --unpack package.deb\n(Reading database ... 200000 files and directories currently installed.)\nPreparing to unpack package.deb ...\nUnpacking package (1.0-1) over (1.0-0) ...\n```\n\n## Usage Examples\n\n### Installing multiple packages at once\n\n```console\n$ sudo dpkg -i package1.deb package2.deb package3.deb\n(Reading database ... 200000 files and directories currently installed.)\nPreparing to unpack package1.deb ...\nUnpacking package1 (1.0-1) ...\nPreparing to unpack package2.deb ...\nUnpacking package2 (2.0-1) ...\nPreparing to unpack package3.deb ...\nUnpacking package3 (3.0-1) ...\nSetting up package1 (1.0-1) ...\nSetting up package2 (2.0-1) ...\nSetting up package3 (3.0-1) ...\n```\n\n### Listing all installed packages\n\n```console\n$ dpkg -l\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name           Version      Architecture Description\n+++-==============-============-============-=================================\nii  accountsservice 0.6.55-0ubuntu12 amd64    query and manipulate user account information\nii  acl            2.2.53-6      amd64        access control list - utilities\nii  adduser        3.118ubuntu2  all          add and remove users and groups\n...\n```\n\n### Fixing broken package installations\n\n```console\n$ sudo dpkg --configure -a\nSetting up package1 (1.0-1) ...\nSetting up package2 (2.0-1) ...\n```\n\n## Tips\n\n### Handling Dependencies\n\n`dpkg` doesn't resolve dependencies automatically. If you encounter dependency errors, use:\n```console\n$ sudo apt-get -f install\n```\nThis will attempt to fix broken dependencies after a `dpkg` installation.\n\n### Preventing Configuration During Installation\n\nUse `--unpack` instead of `-i` to unpack a package without configuring it, which is useful when you need to modify files before configuration:\n```console\n$ sudo dpkg --unpack package.deb\n$ # make changes to files\n$ sudo dpkg --configure package\n```\n\n### Finding Which Package Owns a Command\n\nWhen you want to know which package provides a specific command:\n```console\n$ which command\n/usr/bin/command\n$ dpkg -S /usr/bin/command\npackage: /usr/bin/command\n```\n\n### Understanding Package Status Codes\n\nIn `dpkg -l` output, the first two characters indicate package status:\n- `ii`: package is installed and configured\n- `rc`: package was removed but config files remain\n- `un`: package is unknown/not installed\n\n## Frequently Asked Questions\n\n#### Q1. How is dpkg different from apt?\nA. `dpkg` is a low-level package manager that works directly with .deb files and doesn't handle dependencies automatically. `apt` is a higher-level tool that resolves dependencies and can download packages from repositories.\n\n#### Q2. How do I fix \"dependency problems\" errors?\nA. Run `sudo apt-get -f install` to attempt to resolve dependency issues after a `dpkg` installation.\n\n#### Q3. How can I see what files a package will install before installing it?\nA. Use `dpkg-deb --contents package.deb` to list the files contained in a package without installing it.\n\n#### Q4. How do I reinstall a package with dpkg?\nA. Use `sudo dpkg -i --force-reinstall package.deb` to reinstall a package even if it's already installed.\n\n#### Q5. How do I prevent a package from being upgraded?\nA. Use `sudo apt-mark hold package` to prevent a package from being automatically upgraded.\n\n## References\n\nhttps://man7.org/linux/man-pages/man1/dpkg.1.html\n\n## Revisions\n\n- 2025/05/05 First revision",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1706,
    "output_tokens": 1712
  }
}