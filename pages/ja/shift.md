# shift コマンド

シェルスクリプト内で位置パラメータをシフトします。

## 概要

`shift` コマンドはシェルスクリプト内で使用され、位置パラメータ（コマンドライン引数）を左にシフトします。デフォルトでは、`$2` が `$1` になり、`$3` が `$2` になるといった具合に、すべての引数が一つずつ左に移動します。元の `$1` は削除されます。これは、多数の引数を順番に処理する場合や、オプションを解析する場合に特に便利です。

## オプション

### **N（数値）**

シフトする位置パラメータの数を指定します。デフォルトは1です。

```console
$ shift 2  # 2つの位置パラメータをシフト
```

## 使用例

### 基本的な使用方法

```console
#!/bin/bash
echo "最初の引数: $1"
echo "2番目の引数: $2"
shift
echo "シフト後の最初の引数: $1"
echo "シフト後の2番目の引数: $2"
```

実行結果:
```console
$ ./script.sh apple orange banana
最初の引数: apple
2番目の引数: orange
シフト後の最初の引数: orange
シフト後の2番目の引数: banana
```

### 複数の引数をシフトする

```console
#!/bin/bash
echo "引数: $1 $2 $3"
shift 2
echo "2つシフト後の引数: $1 $2 $3"
```

実行結果:
```console
$ ./script.sh a b c d
引数: a b c
2つシフト後の引数: c d
```

### while ループでの使用例

```console
#!/bin/bash
while [ $# -gt 0 ]; do
    echo "処理中の引数: $1"
    shift
done
```

実行結果:
```console
$ ./script.sh apple orange banana
処理中の引数: apple
処理中の引数: orange
処理中の引数: banana
```

## ヒント:

### 引数の数を確認する

`$#` 変数を使用して、残りの引数の数を確認できます。これは、すべての引数を処理したかどうかを判断するのに役立ちます。

### エラー処理

シフトする引数がない場合（`$#` が0の場合）に `shift` を実行すると、エラーが発生します。常に `$#` をチェックしてからシフトすることをお勧めします。

### オプション解析での活用

`shift` はコマンドラインオプションを解析する際に非常に便利です。オプションを処理した後にシフトすることで、次のオプションに進むことができます。

## よくある質問

#### Q1. `shift` コマンドは何に使われますか？
A. シェルスクリプト内で位置パラメータ（コマンドライン引数）を左にシフトするために使用されます。これにより、多数の引数を順番に処理できます。

#### Q2. `shift` を使うと元の引数はどうなりますか？
A. シフトされた引数は完全に削除されます。例えば、`shift` を実行すると、元の `$1` の値は失われ、`$2` の値が新しい `$1` になります。

#### Q3. 引数がない状態で `shift` を実行するとどうなりますか？
A. 引数がない状態（`$#` が0の場合）で `shift` を実行すると、エラーが発生します。常に `$#` をチェックしてからシフトすることをお勧めします。

#### Q4. `shift` コマンドは特定のシェルでのみ使用できますか？
A. `shift` は bash、sh、zsh など、ほとんどのUNIXシェルで使用できる組み込みコマンドです。

## 参考文献

https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-shift

## 改訂履歴

- 2025/04/30 初版作成