<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  visudo - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>visudo command</h1>
<p>Edit the sudoers file safely with syntax checking.</p>
<h2>Overview</h2>
<p><code>visudo</code> is a command-line utility that provides a safe way to edit the sudoers configuration file, which controls sudo access permissions. It locks the sudoers file during editing, performs syntax checking before saving changes, and prevents multiple simultaneous edits that could corrupt the file.</p>
<h2>Options</h2>
<h3><strong>-c</strong></h3>
<p>Check the sudoers file for syntax errors without making any changes.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-c
<span style="color: #000; font-style: italic">/etc/sudoers: parsed OK</span>
<span style="color: #000; font-style: italic">/etc/sudoers.d/custom: parsed OK</span>
</pre></div>
<h3><strong>-f [file]</strong></h3>
<p>Specify an alternate sudoers file location to edit instead of the default.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span>/etc/sudoers.d/custom
</pre></div>
<h3><strong>-s</strong></h3>
<p>Enable strict checking of the sudoers file. Warnings are treated as errors.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-s
<span style="color: #000; font-style: italic">&gt;&gt;&gt; /etc/sudoers: syntax error near line 28 &lt;&lt;&lt;</span>
<span style="color: #000; font-style: italic">What now?</span>
</pre></div>
<h3><strong>-q</strong></h3>
<p>Enable quiet mode that will not print error messages.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-q<span style="color: #F8F8F8"> </span>-c
</pre></div>
<h2>Usage Examples</h2>
<h3>Basic Usage</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo
</pre></div>
<p>This opens the default sudoers file in the system's default editor. After making changes, save and exit to have visudo check the syntax.</p>
<h3>Creating a New Configuration File</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span>/etc/sudoers.d/developers
</pre></div>
<p>This creates or edits a file in the sudoers.d directory, which is commonly used for custom sudo configurations.</p>
<h3>Checking Multiple Files</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>visudo<span style="color: #F8F8F8"> </span>-c
<span style="color: #000; font-style: italic">/etc/sudoers: parsed OK</span>
<span style="color: #000; font-style: italic">/etc/sudoers.d/custom: parsed OK</span>
<span style="color: #000; font-style: italic">/etc/sudoers.d/developers: parsed OK</span>
</pre></div>
<h2>Tips</h2>
<h3>Use EDITOR Environment Variable</h3>
<p>Set your preferred editor before running visudo:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span><span style="color: #000">EDITOR</span><span style="color: #CE5C00; font-weight: bold">=</span>nano<span style="color: #F8F8F8"> </span>sudo<span style="color: #F8F8F8"> </span>visudo
</pre></div>
<h3>Create User-Specific Rules in Separate Files</h3>
<p>Instead of editing the main sudoers file, create separate files in <code>/etc/sudoers.d/</code> for different users or groups. This makes management easier and safer.</p>
<h3>Always Use visudo, Never Edit Directly</h3>
<p>Never edit <code>/etc/sudoers</code> with a regular text editor. If you introduce syntax errors, you might lock yourself out of sudo access, which can be difficult to recover from.</p>
<h3>Common Sudoers Syntax</h3>
<p>Basic syntax for giving a user full sudo access:</p>
<pre><code>username ALL=(ALL) ALL
</code></pre><p>For passwordless sudo:</p>
<pre><code>username ALL=(ALL) NOPASSWD: ALL
</code></pre><h2>Frequently Asked Questions</h2>
<h4>Q1. What happens if I save a sudoers file with syntax errors?</h4>
<p>A. visudo will alert you to the error and give you options to re-edit the file, write it to a different location, or abandon your changes. This prevents you from corrupting the sudoers file.</p>
<h4>Q2. How do I change the default editor used by visudo?</h4>
<p>A. Set the EDITOR or VISUAL environment variable before running visudo: <code>EDITOR=nano sudo visudo</code></p>
<h4>Q3. Can I use visudo to edit files other than the main sudoers file?</h4>
<p>A. Yes, use the <code>-f</code> option to specify an alternate file: <code>sudo visudo -f /etc/sudoers.d/myconfig</code></p>
<h4>Q4. What's the difference between /etc/sudoers and files in /etc/sudoers.d/?</h4>
<p>A. The main <code>/etc/sudoers</code> file is the primary configuration file, while <code>/etc/sudoers.d/</code> is a directory for additional configuration files that are included in the main configuration. Using separate files in this directory helps organize sudo rules.</p>
<h2>References</h2>
<p>https://www.sudo.ws/docs/man/visudo.man/</p>
<h2>Revisions</h2>
<ul>
<li>2025/04/30 First revision</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright Â© 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>