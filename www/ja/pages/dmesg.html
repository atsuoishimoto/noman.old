<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  dmesg - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <a href="#">Try</a>
        <a href="https://github.com/atsuoishimoto/noman">GitHub</a>
        <span id="language-switcher"></span>
      </div>
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>dmesgコマンド</h1>
<p>カーネルのリングバッファからシステムメッセージを表示します。</p>
<h2>概要</h2>
<p>dmesgコマンドは、Linuxカーネルのリングバッファに記録されたシステムメッセージを表示します。起動時のハードウェア検出、デバイスドライバの読み込み、エラーメッセージなど、システムの診断情報を確認するのに役立ちます。システム管理者やトラブルシューティングを行うユーザーにとって重要なツールです。</p>
<h2>オプション</h2>
<h3><strong>-H, --human</strong></h3>
<p>人間が読みやすい形式で出力します（タイムスタンプの整形、色付けなど）</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-H
<span style="color: #000; font-style: italic">[4月29 10:58] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017) (gcc version 11.4.0) #101-Ubuntu SMP Tue Apr 20 14:30:22 UTC 2023</span>
<span style="color: #000; font-style: italic">[  +0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1234abcd-1234-1234-1234-1234abcd ro quiet splash</span>
</pre></div>
<h3><strong>-c, --clear</strong></h3>
<p>メッセージを表示した後、バッファをクリアします</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-c
<span style="color: #000; font-style: italic">[12345.678901] usb 1-2: new high-speed USB device number 3 using xhci_hcd</span>
<span style="color: #000; font-style: italic">[12345.789012] usb 1-2: New USB device found, idVendor=abcd, idProduct=1234</span>
</pre></div>
<h3><strong>-l, --level=LIST</strong></h3>
<p>指定したレベル（err, warn, info など）のメッセージのみを表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>err,warn
<span style="color: #000; font-style: italic">[12345.678901] usb 1-2: device descriptor read/64, error -110</span>
<span style="color: #000; font-style: italic">[12346.789012] sd 0:0:0:0: [sda] Assuming drive cache: write through</span>
</pre></div>
<h3><strong>-T, --ctime</strong></h3>
<p>人間が読みやすい時刻形式で表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-T
<span style="color: #000; font-style: italic">[水 4月 29 10:58:23 2025] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017) (gcc version 11.4.0)</span>
<span style="color: #000; font-style: italic">[水 4月 29 10:58:23 2025] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1234abcd-1234-1234-1234-1234abcd ro quiet splash</span>
</pre></div>
<h3><strong>-w, --follow</strong></h3>
<p>新しいメッセージを待ち続けます（<code>tail -f</code>のような動作）</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-w
<span style="color: #000; font-style: italic">[12347.890123] usb 2-1: new high-speed USB device number 3 using ehci-pci</span>
<span style="color: #000; font-style: italic">[12348.901234] usb 2-1: New USB device found, idVendor=abcd, idProduct=1234, bcdDevice=1.00</span>
<span style="color: #8F5902"># </span>新しいメッセージが発生するたびに表示される
</pre></div>
<h2>使用例</h2>
<h3>基本的な使用法</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg
<span style="color: #000; font-style: italic">[    0.000000] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017) (gcc version 11.4.0) #101-Ubuntu SMP Tue Apr 20 14:30:22 UTC 2023</span>
<span style="color: #000; font-style: italic">[    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1234abcd-1234-1234-1234-1234abcd ro quiet splash</span>
<span style="color: #8F5902"># </span>以下、多数のメッセージが表示される
</pre></div>
<h3>特定のキーワードでフィルタリング</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span><span style="color: #000; font-weight: bold">|</span><span style="color: #F8F8F8"> </span>grep<span style="color: #F8F8F8"> </span>-i<span style="color: #F8F8F8"> </span>usb
<span style="color: #000; font-style: italic">[    2.123456] usb 1-1: new high-speed USB device number 2 using xhci_hcd</span>
<span style="color: #000; font-style: italic">[    2.234567] usb 1-1: New USB device found, idVendor=8087, idProduct=0024</span>
<span style="color: #8F5902"># </span>USBに関連するメッセージのみが表示される
</pre></div>
<h3>最新のメッセージのみを表示</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span><span style="color: #000; font-weight: bold">|</span><span style="color: #F8F8F8"> </span>tail<span style="color: #F8F8F8"> </span>-n<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">10</span>
<span style="color: #000; font-style: italic">[12345.678901] wlan0: associated</span>
<span style="color: #000; font-style: italic">[12345.789012] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready</span>
<span style="color: #8F5902"># </span>最新の10行のメッセージが表示される
</pre></div>
<h2>ヒント:</h2>
<h3>管理者権限の使用</h3>
<p>一般ユーザーでは一部のメッセージが表示されないことがあります。重要な診断を行う場合は<code>sudo dmesg</code>を使用してください。</p>
<h3>ログファイルの確認</h3>
<p>多くのLinuxディストリビューションでは、起動時のdmesgの出力が<code>/var/log/dmesg</code>または<code>/var/log/boot.log</code>に保存されています。過去の起動情報を確認したい場合はこれらのファイルを参照してください。</p>
<h3>効果的なトラブルシューティング</h3>
<p>ハードウェアの問題を診断する際は、デバイスを接続した直後に<code>dmesg | tail</code>を実行すると、そのデバイスに関連する最新のメッセージを確認できます。</p>
<h3>タイムスタンプの解釈</h3>
<p>デフォルトのタイムスタンプは起動からの秒数です。<code>-T</code>または<code>-H</code>オプションを使用すると、より読みやすい時刻形式で表示されます。</p>
<h2>よくある質問</h2>
<h4>Q1. dmesgの出力が多すぎる場合、どうすれば必要な情報だけを見つけられますか？</h4>
<p>A. <code>dmesg | grep キーワード</code>を使用して特定のキーワードでフィルタリングしたり、<code>dmesg -l err,warn</code>でエラーと警告のみを表示したりすることができます。</p>
<h4>Q2. dmesgの出力をファイルに保存するにはどうすればよいですか？</h4>
<p>A. <code>dmesg &gt; ファイル名.txt</code>を実行すると、出力をファイルに保存できます。</p>
<h4>Q3. dmesgのバッファサイズはどのくらいですか？</h4>
<p>A. デフォルトでは数百KBですが、<code>/proc/sys/kernel/printk</code>の設定によって変わります。古いメッセージは新しいメッセージによって上書きされます。</p>
<h4>Q4. macOSでdmesgは使えますか？</h4>
<p>A. macOSにもdmesgコマンドはありますが、Linuxとは異なる動作をします。macOSでは<code>log show --predicate 'eventMessage contains &quot;kernel&quot;'</code>コマンドを使用することでカーネルログを確認できます。</p>
<h2>参考</h2>
<p>https://man7.org/linux/man-pages/man1/dmesg.1.html</p>
<h2>改訂</h2>
<ul>
<li>2025/04/29 macOSでの使用に関する情報を追加。よくある質問セクションを拡充。</li>
<li>2025/04/29 初版作成。</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>