# date コマンド

システムの日付と時刻を表示または設定します。

## 概要

`date` コマンドはシステムクロックに基づいて現在の日付と時刻を表示します。また、日付の出力をさまざまな形式でフォーマットしたり、タイムゾーン間で変換したり、適切な権限で実行すると、システムの日付と時刻を設定したりすることもできます。

## オプション

### **-d, --date=文字列**

現在の時刻ではなく、指定した文字列で表される時刻を表示します

```console
$ date -d "next Thursday"
Thu May  8 00:00:00 UTC 2025
# 次の木曜日の日時を表示している
```

### **-f, --file=日付ファイル**

日付ファイルの各行を日付として解釈して表示します

```console
$ echo "2023-01-01" > dates.txt
$ echo "tomorrow" >> dates.txt
$ date -f dates.txt
Sun Jan  1 00:00:00 UTC 2023
Mon May  5 00:00:00 UTC 2025
# ファイル内の各行を日付として解釈して表示している
```

### **-I[TIMESPEC], --iso-8601[=TIMESPEC]**

ISO 8601形式で日付/時刻を出力します。TIMESPECには'date'、'hours'、'minutes'、'seconds'、または'ns'を指定できます

```console
$ date -I
2025-05-04
$ date -Iseconds
2025-05-04T12:34:56+00:00
# ISO 8601形式で日付と時刻を表示している
```

### **-r, --reference=ファイル**

指定したファイルの最終更新時刻を表示します

```console
$ touch testfile
$ date -r testfile
Sun May  4 12:34:56 UTC 2025
# ファイルの最終更新時刻を表示している
```

### **-R, --rfc-email**

RFC 5322形式（メールヘッダーに適した形式）で日付と時刻を出力します

```console
$ date -R
Sun, 04 May 2025 12:34:56 +0000
# メールヘッダーに適した形式で表示している
```

### **-u, --utc, --universal**

協定世界時（UTC）で時刻を表示または設定します

```console
$ date
Sun May  4 12:34:56 PDT 2025
$ date -u
Sun May  4 19:34:56 UTC 2025
# UTCでの時刻を表示している
```

### **+FORMAT**

FORMAT指定に従って出力をフォーマットします

```console
$ date "+%Y-%m-%d %H:%M:%S"
2025-05-04 12:34:56
# 指定した形式で日付と時刻を表示している
```

## 使用例

### 基本的な日付表示

```console
$ date
Sun May  4 12:34:56 PDT 2025
# 現在の日付と時刻を表示している
```

### カスタムフォーマット

```console
$ date "+Today is %A, %B %d, %Y"
Today is Sunday, May 04, 2025
# カスタム形式で日付を表示している
```

### 日付の計算

```console
$ date -d "next week"
Sun May 11 12:34:56 PDT 2025
$ date -d "2 months ago"
Fri Mar  4 12:34:56 PST 2025
# 相対的な日付を計算して表示している
```

### システム日付の設定（root権限が必要）

```console
$ sudo date -s "2025-05-04 12:00:00"
Sun May  4 12:00:00 PDT 2025
# システムの日付と時刻を設定している
```

## ヒント:

### よく使われるフォーマット指定子

- `%Y`: 年（例：2025）
- `%m`: 月（01-12）
- `%d`: 日（01-31）
- `%H`: 時（00-23）
- `%M`: 分（00-59）
- `%S`: 秒（00-60）
- `%A`: 曜日の完全名（例：Sunday）
- `%B`: 月の完全名（例：May）
- `%Z`: タイムゾーン略称（例：PDT）

### ファイル名用のタイムスタンプ

スクリプトで一意のファイル名を生成するためのタイムスタンプを作成できます：

```console
$ backup_file="backup_$(date +%Y%m%d_%H%M%S).tar.gz"
$ echo $backup_file
backup_20250504_123456.tar.gz
# 現在の日時を含むファイル名を生成している
```

### Unixタイムスタンプ

Unixタイムスタンプ（1970年1月1日からの秒数）を取得します：

```console
$ date +%s
1746619200
# Unixタイムスタンプを表示している
```

## よくある質問

#### Q1. 特定の形式で日付を表示するにはどうすればよいですか？
A. `+FORMAT`オプションをフォーマット指定子と共に使用します。例えば：`date "+%Y-%m-%d"`は日付を2025-05-04として表示します。

#### Q2. 異なるタイムゾーンの日付を表示するにはどうすればよいですか？
A. `TZ`環境変数を使用できます：`TZ="America/New_York" date`はニューヨークの時間を表示します。

#### Q3. Unixタイムスタンプを読みやすい日付に変換するにはどうすればよいですか？
A. `date -d @タイムスタンプ`を使用します。例えば：`date -d @1609459200`はタイムスタンプ1609459200の日付を表示します。

#### Q4. 未来または過去の日付を計算するにはどうすればよいですか？
A. `-d`オプションを相対的な時間表現と共に使用します：`date -d "next Monday"`または`date -d "3 days ago"`などです。

## macOSでの注意点

macOSでは、`date`コマンドのオプションが若干異なります。`-d`オプションは利用できず、代わりに日付調整には`-v`を使用します：

```console
$ date -v+1d  # 1日追加
Mon May  5 12:34:56 PDT 2025
```

macOSでのフォーマットは同じ構文を使用します：

```console
$ date "+%Y-%m-%d"
2025-05-04
```

## 参考資料

https://www.gnu.org/software/coreutils/manual/html_node/date-invocation.html

## 改訂履歴

- 2025/05/04 初版作成