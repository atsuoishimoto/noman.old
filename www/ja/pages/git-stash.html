<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  git-stash - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>git stash コマンド</h1>
<p>作業中の変更を一時的に保存し、クリーンな作業ディレクトリに戻すためのコマンド。</p>
<h2>概要</h2>
<p><code>git stash</code>は、コミットしていない変更（追跡されているファイルの変更とステージングされた変更）を一時的に保存し、作業ディレクトリをクリーンな状態に戻します。これにより、ブランチの切り替えやプル操作などを行う際に、コミットせずに作業を一時退避させることができます。保存した変更は後で元に戻すことができます。</p>
<h2>オプション</h2>
<h3><strong>stash save [メッセージ]</strong></h3>
<p>変更を保存し、オプションでメッセージを付けることができます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>save<span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;作業中のログイン機能&quot;</span>
<span style="color: #000; font-style: italic">Saved working directory and index state On main: 作業中のログイン機能</span>
</pre></div>
<h3><strong>stash list</strong></h3>
<p>保存されたスタッシュの一覧を表示します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>list
<span style="color: #000; font-style: italic">stash@{0}: On main: 作業中のログイン機能</span>
<span style="color: #000; font-style: italic">stash@{1}: On feature-branch: ナビゲーションバーの修正</span>
</pre></div>
<h3><strong>stash apply [stash@{n}]</strong></h3>
<p>保存した変更を現在の作業ディレクトリに適用します。スタッシュは削除されません。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>apply<span style="color: #F8F8F8"> </span>stash@<span style="color: #CE5C00; font-weight: bold">{</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #CE5C00; font-weight: bold">}</span>
<span style="color: #000; font-style: italic">On branch main</span>
<span style="color: #000; font-style: italic">Changes not staged for commit:</span>
<span style="color: #000; font-style: italic">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span>
<span style="color: #000; font-style: italic">  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)</span>
<span style="color: #000; font-style: italic">        modified:   login.js</span>

<span style="color: #000; font-style: italic">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
<h3><strong>stash pop [stash@{n}]</strong></h3>
<p>保存した変更を適用し、スタッシュリストから削除します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>pop
<span style="color: #000; font-style: italic">On branch main</span>
<span style="color: #000; font-style: italic">Changes not staged for commit:</span>
<span style="color: #000; font-style: italic">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span>
<span style="color: #000; font-style: italic">  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)</span>
<span style="color: #000; font-style: italic">        modified:   login.js</span>

<span style="color: #000; font-style: italic">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
<span style="color: #000; font-style: italic">Dropped refs/stash@{0} (a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9)</span>
</pre></div>
<h3><strong>stash drop [stash@{n}]</strong></h3>
<p>特定のスタッシュを削除します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>drop<span style="color: #F8F8F8"> </span>stash@<span style="color: #CE5C00; font-weight: bold">{</span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #CE5C00; font-weight: bold">}</span>
<span style="color: #000; font-style: italic">Dropped stash@{1} (f1e2d3c4b5a6)</span>
</pre></div>
<h3><strong>stash clear</strong></h3>
<p>すべてのスタッシュを削除します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>clear
</pre></div>
<h3><strong>stash show [stash@{n}]</strong></h3>
<p>スタッシュの内容を表示します。<code>-p</code>オプションで詳細な差分を表示できます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>show<span style="color: #F8F8F8"> </span>stash@<span style="color: #CE5C00; font-weight: bold">{</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #CE5C00; font-weight: bold">}</span>
<span style="color: #000; font-style: italic"> login.js | 15 +++++++++++++++</span>
<span style="color: #000; font-style: italic"> 1 file changed, 15 insertions(+)</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>show<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span>stash@<span style="color: #CE5C00; font-weight: bold">{</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #CE5C00; font-weight: bold">}</span>
<span style="color: #000; font-style: italic">diff --git a/login.js b/login.js</span>
<span style="color: #000; font-style: italic">index 1234567..abcdefg 100644</span>
<span style="color: #000; font-style: italic">--- a/login.js</span>
<span style="color: #000; font-style: italic">+++ b/login.js</span>
<span style="color: #000; font-style: italic">@@ -10,6 +10,21 @@ function validateForm() {</span>
<span style="color: #000; font-style: italic">   // 入力検証のコード</span>
<span style="color: #000; font-style: italic">+  function authenticateUser() {</span>
<span style="color: #000; font-style: italic">+    // 認証処理のコード</span>
<span style="color: #000; font-style: italic">+  }</span>
</pre></div>
<h2>使用例</h2>
<h3>作業中の変更を一時保存してブランチを切り替える</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>status
<span style="color: #000; font-style: italic">On branch feature-login</span>
<span style="color: #000; font-style: italic">Changes not staged for commit:</span>
<span style="color: #000; font-style: italic">  modified:   login.js</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash
<span style="color: #000; font-style: italic">Saved working directory and index state WIP on feature-login: abc1234 最後のコミットメッセージ</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>checkout<span style="color: #F8F8F8"> </span>main
<span style="color: #000; font-style: italic">Switched to branch &#39;main&#39;</span>

<span style="color: #8F5902"># </span>作業後、元のブランチに戻って変更を復元
<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>checkout<span style="color: #F8F8F8"> </span>feature-login
<span style="color: #000; font-style: italic">Switched to branch &#39;feature-login&#39;</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>pop
<span style="color: #000; font-style: italic">On branch feature-login</span>
<span style="color: #000; font-style: italic">Changes not staged for commit:</span>
<span style="color: #000; font-style: italic">  modified:   login.js</span>
</pre></div>
<h3>未追跡ファイルも含めてスタッシュする</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>status
<span style="color: #000; font-style: italic">On branch feature-login</span>
<span style="color: #000; font-style: italic">Changes not staged for commit:</span>
<span style="color: #000; font-style: italic">  modified:   login.js</span>
<span style="color: #000; font-style: italic">Untracked files:</span>
<span style="color: #000; font-style: italic">  auth.js</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>-u
<span style="color: #000; font-style: italic">Saved working directory and index state WIP on feature-login: abc1234 最後のコミットメッセージ</span>
</pre></div>
<h2>ヒント:</h2>
<h3>意味のあるメッセージを付ける</h3>
<p><code>git stash save &quot;メッセージ&quot;</code>を使って、スタッシュに説明的なメッセージを付けると、後で内容を思い出しやすくなります。</p>
<h3>部分的なスタッシュ</h3>
<p><code>git stash -p</code>（または <code>--patch</code>）を使うと、変更の一部だけをスタッシュできます。各変更ハンクごとに保存するかどうか選択できるため、関連する変更だけをグループ化できます。</p>
<h3>ブランチの作成とスタッシュの適用</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash
<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>stash<span style="color: #F8F8F8"> </span>branch<span style="color: #F8F8F8"> </span>new-branch<span style="color: #F8F8F8"> </span>stash@<span style="color: #CE5C00; font-weight: bold">{</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #CE5C00; font-weight: bold">}</span>
</pre></div>
<p>このコマンドは新しいブランチを作成し、そこにスタッシュを適用して、成功したらスタッシュを削除します。コンフリクトが発生した場合に便利です。</p>
<h3>スタッシュの定期的なクリーンアップ</h3>
<p>古いスタッシュは定期的に確認し、不要なものは削除しましょう。長期間放置されたスタッシュは混乱の原因になります。</p>
<h2>よくある質問</h2>
<h4>Q1. スタッシュした変更を間違って削除してしまった場合、復元できますか？</h4>
<p>A. 通常のスタッシュ操作では、<code>git stash drop</code>や<code>git stash clear</code>で削除したスタッシュを復元することはできません。ただし、Gitのreflogを使って最近削除されたスタッシュを見つけられる場合があります。</p>
<h4>Q2. 複数のブランチで同じスタッシュを適用できますか？</h4>
<p>A. はい、<code>git stash apply</code>を使えば同じスタッシュを複数のブランチに適用できます。ただし、コンフリクトが発生する可能性があるので注意が必要です。</p>
<h4>Q3. スタッシュはリモートリポジトリに共有されますか？</h4>
<p>A. いいえ、スタッシュはローカルリポジトリにのみ保存され、<code>git push</code>でリモートに送信されることはありません。</p>
<h4>Q4. スタッシュとコミットの違いは何ですか？</h4>
<p>A. スタッシュは一時的な保存場所で、履歴に残りません。コミットはリポジトリの履歴に永続的に記録されます。スタッシュは短期的な作業の退避に、コミットは意味のある変更の記録に使用します。</p>
<h2>参考資料</h2>
<p>https://git-scm.com/docs/git-stash</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/04/30 初版作成</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>