{
  "id": "msg_01MCpoETEk94wFmUGePyVhKB",
  "content": [
    {
      "text": "# statコマンド\n\nファイルやファイルシステムのステータス情報を表示します。\n\n## 概要\n\n`stat`コマンドは、ファイル、ディレクトリ、またはファイルシステムに関する詳細情報を表示します。ファイルサイズ、パーミッション、アクセス時間、inode情報など、メタデータを表示します。このコマンドは、`ls`のような基本的なコマンドが提供する以上のファイル属性を調べる必要があるシステム管理者やユーザーにとって便利です。\n\n## オプション\n\n### **-c, --format=FORMAT**\n\n指定したフォーマット文字列を使用して情報を出力します。\n\n```console\n$ stat -c \"%n %s %U\" file.txt\nfile.txt 1024 user\n```\n\n### **-f, --file-system**\n\nファイルのステータスではなく、ファイルシステムのステータスを表示します。\n\n```console\n$ stat -f /home\n  File: \"/home\"\n    ID: 2f5b04742a3bfad9 Namelen: 255     Type: ext4\nBlock size: 4096       Fundamental block size: 4096\nBlocks: Total: 121211648  Free: 62303156   Available: 56073252\nInodes: Total: 30539776   Free: 29752540\n```\n\n### **-L, --dereference**\n\nリンクをたどります（リンク自体ではなく、リンクが参照するファイルの情報を表示します）。\n\n```console\n$ stat -L symlink.txt\n  File: 'symlink.txt'\n  Size: 1024      \tBlocks: 8          IO Block: 4096   regular file\nDevice: 801h/2049d\tInode: 1234567     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/    user)   Gid: ( 1000/    user)\nAccess: 2025-05-01 10:15:30.000000000 +0000\nModify: 2025-05-01 10:15:30.000000000 +0000\nChange: 2025-05-01 10:15:30.000000000 +0000\n Birth: 2025-05-01 10:15:30.000000000 +0000\n```\n\n### **-t, --terse**\n\n情報を簡潔な形式で表示します。\n\n```console\n$ stat -t file.txt\nfile.txt 1024 8 81a4 1000 1000 801 1234567 1 0 0 1619875530 1619875530 1619875530 1619875530\n```\n\n### **--printf=FORMAT**\n\n--formatと似ていますが、バックスラッシュエスケープを解釈し、必須の末尾の改行を出力しません。\n\n```console\n$ stat --printf=\"%n has %s bytes\\n\" file.txt\nfile.txt has 1024 bytes\n```\n\n## 使用例\n\n### 基本的なファイル情報\n\n```console\n$ stat document.txt\n  File: document.txt\n  Size: 1024      \tBlocks: 8          IO Block: 4096   regular file\nDevice: 801h/2049d\tInode: 1234567     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/    user)   Gid: ( 1000/    user)\nAccess: 2025-05-01 10:15:30.000000000 +0000\nModify: 2025-05-01 10:15:30.000000000 +0000\nChange: 2025-05-01 10:15:30.000000000 +0000\n Birth: 2025-05-01 10:15:30.000000000 +0000\n```\n\n### 複数ファイルのカスタムフォーマット\n\n```console\n$ stat -c \"Name: %n, Size: %s bytes, Owner: %U\" *.txt\nName: document.txt, Size: 1024 bytes, Owner: user\nName: notes.txt, Size: 512 bytes, Owner: user\nName: readme.txt, Size: 256 bytes, Owner: user\n```\n\n### ファイルシステム情報\n\n```console\n$ stat -f /\n  File: \"/\"\n    ID: 2f5b04742a3bfad9 Namelen: 255     Type: ext4\nBlock size: 4096       Fundamental block size: 4096\nBlocks: Total: 121211648  Free: 62303156   Available: 56073252\nInodes: Total: 30539776   Free: 29752540\n```\n\n## ヒント:\n\n### 特定の情報のみを取得する\n\nフォーマット指定子を使用して`-c`オプションを使用し、必要な情報だけを抽出します。例えば、`stat -c \"%s\" file.txt`はファイルサイズのみを表示します。\n\n### ファイルのタイムスタンプを比較する\n\nファイルが最後にアクセスされた時間、変更された時間、またはメタデータが変更された時間を確認するために`stat`を使用します。これはトラブルシューティングやファイル操作の検証に役立ちます。\n\n### inode情報を確認する\n\n`stat`で表示されるinode番号は、2つのファイルがハードリンクされているかどうかを識別するのに役立ちます（同じinode番号を共有します）。\n\n### フォーマット指定子\n\n`-c`オプションの一般的なフォーマット指定子を覚えましょう：\n- `%n`: ファイル名\n- `%s`: 合計サイズ（バイト単位）\n- `%U`: 所有者のユーザー名\n- `%G`: 所有者のグループ名\n- `%a`: 8進数でのアクセス権\n- `%x`: 最終アクセス時間\n- `%y`: 最終変更時間\n- `%z`: 最終ステータス変更時間\n\n## よくある質問\n\n#### Q1. 変更時間（Modify）とステータス変更時間（Change）の違いは何ですか？\nA. 変更時間（`%y`）はファイルの内容が最後に変更された時間です。ステータス変更時間（`%z`）はファイルのメタデータ（パーミッション、所有権など）が最後に変更された時間です。\n\n#### Q2. ファイルサイズだけを確認するにはどうすればよいですか？\nA. `stat -c \"%s\" ファイル名`を使用して、バイト単位のファイルサイズのみを表示します。\n\n#### Q3. statでディスク容量を確認するにはどうすればよいですか？\nA. `stat -f /ファイルシステムのパス`を使用して、合計、空き、利用可能な容量を含むファイルシステム情報を確認します。\n\n#### Q4. statとls -lの違いは何ですか？\nA. `stat`はファイルに関するより詳細なメタデータ（正確なタイムスタンプやinode情報を含む）を提供しますが、`ls -l`はファイル属性のより簡潔な要約を提供します。\n\n## macOSでの考慮事項\n\nmacOSでは、`stat`コマンドの構文とオプションがGNU/Linuxとは異なります。フォーマットオプションは`-c`の代わりに`-f`を使用し、フォーマット指定子も異なります：\n\n```console\n$ stat -f \"Name: %N, Size: %z bytes, Owner: %Su\" file.txt\nName: file.txt, Size: 1024 bytes, Owner: user\n```\n\nmacOSの一般的なフォーマット指定子：\n- `%N`: ファイル名\n- `%z`: サイズ（バイト単位）\n- `%Su`: 所有者のユーザー名\n- `%Sg`: 所有者のグループ名\n- `%Sp`: ファイルパーミッション\n- `%a`: 最終アクセス時間\n- `%m`: 最終変更時間\n- `%c`: 最終ステータス変更時間\n\n## 参考文献\n\nhttps://www.gnu.org/software/coreutils/manual/html_node/stat-invocation.html\n\n## 改訂履歴\n\n- 2025/05/05 初版",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1837,
    "output_tokens": 2363
  }
}