<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  openssl - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>openssl コマンド</h1>
<p>暗号化通信、証明書管理、および様々な暗号操作のための暗号機能を提供します。</p>
<h2>概要</h2>
<p>OpenSSLは、Secure Sockets Layer (SSL)およびTransport Layer Security (TLS)プロトコルを実装する強力なツールキットで、汎用の高強度暗号化ライブラリも備えています。コマンドラインから証明書の作成、鍵の管理、ファイルの暗号化/復号化、メッセージダイジェストの生成など、多くの暗号操作を実行できます。</p>
<h2>オプション</h2>
<p>OpenSSLはコマンドベースの構造を使用しており、メインコマンドの後にサブコマンドとそのオプションが続きます。</p>
<h3><strong>s_client</strong> - SSL/TLSクライアント</h3>
<p>SSL/TLSを使用してリモートホストに接続する汎用SSL/TLSクライアントを実装します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>s_client<span style="color: #F8F8F8"> </span>-connect<span style="color: #F8F8F8"> </span>example.com:443
<span style="color: #000; font-style: italic">CONNECTED(00000003)</span>
<span style="color: #000; font-style: italic">depth=2 C = US, O = Internet Security Research Group, CN = ISRG Root X1</span>
<span style="color: #000; font-style: italic">verify return:1</span>
<span style="color: #000; font-style: italic">depth=1 C = US, O = Let&#39;s Encrypt, CN = R3</span>
<span style="color: #000; font-style: italic">verify return:1</span>
<span style="color: #000; font-style: italic">depth=0 CN = example.com</span>
<span style="color: #000; font-style: italic">verify return:1</span>
<span style="color: #000; font-style: italic">---</span>
<span style="color: #000; font-style: italic">Certificate chain</span>
<span style="color: #000; font-style: italic"> 0 s:CN = example.com</span>
<span style="color: #000; font-style: italic">   i:C = US, O = Let&#39;s Encrypt, CN = R3</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>x509</strong> - 証明書表示と署名ユーティリティ</h3>
<p>証明書情報の表示、様々な形式への証明書の変換、証明書リクエストの署名を行います。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>x509<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>certificate.crt<span style="color: #F8F8F8"> </span>-text<span style="color: #F8F8F8"> </span>-noout
<span style="color: #000; font-style: italic">Certificate:</span>
<span style="color: #000; font-style: italic">    Data:</span>
<span style="color: #000; font-style: italic">        Version: 3 (0x2)</span>
<span style="color: #000; font-style: italic">        Serial Number:</span>
<span style="color: #000; font-style: italic">            04:e5:7b:d2:1d:d5:e5:2c:...</span>
<span style="color: #000; font-style: italic">        Signature Algorithm: sha256WithRSAEncryption</span>
<span style="color: #000; font-style: italic">        Issuer: C=US, O=Let&#39;s Encrypt, CN=R3</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>genrsa</strong> - RSA秘密鍵の生成</h3>
<p>RSA秘密鍵を生成します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>genrsa<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>private.key<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">2048</span>
<span style="color: #000; font-style: italic">Generating RSA private key, 2048 bit long modulus (2 primes)</span>
<span style="color: #000; font-style: italic">.....+++++</span>
<span style="color: #000; font-style: italic">.....+++++</span>
<span style="color: #000; font-style: italic">e is 65537 (0x010001)</span>
</pre></div>
<h3><strong>req</strong> - PKCS#10証明書リクエストと証明書生成ユーティリティ</h3>
<p>PKCS#10形式の証明書リクエストを作成および処理します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>req<span style="color: #F8F8F8"> </span>-new<span style="color: #F8F8F8"> </span>-key<span style="color: #F8F8F8"> </span>private.key<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>certificate.csr
<span style="color: #000; font-style: italic">You are about to be asked to enter information that will be incorporated</span>
<span style="color: #000; font-style: italic">into your certificate request.</span>
<span style="color: #000; font-style: italic">What you are about to enter is what is called a Distinguished Name or a DN.</span>
<span style="color: #000; font-style: italic">There are quite a few fields but you can leave some blank</span>
<span style="color: #000; font-style: italic">For some fields there will be a default value,</span>
<span style="color: #000; font-style: italic">If you enter &#39;.&#39;, the field will be left blank.</span>
<span style="color: #000; font-style: italic">-----</span>
<span style="color: #000; font-style: italic">Country Name (2 letter code) [AU]:US</span>
<span style="color: #000; font-style: italic">State or Province Name (full name) [Some-State]:California</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>enc</strong> - 暗号を使用したエンコーディング</h3>
<p>様々な暗号アルゴリズムを使用して暗号化または復号化します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>enc<span style="color: #F8F8F8"> </span>-aes-256-cbc<span style="color: #F8F8F8"> </span>-salt<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>plaintext.txt<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>encrypted.txt
<span style="color: #000; font-style: italic">enter aes-256-cbc encryption password:</span>
<span style="color: #000; font-style: italic">Verifying - enter aes-256-cbc encryption password:</span>
</pre></div>
<h2>使用例</h2>
<h3>リモートSSL/TLSサーバーの確認</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>s_client<span style="color: #F8F8F8"> </span>-connect<span style="color: #F8F8F8"> </span>example.com:443<span style="color: #F8F8F8"> </span>-servername<span style="color: #F8F8F8"> </span>example.com
<span style="color: #000; font-style: italic">CONNECTED(00000003)</span>
<span style="color: #000; font-style: italic">depth=2 C = US, O = Internet Security Research Group, CN = ISRG Root X1</span>
<span style="color: #000; font-style: italic">verify return:1</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3>自己署名証明書の作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>req<span style="color: #F8F8F8"> </span>-x509<span style="color: #F8F8F8"> </span>-newkey<span style="color: #F8F8F8"> </span>rsa:4096<span style="color: #F8F8F8"> </span>-keyout<span style="color: #F8F8F8"> </span>key.pem<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>cert.pem<span style="color: #F8F8F8"> </span>-days<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">365</span><span style="color: #F8F8F8"> </span>-nodes
<span style="color: #000; font-style: italic">Generating a RSA private key</span>
<span style="color: #000; font-style: italic">.....++++</span>
<span style="color: #000; font-style: italic">.....++++</span>
<span style="color: #000; font-style: italic">writing new private key to &#39;key.pem&#39;</span>
<span style="color: #000; font-style: italic">-----</span>
<span style="color: #000; font-style: italic">You are about to be asked to enter information that will be incorporated</span>
<span style="color: #000; font-style: italic">into your certificate request.</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3>証明書チェーンの検証</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>verify<span style="color: #F8F8F8"> </span>-CAfile<span style="color: #F8F8F8"> </span>ca-bundle.crt<span style="color: #F8F8F8"> </span>certificate.crt
<span style="color: #000; font-style: italic">certificate.crt: OK</span>
</pre></div>
<h3>ランダムパスワードの生成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>rand<span style="color: #F8F8F8"> </span>-base64<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">12</span>
<span style="color: #000; font-style: italic">Ew6Y9RzYxAQeFA==</span>
</pre></div>
<h2>ヒント:</h2>
<h3>適切な鍵のパーミッションを設定する</h3>
<p>秘密鍵には常に制限的なパーミッションを設定して、不正アクセスを防止しましょう：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>chmod<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">600</span><span style="color: #F8F8F8"> </span>private.key
</pre></div>
<h3>証明書の有効期限を確認する</h3>
<p>予期しないサービス中断を避けるため、証明書の有効期限を確認しましょう：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>x509<span style="color: #F8F8F8"> </span>-enddate<span style="color: #F8F8F8"> </span>-noout<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>certificate.crt
<span style="color: #000; font-style: italic">notAfter=May 15 12:00:00 2026 GMT</span>
</pre></div>
<h3>証明書フォーマットの変換</h3>
<p>OpenSSLは異なる証明書フォーマット（PEM、DER、PKCS#12）間の変換ができます：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>x509<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>cert.pem<span style="color: #F8F8F8"> </span>-inform<span style="color: #F8F8F8"> </span>PEM<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>cert.der<span style="color: #F8F8F8"> </span>-outform<span style="color: #F8F8F8"> </span>DER
</pre></div>
<h3>自動化には -passin と -passout を使用する</h3>
<p>スクリプト作成時には、これらのオプションを使用して非対話的にパスワードを提供できます：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>rsa<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>encrypted.key<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>decrypted.key<span style="color: #F8F8F8"> </span>-passin<span style="color: #F8F8F8"> </span>file:password.txt
</pre></div>
<h2>よくある質問</h2>
<h4>Q1. CSR（証明書署名リクエスト）はどのように作成しますか？</h4>
<p>A. <code>openssl req -new -key private.key -out request.csr</code> を使用します。証明書情報の入力を求められます。</p>
<h4>Q2. 証明書の内容を確認するにはどうすればよいですか？</h4>
<p>A. <code>openssl x509 -in certificate.crt -text -noout</code> を使用して証明書の詳細を表示します。</p>
<h4>Q3. 証明書をPEM形式からPKCS#12形式に変換するにはどうすればよいですか？</h4>
<p>A. <code>openssl pkcs12 -export -out certificate.pfx -inkey private.key -in certificate.crt -certfile ca-chain.crt</code> を使用します。</p>
<h4>Q4. ウェブサイトへのセキュア接続をテストするにはどうすればよいですか？</h4>
<p>A. <code>openssl s_client -connect example.com:443 -servername example.com</code> を使用して接続を確立し、証明書の詳細を表示します。</p>
<h4>Q5. 強力なランダムパスワードを生成するにはどうすればよいですか？</h4>
<p>A. <code>openssl rand -base64 16</code> を使用して、base64でエンコードされた16バイトのランダム文字列を生成します。</p>
<h2>参考資料</h2>
<p>https://www.openssl.org/docs/man1.1.1/man1/</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/04 初回改訂</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>