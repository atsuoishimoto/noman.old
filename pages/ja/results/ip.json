{
  "id": "msg_01TRx652N5r6DTCzwZSaSYpN",
  "content": [
    {
      "text": "# ip コマンド\n\nネットワークインターフェース、ルーティング、アドレスを管理するためのネットワーク設定ツールです。\n\n## 概要\n\n`ip` コマンドは、Linuxシステムでネットワークインターフェース、ルーティングテーブル、アドレスを設定・監視するための強力なユーティリティです。iproute2パッケージの一部であり、ifconfig、route、netstatなどの古いネットワークコマンドよりも多くの機能を提供します。このコマンドは、オブジェクト（link、address、routeなど）の後にコマンドとオプションが続く構造化された構文に従います。\n\n## オプション\n\n### **help**\n\n特定のオブジェクトのヘルプ情報を表示します\n\n```console\n$ ip help\nUsage: ip [ OPTIONS ] OBJECT { COMMAND | help }\n       ip [ -force ] -batch filename\nwhere  OBJECT := { link | address | addrlabel | route | rule | neigh | ntable |\n                   tunnel | tuntap | maddress | mroute | mrule | monitor | xfrm |\n                   netns | l2tp | fou | macsec | tcp_metrics | token | netconf | ila |\n                   vrf | sr | nexthop | mptcp }\n       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |\n                    -h[uman-readable] | -iec | -j[son] | -p[retty] |\n                    -f[amily] { inet | inet6 | mpls | bridge | link } |\n                    -4 | -6 | -I | -D | -M | -B | -0 |\n                    -l[oops] { maximum-addr-flush-attempts } | -br[ief] |\n                    -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |\n                    -rc[vbuf] [size] | -n[etns] name | -N[umeric] | -a[ll] |\n                    -c[olor]}\n```\n\n### **-s, --stats, --statistics**\n\nより多くの情報/統計を表示します\n\n```console\n$ ip -s link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    RX: bytes  packets  errors  dropped overrun mcast   \n    3800       38       0       0       0       0       \n    TX: bytes  packets  errors  dropped carrier collsns \n    3800       38       0       0       0       0       \n```\n\n### **-d, --details**\n\n詳細情報を表示します\n\n```console\n$ ip -d link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 promiscuity 0 minmtu 0 maxmtu 0 \n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n```\n\n### **-h, --human, --human-readable**\n\n統計を人間が読みやすい形式で表示します\n\n```console\n$ ip -h -s link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    RX: bytes  packets  errors  dropped overrun mcast   \n    3.8K       38       0       0       0       0       \n    TX: bytes  packets  errors  dropped carrier collsns \n    3.8K       38       0       0       0       0       \n```\n\n### **-br, --brief**\n\n簡潔な出力を表示します\n\n```console\n$ ip -br address show\nlo               UNKNOWN        127.0.0.1/8 ::1/128 \neth0             UP             192.168.1.100/24 fe80::a00:27ff:fe74:ddaa/64\n```\n\n### **-c, --color**\n\nカラー出力を使用します\n\n```console\n$ ip -c link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n```\n\n## 使用例\n\n### ネットワークインターフェースの表示\n\n```console\n$ ip link show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000\n    link/ether 08:00:27:74:dd:aa brd ff:ff:ff:ff:ff:ff\n```\n\n### IPアドレスの表示\n\n```console\n$ ip address show\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n    link/ether 08:00:27:74:dd:aa brd ff:ff:ff:ff:ff:ff\n    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic eth0\n       valid_lft 86389sec preferred_lft 86389sec\n    inet6 fe80::a00:27ff:fe74:ddaa/64 scope link \n       valid_lft forever preferred_lft forever\n```\n\n### インターフェースにIPアドレスを追加する\n\n```console\n$ sudo ip address add 192.168.1.200/24 dev eth0\n```\n\n### インターフェースを有効化または無効化する\n\n```console\n$ sudo ip link set eth0 up\n$ sudo ip link set eth0 down\n```\n\n### ルーティングテーブルの表示\n\n```console\n$ ip route show\ndefault via 192.168.1.1 dev eth0 proto dhcp metric 100 \n192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100 metric 100 \n```\n\n### 静的ルートの追加\n\n```console\n$ sudo ip route add 10.0.0.0/24 via 192.168.1.254\n```\n\n## ヒント:\n\n### 簡潔な出力で素早く概要を確認する\n\n`-br` オプションを使用すると、ネットワーク情報が簡潔な表形式で表示され、複数のインターフェースを素早く確認できます。\n\n```console\n$ ip -br link\nlo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> \neth0             UP             08:00:27:74:dd:aa <BROADCAST,MULTICAST,UP,LOWER_UP>\n```\n\n### IP設定の保存と復元\n\n現在のIP設定をファイルに保存し、後で復元することができます：\n\n```console\n$ ip addr save > ip-config.txt\n$ ip addr restore < ip-config.txt\n```\n\n### ネットワーク変更の監視\n\n`ip monitor` コマンドを使用して、ネットワークの変更をリアルタイムで監視できます：\n\n```console\n$ ip monitor\n```\n\n### ネットワーク分離のための名前空間の使用\n\nネットワーク名前空間を使用すると、分離されたネットワーク環境を作成できます：\n\n```console\n$ sudo ip netns add mynetwork\n$ sudo ip netns exec mynetwork ip link list\n```\n\n## よくある質問\n\n#### Q1. `ip` と `ifconfig` の違いは何ですか？\nA. `ip` はより新しく、強力で、`ifconfig` よりも多くの機能を提供します。一貫した構文でルーティングテーブル、ネットワークインターフェース、IPアドレスを管理できます。`ifconfig` は多くのLinuxディストリビューションで非推奨とされています。\n\n#### Q2. 自分のIPアドレスを確認するにはどうすればよいですか？\nA. `ip address show` または短縮形の `ip a` を使用して、すべてのIPアドレスを表示します。特定のインターフェースについては、`ip address show dev eth0` を使用します。\n\n#### Q3. 一時的なIPアドレスを追加するにはどうすればよいですか？\nA. `sudo ip address add 192.168.1.200/24 dev eth0` を使用して、eth0インターフェースにIPアドレスを追加します。このアドレスは、ネットワーク設定ファイルで設定されていない限り、再起動後に失われます。\n\n#### Q4. インターフェースからすべてのIPアドレスを削除するにはどうすればよいですか？\nA. `sudo ip address flush dev eth0` を使用して、eth0インターフェースからすべてのIPアドレスを削除します。\n\n#### Q5. ルーティングテーブルを表示するにはどうすればよいですか？\nA. `ip route show` または短縮形の `ip r` を使用して、ルーティングテーブルを表示します。\n\n## 参考文献\n\nhttps://man7.org/linux/man-pages/man8/ip.8.html\n\n## 改訂履歴\n\n- 2025/05/05 初版",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 2498,
    "output_tokens": 2890
  }
}