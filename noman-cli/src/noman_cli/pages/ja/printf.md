# printf コマンド

指定されたフォーマット文字列に従ってデータを整形し、出力します。

## 概要

`printf` コマンドは、フォーマット指定に従ってデータを整形し、標準出力に表示します。C言語のprintf関数と同様に動作し、テキストの配置、数値のフォーマット、文字列操作など、出力形式を細かく制御できます。

## オプション

### **-v 変数名**

出力を標準出力に表示する代わりに、指定したシェル変数に代入します。

```console
$ printf -v greeting "Hello, %s!" "World"
$ echo $greeting
Hello, World!
```

### **--help**

ヘルプメッセージを表示して終了します。

```console
$ printf --help
Usage: printf FORMAT [ARGUMENT]...
   or: printf OPTION
Print ARGUMENT(s) according to FORMAT, or execute according to OPTION:
...
```

### **--version**

バージョン情報を出力して終了します。

```console
$ printf --version
printf (GNU coreutils) 9.0
Copyright (C) 2021 Free Software Foundation, Inc.
...
```

## フォーマット指定子

### **%s** - 文字列

```console
$ printf "名前: %s\n" "太郎"
名前: 太郎
```

### **%d** または **%i** - 整数

```console
$ printf "数値: %d\n" 42
数値: 42
```

### **%f** - 浮動小数点数

```console
$ printf "価格: ¥%.2f\n" 1980.5
価格: ¥1980.50
```

### **%c** - 文字

```console
$ printf "最初の文字: %c\n" "A"
最初の文字: A
```

### **%x** または **%X** - 16進数

```console
$ printf "16進数: 0x%x\n" 255
16進数: 0xff
$ printf "16進数: 0x%X\n" 255
16進数: 0xFF
```

## 使用例

### 基本的なテキストフォーマット

```console
$ printf "こんにちは、%s！\n" "世界"
こんにちは、世界！
```

### 複数の引数

```console
$ printf "%sは%d歳です。\n" "佐藤" 30
佐藤は30歳です。
```

### 幅と配置

```console
$ printf "%-10s | %10s\n" "左揃え" "右揃え"
$ printf "%-10s | %10s\n" "テキスト" "テキスト"
左揃え      |     右揃え
テキスト    |   テキスト
```

### 数値フォーマット

```console
$ printf "整数: %d, 小数: %.2f, 16進数: %x\n" 42 3.14159 255
整数: 42, 小数: 3.14, 16進数: ff
```

### フォーマットの繰り返し

```console
$ printf "%s\n" ファイル1 ファイル2 ファイル3
ファイル1
ファイル2
ファイル3
```

## ヒント:

### エスケープシーケンス

`\n`（改行）、`\t`（タブ）、`\\`（バックスラッシュ）などのエスケープシーケンスを使用して出力を整形できます：

```console
$ printf "1行目\n2行目\tタブ付き\n"
1行目
2行目	タブ付き
```

### ゼロで数値を埋める

幅を指定したフォーマット指定子を使用して、数値をゼロで埋めることができます：

```console
$ printf "ID: %04d\n" 42
ID: 0042
```

### リテラルの % 文字を出力する

リテラルの % 文字を出力するには、%% を使用します：

```console
$ printf "割引: 25%%\n"
割引: 25%
```

### フォーマットの再利用

フォーマット文字列は追加の引数に対して再利用されます：

```console
$ printf "ユーザー: %s\n" 田中 佐藤 鈴木
ユーザー: 田中
ユーザー: 佐藤
ユーザー: 鈴木
```

## よくある質問

#### Q1. `printf` と `echo` の違いは何ですか？
A. `printf` はより精密なフォーマット制御を提供しますが、`echo` はよりシンプルで柔軟性が低いです。`printf` は自動的に改行を追加せず、明示的に `\n` を指定する必要があり、データ型のフォーマット指定子をサポートしています。

#### Q2. 小数点以下の桁数を固定するにはどうすればよいですか？
A. `%f` と精度修飾子を使用します：`printf "%.2f" 3.14159` は `3.14` を出力します。

#### Q3. `printf` で日付をフォーマットするにはどうすればよいですか？
A. `printf` で直接日付をフォーマットすることはできません。`date` コマンドを使用してフォーマットされた日付文字列を生成し、それを `printf` に渡します。

#### Q4. タブや改行などの特殊文字を出力するにはどうすればよいですか？
A. エスケープシーケンスを使用します：タブには `\t`、改行には `\n`、キャリッジリターンには `\r`、バックスラッシュには `\\` を使用します。

#### Q5. シェルスクリプトで `printf` を使用できますか？
A. はい、`printf` はフォーマットされた出力や `-v` オプションを使った変数代入のために、シェルスクリプトでよく使用されます。

## 参考資料

https://www.gnu.org/software/coreutils/manual/html_node/printf-invocation.html

## 改訂履歴

- 2025/05/04 初版作成