<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  dd - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">コマンド一覧</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>ddコマンド</h1>
<p>ブロックレベルの操作でファイルを変換・コピーします。</p>
<h2>概要</h2>
<p><code>dd</code>コマンドは、指定されたブロックサイズを使用してファイル間でデータをコピーし、コピー中に変換を実行します。ディスクイメージの作成、パーティションのバックアップ、ディスクの消去、I/Oパフォーマンスのベンチマークなどのタスクによく使用されます。ほとんどのUnixコマンドとは異なり、<code>dd</code>は従来のフラグではなく、<code>オプション=値</code>のペアを使用する独自の構文を持っています。</p>
<h2>オプション</h2>
<h3><strong>if=FILE</strong></h3>
<p>読み込む入力ファイルを指定します。指定しない場合は標準入力が使用されます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sda
</pre></div>
<h3><strong>of=FILE</strong></h3>
<p>書き込む出力ファイルを指定します。指定しない場合は標準出力が使用されます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sda<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sdb
</pre></div>
<h3><strong>bs=BYTES</strong></h3>
<p>入力と出力の両方のブロックサイズをBYTESに設定します。これはパフォーマンスに大きく影響します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/zero<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>testfile<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>1M<span style="color: #F8F8F8"> </span><span style="color: #000">count</span><span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #0000CF; font-weight: bold">100</span>
<span style="color: #000; font-style: italic">100+0 records in</span>
<span style="color: #000; font-style: italic">100+0 records out</span>
<span style="color: #000; font-style: italic">104857600 bytes (105 MB, 100 MiB) transferred in 0.083 seconds, 1.3 GB/s</span>
</pre></div>
<h3><strong>count=N</strong></h3>
<p>N個の入力ブロックのみをコピーします。コピーするデータ量を制限します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/urandom<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>random.dat<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>1M<span style="color: #F8F8F8"> </span><span style="color: #000">count</span><span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #0000CF; font-weight: bold">10</span>
<span style="color: #000; font-style: italic">10+0 records in</span>
<span style="color: #000; font-style: italic">10+0 records out</span>
<span style="color: #000; font-style: italic">10485760 bytes (10 MB, 10 MiB) transferred in 0.035 seconds, 299 MB/s</span>
</pre></div>
<h3><strong>status=LEVEL</strong></h3>
<p>dd実行中に表示される情報を制御します：</p>
<ul>
<li><code>none</code>：完了するまで出力なし</li>
<li><code>noxfer</code>：最終的な転送統計を抑制</li>
<li><code>progress</code>：定期的な転送統計を表示</li>
</ul>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/zero<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>testfile<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>1G<span style="color: #F8F8F8"> </span><span style="color: #000">count</span><span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #F8F8F8"> </span><span style="color: #000">status</span><span style="color: #CE5C00; font-weight: bold">=</span>progress
<span style="color: #000; font-style: italic">536870912 bytes (537 MB, 512 MiB) copied, 0.5 s, 1.1 GB/s</span>
<span style="color: #000; font-style: italic">1+0 records in</span>
<span style="color: #000; font-style: italic">1+0 records out</span>
<span style="color: #000; font-style: italic">1073741824 bytes (1.1 GB, 1.0 GiB) transferred in 0.969 seconds, 1.1 GB/s</span>
</pre></div>
<h3><strong>conv=CONVS</strong></h3>
<p>データに変換を実行します。複数の変換をカンマで区切って指定できます：</p>
<ul>
<li><code>sync</code>：入力ブロックをゼロでパディング</li>
<li><code>noerror</code>：読み取りエラー後も継続</li>
<li><code>notrunc</code>：出力ファイルを切り詰めない</li>
</ul>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sda<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>disk.img<span style="color: #F8F8F8"> </span><span style="color: #000">conv</span><span style="color: #CE5C00; font-weight: bold">=</span>sync,noerror
</pre></div>
<h2>使用例</h2>
<h3>ブート可能なUSBドライブの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>ubuntu.iso<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sdb<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>4M<span style="color: #F8F8F8"> </span><span style="color: #000">status</span><span style="color: #CE5C00; font-weight: bold">=</span>progress
<span style="color: #000; font-style: italic">1485881344 bytes (1.5 GB, 1.4 GiB) copied, 120 s, 12.4 MB/s</span>
<span style="color: #000; font-style: italic">354+1 records in</span>
<span style="color: #000; font-style: italic">354+1 records out</span>
<span style="color: #000; font-style: italic">1485881344 bytes (1.5 GB, 1.4 GiB) transferred in 120.023 seconds, 12.4 MB/s</span>
</pre></div>
<h3>ディスクイメージの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sda<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>disk_backup.img<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>8M<span style="color: #F8F8F8"> </span><span style="color: #000">status</span><span style="color: #CE5C00; font-weight: bold">=</span>progress
<span style="color: #000; font-style: italic">20971520000 bytes (21 GB, 20 GiB) copied, 300 s, 70 MB/s</span>
<span style="color: #000; font-style: italic">2500+0 records in</span>
<span style="color: #000; font-style: italic">2500+0 records out</span>
<span style="color: #000; font-style: italic">20971520000 bytes (21 GB, 20 GiB) transferred in 300.123 seconds, 69.9 MB/s</span>
</pre></div>
<h3>ディスクをゼロで消去</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>dd<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">if</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/zero<span style="color: #F8F8F8"> </span><span style="color: #000">of</span><span style="color: #CE5C00; font-weight: bold">=</span>/dev/sdb<span style="color: #F8F8F8"> </span><span style="color: #000">bs</span><span style="color: #CE5C00; font-weight: bold">=</span>8M<span style="color: #F8F8F8"> </span><span style="color: #000">status</span><span style="color: #CE5C00; font-weight: bold">=</span>progress
<span style="color: #000; font-style: italic">8589934592 bytes (8.6 GB, 8.0 GiB) copied, 120 s, 71.6 MB/s</span>
<span style="color: #000; font-style: italic">1024+0 records in</span>
<span style="color: #000; font-style: italic">1024+0 records out</span>
<span style="color: #000; font-style: italic">8589934592 bytes (8.6 GB, 8.0 GiB) transferred in 120.001 seconds, 71.6 MB/s</span>
</pre></div>
<h2>ヒント</h2>
<h3>適切なブロックサイズを使用する</h3>
<p><code>bs</code>パラメータはパフォーマンスに大きく影響します。ほとんどの操作では、1Mから8Mの値が良いパフォーマンスを提供します。デフォルトの512バイトのように小さすぎると非常に遅くなり、大きすぎるとメモリを無駄に消費する可能性があります。</p>
<h3>常にstatus=progressを使用する</h3>
<p><code>status=progress</code>を追加すると、長時間実行される操作のリアルタイムフィードバックが提供されます。これは大量のデータをコピーする際に不可欠です。</p>
<h3>進捗状況の更新にSIGUSR1シグナルを送信する</h3>
<p><code>status=progress</code>を使用し忘れた場合、USR1シグナルを送信して進捗状況の更新を取得できます：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span><span style="color: #204A87">kill</span><span style="color: #F8F8F8"> </span>-USR1<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">$(</span>pgrep<span style="color: #F8F8F8"> </span>dd<span style="color: #204A87; font-weight: bold">)</span>
</pre></div>
<h3>デバイス名には細心の注意を払う</h3>
<p>ddを実行する前にデバイス名（<code>/dev/sda</code>など）を二重確認してください。間違った出力デバイスを使用するとデータが破壊される可能性があります。<code>lsblk</code>コマンドは正しいデバイスを識別するのに役立ちます。</p>
<h2>よくある質問</h2>
<h4>Q1. なぜddは「ディスクデストロイヤー」と呼ばれるのですか？</h4>
<p>A. このニックネームは、確認なしにディスクを完全に上書きする能力に由来します。デバイス名の単純なタイプミスが壊滅的なデータ損失につながる可能性があります。</p>
<h4>Q2. ddをより速く実行するにはどうすればよいですか？</h4>
<p>A. より大きなブロックサイズ（bs=4Mまたはbs=8M）を使用し、I/Oのボトルネックに当たっていないことを確認し、特定の操作ではバッファキャッシュをバイパスするために<code>oflag=direct</code>の使用を検討してください。</p>
<h4>Q3. ddの進捗状況を監視するにはどうすればよいですか？</h4>
<p>A. <code>status=progress</code>オプションを使用するか、<code>kill -USR1 $(pgrep dd)</code>でddプロセスにUSR1シグナルを送信します。</p>
<h4>Q4. なぜddは他のUnixコマンドとは異なる構文を使用するのですか？</h4>
<p>A. ddの構文（オプション=値）はIBMのJCL（ジョブ制御言語）に由来し、Unixに実装された際に歴史的な理由で保存されました。</p>
<h2>参考文献</h2>
<p>https://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/05 初版</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>