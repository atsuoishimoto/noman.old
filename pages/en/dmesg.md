# dmesg command

Display or control the kernel ring buffer, which contains kernel messages and logs.

## Overview

The `dmesg` command displays kernel-related messages from the system's boot process and ongoing operations. It's useful for troubleshooting hardware issues, checking system startup messages, and monitoring kernel events. These messages are stored in the kernel ring buffer, a circular buffer that overwrites old messages when full.

## Options

### **-H, --human**

Display output in a human-readable format with colors and timestamps

```console
$ dmesg -H
[Apr 30 10:15:23] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #101-Ubuntu SMP Tue Apr 20 14:33:09 UTC 2023
[Apr 30 10:15:23] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1a2b3c4d-5e6f-7g8h-9i0j-1k2l3m4n5o6p ro quiet splash
[Apr 30 10:15:24] Memory: 16302756K/16677440K available (14339K kernel code, 2394K rwdata, 4760K rodata, 2756K init, 5068K bss, 374684K reserved, 0K cma-reserved)
```

### **-c, --clear**

Clear the kernel ring buffer after displaying its contents

```console
$ dmesg -c
[    0.000000] microcode: microcode updated early to revision 0x2f, date = 2019-02-17
[    0.000000] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017)
[    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1a2b3c4d-5e6f-7g8h-9i0j-1k2l3m4n5o6p ro quiet splash
```

### **-l, --level**

Filter messages by priority level (emerg, alert, crit, err, warn, notice, info, debug)

```console
$ dmesg --level=err
[    4.302053] EXT4-fs (sda1): re-mounted. Opts: errors=remount-ro
[   15.485922] usb 1-2: device descriptor read/64, error -71
```

### **-f, --facility**

Filter messages by facility (kern, user, mail, daemon, auth, syslog, etc.)

```console
$ dmesg -f kern
[    0.000000] Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017)
[    0.000000] KERNEL supported cpus:
[    0.000000] Intel GenuineIntel
```

### **-t, --notime**

Don't print timestamps

```console
$ dmesg -t
microcode: microcode updated early to revision 0x2f, date = 2019-02-17
Linux version 5.15.0-91-generic (buildd@lcy02-amd64-017)
Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-91-generic root=UUID=1a2b3c4d-5e6f-7g8h-9i0j-1k2l3m4n5o6p ro quiet splash
```

## Usage Examples

### Searching for specific hardware information

```console
$ dmesg | grep -i usb
[    2.332145] usb: USB bus registered
[    2.332146] usbcore: registered new interface driver usbfs
[    2.332147] usbcore: registered new interface driver hub
[    2.332148] usbcore: registered new device driver usb
[    3.452149] usb 1-1: new high-speed USB device number 2 using ehci-pci
```

### Checking for disk or filesystem errors

```console
$ dmesg | grep -i error
[    5.123456] EXT4-fs (sda1): re-mounted. Opts: errors=remount-ro
[   10.234567] ata3.00: error: { UNC }
[   15.345678] sd 2:0:0:0: [sdb] Sense Key : Medium Error [current]
```

### Monitoring recent kernel messages in real-time

```console
$ dmesg -w
[Apr 30 14:23:45] usb 1-2: new high-speed USB device number 4 using xhci_hcd
[Apr 30 14:23:46] usb 1-2: New USB device found, idVendor=0781, idProduct=5567, bcdDevice= 1.00
[Apr 30 14:23:46] usb 1-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[Apr 30 14:23:46] usb 1-2: Product: Cruzer Blade
```

## Tips:

### Use sudo for Full Access

On many systems, regular users may have limited access to kernel messages. Use `sudo dmesg` to see all messages, especially when troubleshooting hardware issues.

### Combine with grep for Targeted Troubleshooting

When troubleshooting specific hardware, pipe `dmesg` output to `grep` with relevant keywords like `dmesg | grep -i wifi` or `dmesg | grep -i error`.

### Watch for New Messages

Use `dmesg -w` to continuously watch for new kernel messages, similar to `tail -f`. This is useful when monitoring hardware that's being connected or troubleshooting intermittent issues.

### Check Boot Time Issues

After a system crash or unexpected reboot, use `dmesg` immediately to check for error messages that might explain what happened before the logs are cleared.

## Frequently Asked Questions

#### Q1. What is the kernel ring buffer?
A. The kernel ring buffer is a circular data structure that stores messages generated by the Linux kernel. It has a fixed size, and when it fills up, new messages overwrite the oldest ones.

#### Q2. How do I clear the kernel ring buffer?
A. Use `sudo dmesg -c` to display and then clear the buffer. To clear without displaying, use `sudo dmesg -C`.

#### Q3. Why do I see "permission denied" when running dmesg?
A. On many modern Linux distributions, access to kernel logs is restricted for security reasons. Use `sudo dmesg` to view the complete logs.

#### Q4. How can I see timestamps in a readable format?
A. Use `dmesg -T` for human-readable timestamps or `dmesg -H` for a fully human-readable output with colors and formatting.

## macOS Considerations

On macOS, `dmesg` functionality is more limited compared to Linux. For comprehensive system logs on macOS, consider using `log show` or viewing logs through Console.app instead. The macOS version of `dmesg` doesn't support many of the options available in Linux.

## References

https://man7.org/linux/man-pages/man1/dmesg.1.html

## Revisions

- 2025/04/30 First revision