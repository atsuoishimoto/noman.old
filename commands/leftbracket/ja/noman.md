# `[` コマンド概要

`[` コマンドは条件式を評価するためのシェルコマンドで、主にシェルスクリプト内で条件分岐に使用されます。`test` コマンドの別名としても知られています。

## オプション

### **ファイル関連のテスト**

ファイルの存在や種類、属性をチェックします。

```bash
$ [ -f /etc/passwd ] && echo "ファイルが存在します"
ファイルが存在します

$ [ -d /etc ] && echo "ディレクトリが存在します"
ディレクトリが存在します
```

### **文字列比較**

文字列の等価性や空文字列かどうかをテストします。

```bash
$ name="Taro"
$ [ "$name" = "Taro" ] && echo "名前は一致します"
名前は一致します

$ [ -z "$empty_var" ] && echo "変数は空です"
変数は空です
```

### **数値比較**

数値の大小関係をテストします。

```bash
$ age=25
$ [ $age -gt 20 ] && echo "20歳より上です"
20歳より上です
```

## 使用例

### 基本的な条件分岐

```bash
$ if [ -f /etc/hosts ]; then
>   echo "hostsファイルが存在します"
> else
>   echo "hostsファイルが見つかりません"
> fi
hostsファイルが存在します
```

### 複数条件の組み合わせ

```bash
$ file="/etc/passwd"
$ [ -f "$file" -a -r "$file" ] && echo "ファイルは存在し、読み取り可能です"
ファイルは存在し、読み取り可能です
```

### 変数のチェック

```bash
$ username="admin"
$ [ -n "$username" ] && echo "ユーザー名が設定されています"
ユーザー名が設定されています
```

## よくある質問

### Q1. `[` と `test` の違いは何ですか？
A. 機能的には同じです。`[` は `test` コマンドの別名で、構文的に読みやすくするために閉じ括弧 `]` を最後に付ける必要があります。

### Q2. `[[` と `[` の違いは何ですか？
A. `[[` はBashやZshなどの拡張シェル機能で、より高度なパターンマッチングや条件式が使えます。`[` は標準的なPOSIXシェルで使用できます。

### Q3. 条件式で最もよく使われるオプションは何ですか？
A. `-f`（ファイル存在確認）、`-d`（ディレクトリ確認）、`-z`（空文字列確認）、`=`（文字列比較）が最もよく使われます。

## 追加メモ

- 変数を使用する際は、常に二重引用符（`"`）で囲むことをお勧めします。これにより、変数が空の場合や空白を含む場合のエラーを防げます。
- 数値比較には `-eq`（等しい）、`-ne`（等しくない）、`-lt`（より小さい）、`-le`（以下）、`-gt`（より大きい）、`-ge`（以上）を使用します。
- 文字列比較には `=`（等しい）、`!=`（等しくない）、`-z`（空）、`-n`（非空）を使用します。
- 条件式の後には必ず閉じ括弧 `]` を付け、その前には空白が必要です。