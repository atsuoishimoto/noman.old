{
  "id": "msg_01NRL1gzUjdTsfAe5TdL6HnM",
  "content": [
    {
      "text": "# dmesg command\n\nDisplay or control the kernel ring buffer, showing system messages and hardware information.\n\n## Overview\n\nThe `dmesg` command examines or controls the kernel ring buffer, which contains messages from the kernel about hardware devices, driver initializations, and system events. It's particularly useful for troubleshooting hardware issues, checking boot messages, and monitoring system events.\n\n## Options\n\n### **-c, --clear**\n\nClear the ring buffer after printing its contents.\n\n```console\n$ sudo dmesg -c\n[    0.000000] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP\n[    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-76-generic root=UUID=1234abcd-1234-1234-1234-1234abcd5678 ro quiet splash\n[... more kernel messages ...]\n```\n\n### **-H, --human**\n\nEnable human-readable output with timestamps in a readable format.\n\n```console\n$ dmesg -H\n[May  5 09:15:32] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP\n[May  5 09:15:32] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-76-generic root=UUID=1234abcd-1234-1234-1234-1234abcd5678 ro quiet splash\n[... more kernel messages ...]\n```\n\n### **-l, --level**\n\nRestrict output to the specified priority levels (comma-separated list).\n\n```console\n$ dmesg --level=err,warn\n[    5.123456] CPU: 0 PID: 123 Comm: systemd-udevd Not tainted 5.15.0-76-generic #83-Ubuntu\n[    7.234567] usb 1-2: device descriptor read/64, error -110\n[... more error and warning messages ...]\n```\n\n### **-f, --facility**\n\nRestrict output to the specified facilities (comma-separated list).\n\n```console\n$ dmesg --facility=kern\n[    0.000000] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP\n[... more kernel messages ...]\n```\n\n### **-T, --ctime**\n\nDisplay human-readable timestamps (using ctime format).\n\n```console\n$ dmesg -T\n[Mon May  5 09:15:32 2025] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP\n[Mon May  5 09:15:32 2025] Command line: BOOT_IMAGE=/boot/vmlinuz-5.15.0-76-generic root=UUID=1234abcd-1234-1234-1234-1234abcd5678 ro quiet splash\n```\n\n### **-w, --follow**\n\nWait for new messages (similar to `tail -f`).\n\n```console\n$ dmesg -w\n[    0.000000] Linux version 5.15.0-76-generic\n[... existing messages ...]\n[  123.456789] usb 1-1: new high-speed USB device number 2 using xhci_hcd\n[... new messages appear as they occur ...]\n```\n\n## Usage Examples\n\n### Filtering for USB-related messages\n\n```console\n$ dmesg | grep -i usb\n[    2.123456] usb 1-1: new high-speed USB device number 2 using xhci_hcd\n[    2.234567] usb 1-1: New USB device found, idVendor=abcd, idProduct=1234, bcdDevice= 1.00\n[    2.345678] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=3\n```\n\n### Checking for disk or filesystem errors\n\n```console\n$ dmesg | grep -i 'error\\|fail\\|warn' | grep -i 'disk\\|sda\\|ext4\\|fs'\n[   15.123456] EXT4-fs (sda1): mounted filesystem with ordered data mode\n[  234.567890] Buffer I/O error on dev sda2, logical block 12345, async page read\n```\n\n### Monitoring kernel messages in real-time\n\n```console\n$ sudo dmesg -wH\n[May  5 09:20:15] Linux version 5.15.0-76-generic\n[... existing messages ...]\n[May  5 09:25:32] usb 1-1: new high-speed USB device number 2 using xhci_hcd\n[... new messages appear as they occur with human-readable timestamps ...]\n```\n\n## Tips\n\n### Use sudo for Full Access\n\nOn many systems, regular users may have limited access to kernel messages. Use `sudo dmesg` to see all messages, especially when troubleshooting hardware issues.\n\n### Combine with grep for Targeted Troubleshooting\n\nWhen troubleshooting specific hardware, pipe `dmesg` output to `grep` with relevant keywords like `dmesg | grep -i wifi` for wireless issues or `dmesg | grep -i sda` for disk problems.\n\n### Check Boot Messages After System Updates\n\nAfter kernel updates or system changes, review `dmesg` output to ensure all hardware is properly detected and no errors occurred during initialization.\n\n### Clear the Buffer for Fresh Monitoring\n\nUse `sudo dmesg -c` to clear the buffer after reviewing messages, then monitor for new issues without the clutter of old messages.\n\n## Frequently Asked Questions\n\n#### Q1. Why do I need sudo to run dmesg on some systems?\nA. On many modern Linux distributions, access to kernel messages is restricted for security reasons. Using `sudo` provides the necessary privileges to view all messages.\n\n#### Q2. How can I see timestamps in a readable format?\nA. Use `dmesg -T` for human-readable timestamps in ctime format, or `dmesg -H` for a more concise human-readable output with relative timestamps.\n\n#### Q3. How do I monitor dmesg output continuously?\nA. Use `dmesg -w` or `dmesg --follow` to watch for new messages in real-time, similar to `tail -f`.\n\n#### Q4. How can I save dmesg output to a file?\nA. Use redirection: `dmesg > dmesg_output.txt` or `dmesg | tee dmesg_output.txt` to both display and save the output.\n\n## References\n\nhttps://man7.org/linux/man-pages/man1/dmesg.1.html\n\n## Revisions\n\n- 2025/05/05 First revision",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1680,
    "output_tokens": 1810
  }
}