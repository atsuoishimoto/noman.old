# git add コマンド

ワーキングディレクトリの変更をステージングエリア（インデックス）に追加します。

## 概要

`git add` は、変更したファイルをGitのステージングエリア（インデックス）に追加するコマンドです。コミットする前に、どの変更をコミットに含めるかを指定するために使用します。ファイル全体、特定のファイル、またはファイル内の特定の変更を選択的に追加することができます。

## オプション

### **-A, --all**

ワーキングツリー内のすべての変更をステージングエリアに追加します。

```console
$ git add -A
# または
$ git add --all
```

### **-p, --patch**

ファイル内の変更を対話的に選択してステージングエリアに追加します。

```console
$ git add -p file.txt
# 各変更に対して、ステージングするかどうかを選択できる
```

### **-u, --update**

すでにGitで追跡されているファイルの変更のみをステージングエリアに追加します。

```console
$ git add -u
```

### **-f, --force**

通常は.gitignoreで無視されるファイルを強制的に追加します。

```console
$ git add -f ignored_file.log
```

## 使用例

### 特定のファイルを追加

```console
$ git add file.txt
# file.txtの変更がステージングエリアに追加される
```

### 複数のファイルを追加

```console
$ git add file1.txt file2.txt file3.txt
# 指定した複数のファイルがステージングエリアに追加される
```

### ディレクトリ内のすべてのファイルを追加

```console
$ git add src/
# srcディレクトリ内のすべての変更がステージングエリアに追加される
```

### 特定の拡張子を持つすべてのファイルを追加

```console
$ git add *.js
# すべての.jsファイルがステージングエリアに追加される
```

### 変更の一部だけを選択的に追加

```console
$ git add -p
# 各変更に対して、y（追加する）、n（追加しない）などを選択できる
```

## ヒント:

### ステージングエリアの状態を確認

`git add` の後に `git status` を実行すると、ステージングエリアに追加された変更と、まだ追加されていない変更を確認できます。

```console
$ git add file.txt
$ git status
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   file.txt
```

### 間違えてステージングした変更を元に戻す

ファイルを誤ってステージングエリアに追加した場合は、`git restore --staged` を使用して元に戻すことができます。

```console
$ git restore --staged file.txt
```

### 対話的な追加モードのショートカット

`git add -p` の対話モードでは、以下のコマンドが使用できます：
- `y`: この変更を追加
- `n`: この変更をスキップ
- `s`: 変更を分割して小さな単位で判断
- `q`: 終了（残りの変更はステージングしない）
- `?`: ヘルプを表示

## よくある質問

#### Q1. `git add` と `git commit` の違いは何ですか？
A. `git add` は変更をステージングエリアに追加するだけで、リポジトリには保存されません。`git commit` はステージングエリアの変更をリポジトリに永続的に保存します。

#### Q2. すべての変更を一度に追加するにはどうすればよいですか？
A. `git add -A` または `git add .`（カレントディレクトリから）を使用します。

#### Q3. 追加したファイルをステージングエリアから削除するにはどうすればよいですか？
A. `git restore --staged <ファイル名>` を使用します。

#### Q4. `.gitignore` で無視されているファイルを追加するにはどうすればよいですか？
A. `git add -f <ファイル名>` を使用して強制的に追加できます。

#### Q5. 変更の一部だけをコミットするにはどうすればよいですか？
A. `git add -p` を使用して、変更を対話的に選択してステージングエリアに追加できます。

## 参考

https://git-scm.com/docs/git-add

## 改訂

- 2025/04/30 初版作成