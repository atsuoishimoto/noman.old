<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  git-merge - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>git merge コマンド</h1>
<p>複数の開発履歴を統合します。</p>
<h2>概要</h2>
<p><code>git merge</code>は複数のコミット履歴を一つの統一された履歴に結合します。主に、あるブランチの変更を別のブランチに統合するために使用され、一般的には開発が完了した後にフィーチャーブランチをメインブランチにマージするときに使われます。このコマンドは指定されたブランチの変更を現在のブランチに取り込みます。</p>
<h2>オプション</h2>
<h3><strong>-m, --message=&lt;message&gt;</strong></h3>
<p>マージコミットに使用するコミットメッセージを設定します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>feature-branch<span style="color: #F8F8F8"> </span>-m<span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;ログイン機能の新しいフィーチャーブランチをマージ&quot;</span>
</pre></div>
<h3><strong>--no-ff</strong></h3>
<p>マージがfast-forwardで解決できる場合でも、マージコミットを作成します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>--no-ff<span style="color: #F8F8F8"> </span>feature-branch
<span style="color: #000; font-style: italic">Merge made by the &#39;recursive&#39; strategy.</span>
<span style="color: #000; font-style: italic"> login.js | 75 ++++++++++++++++++++++++++++++++++++++++</span>
<span style="color: #000; font-style: italic"> 1 file changed, 75 insertions(+)</span>
<span style="color: #000; font-style: italic"> create mode 100644 login.js</span>
</pre></div>
<h3><strong>--ff-only</strong></h3>
<p>現在のHEADが既に最新であるか、マージがfast-forwardとして解決できる場合を除いて、マージを拒否し、非ゼロのステータスで終了します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>--ff-only<span style="color: #F8F8F8"> </span>upstream/main
<span style="color: #000; font-style: italic">Updating 1234abc..5678def</span>
<span style="color: #000; font-style: italic">Fast-forward</span>
<span style="color: #000; font-style: italic"> README.md | 10 +++++-----</span>
<span style="color: #000; font-style: italic"> 1 file changed, 5 insertions(+), 5 deletions(-)</span>
</pre></div>
<h3><strong>--abort</strong></h3>
<p>現在の競合解決プロセスを中止し、マージ前の状態に戻そうとします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>feature-branch
<span style="color: #000; font-style: italic">Auto-merging index.html</span>
<span style="color: #000; font-style: italic">CONFLICT (content): Merge conflict in index.html</span>
<span style="color: #000; font-style: italic">Automatic merge failed; fix conflicts and then commit the result.</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>--abort
</pre></div>
<h3><strong>--squash</strong></h3>
<p>マージが行われたかのように作業ツリーとインデックス状態を生成しますが、実際にはコミットを作成せず、HEADも移動しません。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>--squash<span style="color: #F8F8F8"> </span>feature-branch
<span style="color: #000; font-style: italic">Updating 1234abc..5678def</span>
<span style="color: #000; font-style: italic">Fast-forward</span>
<span style="color: #000; font-style: italic">Squash commit -- not updating HEAD</span>
<span style="color: #000; font-style: italic"> login.js | 75 ++++++++++++++++++++++++++++++++++++++++</span>
<span style="color: #000; font-style: italic"> 1 file changed, 75 insertions(+)</span>
<span style="color: #000; font-style: italic"> create mode 100644 login.js</span>
</pre></div>
<h3><strong>-s, --strategy=&lt;strategy&gt;</strong></h3>
<p>指定されたマージ戦略を使用します。一般的な値はrecursive、resolve、octopus、ours、subtreeなどです。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>-s<span style="color: #F8F8F8"> </span>recursive<span style="color: #F8F8F8"> </span>feature-branch
</pre></div>
<h2>使用例</h2>
<h3>基本的なブランチのマージ</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>checkout<span style="color: #F8F8F8"> </span>main
<span style="color: #000; font-style: italic">Switched to branch &#39;main&#39;</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>feature-branch
<span style="color: #000; font-style: italic">Updating 1234abc..5678def</span>
<span style="color: #000; font-style: italic">Fast-forward</span>
<span style="color: #000; font-style: italic"> login.js | 75 ++++++++++++++++++++++++++++++++++++++++</span>
<span style="color: #000; font-style: italic"> 1 file changed, 75 insertions(+)</span>
<span style="color: #000; font-style: italic"> create mode 100644 login.js</span>
</pre></div>
<h3>複数のブランチをマージする</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>checkout<span style="color: #F8F8F8"> </span>main
<span style="color: #000; font-style: italic">Switched to branch &#39;main&#39;</span>

<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>feature1<span style="color: #F8F8F8"> </span>feature2<span style="color: #F8F8F8"> </span>feature3
<span style="color: #000; font-style: italic">Merge made by the &#39;octopus&#39; strategy.</span>
<span style="color: #000; font-style: italic"> feature1.js | 20 ++++++++++++++++++++</span>
<span style="color: #000; font-style: italic"> feature2.js | 15 +++++++++++++++</span>
<span style="color: #000; font-style: italic"> feature3.js | 30 ++++++++++++++++++++++++++++++</span>
<span style="color: #000; font-style: italic"> 3 files changed, 65 insertions(+)</span>
</pre></div>
<h3>マージ競合の解決</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>merge<span style="color: #F8F8F8"> </span>feature-branch
<span style="color: #000; font-style: italic">Auto-merging index.html</span>
<span style="color: #000; font-style: italic">CONFLICT (content): Merge conflict in index.html</span>
<span style="color: #000; font-style: italic">Automatic merge failed; fix conflicts and then commit the result.</span>

<span style="color: #8F5902"># </span>index.htmlの競合を手動で解決した後
<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>add<span style="color: #F8F8F8"> </span>index.html
<span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>commit
<span style="color: #000; font-style: italic">[main 1234abc] Merge branch &#39;feature-branch&#39;</span>
</pre></div>
<h2>ヒント:</h2>
<h3>フィーチャーブランチには<code>--no-ff</code>を使用する</h3>
<p>フィーチャーブランチをマージする際は、<code>--no-ff</code>を使用してブランチの履歴を保持し、コミット履歴にフィーチャーブランチがマージされたことを明確にすることを検討してください。</p>
<h3>マージ結果のプレビュー</h3>
<p>実際のマージを実行する前に、以下のコマンドを使用してマージされる変更をプレビューできます：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>git<span style="color: #F8F8F8"> </span>diff<span style="color: #F8F8F8"> </span>...branch-name
</pre></div>
<h3>Fast-Forwardマージを理解する</h3>
<p>Fast-forwardマージは、ターゲットブランチのコミットが現在のブランチの直接の子孫である場合に発生します。Gitはマージコミットを作成せずにポインタを前方に移動するだけです。マージコミットを強制したい場合は<code>--no-ff</code>を使用してください。</p>
<h3>履歴をクリーンにするためのSquashマージ</h3>
<p>フィーチャーブランチからの全ての変更を対象ブランチの単一のコミットにまとめたい場合は<code>--squash</code>を使用します。これによりコミット履歴がより整理され、読みやすくなります。</p>
<h2>よくある質問</h2>
<h4>Q1. マージとリベースの違いは何ですか？</h4>
<p>A. マージは両方のブランチからの変更を組み合わせた新しいコミットを作成し、ブランチの履歴を保持します。リベースはブランチのコミットをターゲットブランチの上に再生し、線形の履歴を作成しますが、コミット履歴を書き換えます。</p>
<h4>Q2. マージを元に戻すにはどうすればよいですか？</h4>
<p>A. マージをプッシュしていない場合は、<code>git reset --hard HEAD~1</code>を使用して最後のコミットを元に戻せます。既にプッシュしている場合は、<code>git revert -m 1 &lt;マージコミットのハッシュ&gt;</code>を使用してマージを元に戻す新しいコミットを作成することを検討してください。</p>
<h4>Q3. Gitマージでの「fast-forward」とは何ですか？</h4>
<p>A. Fast-forwardマージは、フィーチャーブランチが作成されてから基本ブランチに新しいコミットがない場合に発生します。Gitはマージコミットを作成せずに、基本ブランチのポインタをフィーチャーブランチのポインタまで前進させるだけです。</p>
<h4>Q4. マージ競合を解決するにはどうすればよいですか？</h4>
<p>A. Gitが競合を報告した場合、競合したファイルを編集して差異を解決し、<code>git add</code>を使用して解決済みとマークし、最後に<code>git commit</code>を実行してマージを完了します。</p>
<h2>参考資料</h2>
<p>https://git-scm.com/docs/git-merge</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/04 初版作成</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>