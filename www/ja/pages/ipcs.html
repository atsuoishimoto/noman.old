<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  ipcs - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>ipcs コマンド</h1>
<p>アクティブなIPCファシリティ（共有メモリ、メッセージキュー、セマフォ）に関する情報を表示します。</p>
<h2>概要</h2>
<p><code>ipcs</code>コマンドは、システム上で現在アクティブなプロセス間通信（IPC）リソースに関する情報を表示します。プロセスが相互に通信するために使用する共有メモリセグメント、メッセージキュー、セマフォ配列の詳細を表示します。このコマンドは、システム管理者やIPC関連の問題をデバッグする開発者にとって特に役立ちます。</p>
<h2>オプション</h2>
<h3><strong>-a, --all</strong></h3>
<p>すべてのIPCファシリティに関する情報を表示します（デフォルトの動作）</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-a
<span style="color: #000; font-style: italic">------ Message Queues --------</span>
<span style="color: #000; font-style: italic">key        msqid      owner      perms      used-bytes   messages    </span>

<span style="color: #000; font-style: italic">------ Shared Memory Segments --------</span>
<span style="color: #000; font-style: italic">key        shmid      owner      perms      bytes      nattch     status      </span>
<span style="color: #000; font-style: italic">0x00000000 0          root       644        80         2                       </span>
<span style="color: #000; font-style: italic">0x00000000 32769      root       644        16384      2                       </span>

<span style="color: #000; font-style: italic">------ Semaphore Arrays --------</span>
<span style="color: #000; font-style: italic">key        semid      owner      perms      nsems</span>
</pre></div>
<h3><strong>-q, --queues</strong></h3>
<p>アクティブなメッセージキューに関する情報を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-q
<span style="color: #000; font-style: italic">------ Message Queues --------</span>
<span style="color: #000; font-style: italic">key        msqid      owner      perms      used-bytes   messages</span>
</pre></div>
<h3><strong>-m, --shmems</strong></h3>
<p>アクティブな共有メモリセグメントに関する情報を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-m
<span style="color: #000; font-style: italic">------ Shared Memory Segments --------</span>
<span style="color: #000; font-style: italic">key        shmid      owner      perms      bytes      nattch     status      </span>
<span style="color: #000; font-style: italic">0x00000000 0          root       644        80         2                       </span>
<span style="color: #000; font-style: italic">0x00000000 32769      root       644        16384      2</span>
</pre></div>
<h3><strong>-s, --semaphores</strong></h3>
<p>アクティブなセマフォ配列に関する情報を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-s
<span style="color: #000; font-style: italic">------ Semaphore Arrays --------</span>
<span style="color: #000; font-style: italic">key        semid      owner      perms      nsems</span>
</pre></div>
<h3><strong>-t, --time</strong></h3>
<p>IPCファシリティの最終操作時間を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-t<span style="color: #F8F8F8"> </span>-m
<span style="color: #000; font-style: italic">------ Shared Memory Operation/Change Times --------</span>
<span style="color: #000; font-style: italic">shmid      last-op                    last-changed              </span>
<span style="color: #000; font-style: italic">0          Thu Jan  1 00:00:00 1970   Thu Jan  1 00:00:00 1970  </span>
<span style="color: #000; font-style: italic">32769      Thu Jan  1 00:00:00 1970   Thu Jan  1 00:00:00 1970</span>
</pre></div>
<h3><strong>-p, --pid</strong></h3>
<p>作成者と最後の操作者のPIDを表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span>-m
<span style="color: #000; font-style: italic">------ Shared Memory Creator/Last-op PIDs --------</span>
<span style="color: #000; font-style: italic">shmid      owner      cpid       lpid      </span>
<span style="color: #000; font-style: italic">0          root       0          0         </span>
<span style="color: #000; font-style: italic">32769      root       0          0</span>
</pre></div>
<h3><strong>-c, --creator</strong></h3>
<p>作成者と所有者を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-c<span style="color: #F8F8F8"> </span>-m
<span style="color: #000; font-style: italic">------ Shared Memory Segment Creators/Owners --------</span>
<span style="color: #000; font-style: italic">shmid      perms      cpid       lpid      uid       gid      </span>
<span style="color: #000; font-style: italic">0          644        0          0         0         0        </span>
<span style="color: #000; font-style: italic">32769      644        0          0         0         0</span>
</pre></div>
<h3><strong>-l, --limits</strong></h3>
<p>システムリソースの制限を表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-l
<span style="color: #000; font-style: italic">------ Messages Limits --------</span>
<span style="color: #000; font-style: italic">max queues system wide = 32000</span>
<span style="color: #000; font-style: italic">max size of message (bytes) = 8192</span>
<span style="color: #000; font-style: italic">default max size of queue (bytes) = 16384</span>

<span style="color: #000; font-style: italic">------ Shared Memory Limits --------</span>
<span style="color: #000; font-style: italic">max number of segments = 4096</span>
<span style="color: #000; font-style: italic">max seg size (kbytes) = 18014398509465599</span>
<span style="color: #000; font-style: italic">max total shared memory (kbytes) = 18014398509481980</span>
<span style="color: #000; font-style: italic">min seg size (bytes) = 1</span>

<span style="color: #000; font-style: italic">------ Semaphore Limits --------</span>
<span style="color: #000; font-style: italic">max number of arrays = 32000</span>
<span style="color: #000; font-style: italic">max semaphores per array = 32000</span>
<span style="color: #000; font-style: italic">max semaphores system wide = 1024000000</span>
<span style="color: #000; font-style: italic">max ops per semop call = 500</span>
<span style="color: #000; font-style: italic">semaphore max value = 32767</span>
</pre></div>
<h2>使用例</h2>
<h3>詳細情報を含むすべてのIPCリソースの表示</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-a
<span style="color: #000; font-style: italic">------ Message Queues --------</span>
<span style="color: #000; font-style: italic">key        msqid      owner      perms      used-bytes   messages    </span>

<span style="color: #000; font-style: italic">------ Shared Memory Segments --------</span>
<span style="color: #000; font-style: italic">key        shmid      owner      perms      bytes      nattch     status      </span>
<span style="color: #000; font-style: italic">0x00000000 0          root       644        80         2                       </span>
<span style="color: #000; font-style: italic">0x00000000 32769      root       644        16384      2                       </span>

<span style="color: #000; font-style: italic">------ Semaphore Arrays --------</span>
<span style="color: #000; font-style: italic">key        semid      owner      perms      nsems</span>
</pre></div>
<h3>タイムスタンプ付きの共有メモリセグメントの確認</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-mt
<span style="color: #000; font-style: italic">------ Shared Memory Segments --------</span>
<span style="color: #000; font-style: italic">key        shmid      owner      perms      bytes      nattch     status      </span>
<span style="color: #000; font-style: italic">0x00000000 0          root       644        80         2                       </span>
<span style="color: #000; font-style: italic">0x00000000 32769      root       644        16384      2                       </span>

<span style="color: #000; font-style: italic">------ Shared Memory Operation/Change Times --------</span>
<span style="color: #000; font-style: italic">shmid      last-op                    last-changed              </span>
<span style="color: #000; font-style: italic">0          Thu Jan  1 00:00:00 1970   Thu Jan  1 00:00:00 1970  </span>
<span style="color: #000; font-style: italic">32769      Thu Jan  1 00:00:00 1970   Thu Jan  1 00:00:00 1970</span>
</pre></div>
<h3>システム全体のIPC制限の表示</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ipcs<span style="color: #F8F8F8"> </span>-l
<span style="color: #000; font-style: italic">------ Messages Limits --------</span>
<span style="color: #000; font-style: italic">max queues system wide = 32000</span>
<span style="color: #000; font-style: italic">max size of message (bytes) = 8192</span>
<span style="color: #000; font-style: italic">default max size of queue (bytes) = 16384</span>

<span style="color: #000; font-style: italic">------ Shared Memory Limits --------</span>
<span style="color: #000; font-style: italic">max number of segments = 4096</span>
<span style="color: #000; font-style: italic">max seg size (kbytes) = 18014398509465599</span>
<span style="color: #000; font-style: italic">max total shared memory (kbytes) = 18014398509481980</span>
<span style="color: #000; font-style: italic">min seg size (bytes) = 1</span>

<span style="color: #000; font-style: italic">------ Semaphore Limits --------</span>
<span style="color: #000; font-style: italic">max number of arrays = 32000</span>
<span style="color: #000; font-style: italic">max semaphores per array = 32000</span>
<span style="color: #000; font-style: italic">max semaphores system wide = 1024000000</span>
<span style="color: #000; font-style: italic">max ops per semop call = 500</span>
<span style="color: #000; font-style: italic">semaphore max value = 32767</span>
</pre></div>
<h2>ヒント:</h2>
<h3>IPCリソースの理解</h3>
<p>IPCリソース（共有メモリ、メッセージキュー、セマフォ）は、作成プロセスが終了した後も存続します。システムリソースを消費している可能性のある未使用のIPCリソースを削除するには、<code>ipcrm</code>を使用してください。</p>
<h3>リソースリークの特定</h3>
<p>特定のユーザーやプロセスが所有する大量のIPCリソースが表示される場合、アプリケーションでリソースリークが発生している可能性があります。<code>ipcs</code>による定期的な監視で、このような問題を特定できます。</p>
<h3>パーミッション列</h3>
<p>「perms」列は、ファイルパーミッションと同様に、IPCリソースの8進数パーミッションを示します。例えば、「644」は、所有者が読み書き可能で、グループとその他のユーザーは読み取りのみ可能であることを意味します。</p>
<h3>キー値</h3>
<p>「key」列は、リソースを識別するために使用されるIPCキーを示します。「0x00000000」のキーは、多くの場合、IPC_PRIVATEで作成されたプライベートIPCリソースを示します。</p>
<h2>よくある質問</h2>
<h4>Q1. 共有メモリ出力の「nattch」列は何を意味しますか？</h4>
<p>A. 「nattch」は、現在共有メモリセグメントにアタッチしているプロセスの数を示します。値が0の場合、そのセグメントを使用しているプロセスがないことを意味し、クリーンアップの候補となる可能性があります。</p>
<h4>Q2. ipcsで表示されるIPCリソースを削除するにはどうすればよいですか？</h4>
<p>A. 適切なオプションとIDを指定して<code>ipcrm</code>コマンドを使用します。例えば、<code>ipcrm -m 12345</code>はID 12345の共有メモリセグメントを削除します。</p>
<h4>Q3. ipcsが何も出力しない場合、何を意味しますか？</h4>
<p>A. システム内に要求されたタイプのアクティブなIPCリソースがないことを意味します。これは、IPCメカニズムを多用しないシステムでは正常です。</p>
<h4>Q4. 特定のIPCリソースを誰が使用しているかを確認するにはどうすればよいですか？</h4>
<p>A. <code>ipcs -p</code>を使用して、IPCリソースの作成者と最後の操作者のPIDを確認できます。</p>
<h2>参考文献</h2>
<p>https://man7.org/linux/man-pages/man1/ipcs.1.html</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/04 初回改訂</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>