# od コマンド

ファイルやデータをさまざまな形式（8進数、16進数など）でダンプ表示します。

## 概要

`od`（octal dump）コマンドは、ファイルやデータの内容を8進数、16進数、ASCII文字など様々な形式で表示するためのユーティリティです。バイナリファイルの内容を確認したり、テキストファイルに含まれる非表示文字を検出したりする際に便利です。

## オプション

### **-t TYPE**

出力形式を指定します。主な形式は以下の通りです：
- `a` - 名前付き文字
- `c` - ASCII文字と8進数のエスケープシーケンス
- `d` - 符号付き10進数
- `o` - 8進数
- `x` - 16進数
- `f` - 浮動小数点数

```console
$ echo "Hello" | od -t c
0000000   H   e   l   l   o  \n
0000006
```

### **-A FORMAT**

アドレス表示の基数を指定します：
- `d` - 10進数（デフォルト）
- `o` - 8進数
- `x` - 16進数
- `n` - アドレスを表示しない

```console
$ echo "Hello" | od -A x -t c
000000   H   e   l   l   o  \n
000006
```

### **-N BYTES**

指定したバイト数だけ読み込みます。

```console
$ echo "Hello, World" | od -N 5 -t c
0000000   H   e   l   l   o
0000005
```

### **-j BYTES**

指定したバイト数をスキップして表示します。

```console
$ echo "Hello, World" | od -j 7 -t c
0000007   W   o   r   l   d  \n
0000015
```

## 使用例

### バイナリファイルの16進数表示

```console
$ od -t x1 /bin/ls | head -5
0000000 cf fa ed fe 07 00 00 01 03 00 00 00 02 00 00 00
0000020 19 00 00 00 48 01 00 00 85 00 20 00 00 00 00 00
0000040 19 00 00 00 38 00 00 00 5f 5f 50 41 47 45 5a 45
0000060 52 4f 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0000100 00 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00
```

### テキストファイルの非表示文字を確認

```console
$ echo -e "Hello\tWorld\nNew Line" | od -c
0000000   H   e   l   l   o  \t   W   o   r   l   d  \n   N   e   w    
0000020   L   i   n   e  \n                                            
0000025
```

### 複数の形式で同時に表示

```console
$ echo "ABC123" | od -t x1z -t c
0000000  41  42  43  31  32  33  0a                              >ABC123.<
         A   B   C   1   2   3  \n
0000007
```

## ヒント:

### 複数の形式を同時に表示する

`-t` オプションを複数回使用することで、同じデータを複数の形式で同時に表示できます。これはバイナリデータを解析する際に特に便利です。

```console
$ echo "Hello" | od -t x1 -t c
0000000  48  65  6c  6c  6f  0a
         H   e   l   l   o  \n
0000006
```

### 非表示文字の検出

テキストファイルに含まれる制御文字やヌル文字などの非表示文字を検出するには、`-c` オプションを使用します。これはファイルの問題をデバッグする際に役立ちます。

### バイト単位での表示

大きなファイルの特定部分だけを調べたい場合は、`-j`（スキップ）と`-N`（バイト数）オプションを組み合わせて使用すると効率的です。

## よくある質問

#### Q1. `od`と`hexdump`の違いは何ですか？
A. どちらもバイナリデータを表示するコマンドですが、`od`はより古いコマンドで、`hexdump`はより柔軟なフォーマットオプションを提供します。多くの場合、`hexdump -C`は`od -t x1c`と同様の出力を生成します。

#### Q2. 大きなファイルの一部だけを表示するにはどうすればよいですか？
A. `-j`オプションでスキップするバイト数を指定し、`-N`オプションで表示するバイト数を指定します。例：`od -j 1000 -N 100 -t x1 file.bin`

#### Q3. ファイルの先頭だけを確認するにはどうすればよいですか？
A. `od`コマンドを`head`コマンドと組み合わせるか、`-N`オプションを使用します。例：`od -N 100 -t x1 file.bin`

#### Q4. 特定のバイトパターンを検索するにはどうすればよいですか？
A. `od`自体には検索機能はありませんが、出力を`grep`にパイプすることで特定のパターンを検索できます。

## macOSでの注意点

macOSの`od`コマンドはGNU版と若干の違いがあります。特に、一部のフォーマット指定子の動作が異なる場合があります。また、macOSでは`hexdump`コマンドがより多く使用される傾向があります。

## 参考文献

https://www.gnu.org/software/coreutils/manual/html_node/od-invocation.html

## 改訂履歴

- 2025/04/30 初版作成