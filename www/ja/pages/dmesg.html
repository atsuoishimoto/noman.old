<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  dmesg - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>dmesg コマンド</h1>
<p>カーネルメッセージバッファを表示または制御します。</p>
<h2>概要</h2>
<p><code>dmesg</code>コマンドは、システムリングバッファからカーネルメッセージを表示します。このバッファにはハードウェア、デバイスドライバ、システム初期化に関する情報が含まれています。ハードウェアの問題のトラブルシューティング、起動メッセージの確認、カーネルイベントの監視に特に役立ちます。</p>
<h2>オプション</h2>
<h3><strong>-c, --clear</strong></h3>
<p>内容を表示した後にリングバッファをクリアします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>dmesg<span style="color: #F8F8F8"> </span>-c
<span style="color: #000; font-style: italic">[    0.000000] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP</span>
<span style="color: #000; font-style: italic">[...]</span>
</pre></div>
<h3><strong>-H, --human</strong></h3>
<p>色付き、相対的なタイムスタンプ、適切な改行を含む人間が読みやすい出力を有効にします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-H
<span style="color: #000; font-style: italic">[May 4 09:15] Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP</span>
<span style="color: #000; font-style: italic">[...]</span>
</pre></div>
<h3><strong>-l, --level</strong></h3>
<p>指定された優先度レベル（カンマ区切りリスト）に出力を制限します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>err,warn
<span style="color: #000; font-style: italic">[    5.123456] ACPI BIOS Error (bug): Could not resolve symbol [\_SB.PCI0.GFX0.DD1F], AE_NOT_FOUND</span>
<span style="color: #000; font-style: italic">[    7.654321] WARNING: CPU: 2 PID: 123 at drivers/gpu/drm/i915/intel_runtime_pm.c:655</span>
</pre></div>
<h3><strong>-f, --facility</strong></h3>
<p>指定されたファシリティ（カンマ区切りリスト）に出力を制限します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-f<span style="color: #F8F8F8"> </span>kern,daemon
<span style="color: #000; font-style: italic">[    0.123456] kernel: Memory: 16123456K/16777216K available</span>
<span style="color: #000; font-style: italic">[    1.234567] systemd[1]: Detected virtualization kvm.</span>
</pre></div>
<h3><strong>-t, --notime</strong></h3>
<p>タイムスタンプを表示しません。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-t
<span style="color: #000; font-style: italic">Linux version 5.15.0-76-generic (buildd@lcy02-amd64-017) (gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #83-Ubuntu SMP</span>
<span style="color: #000; font-style: italic">[...]</span>
</pre></div>
<h3><strong>-w, --follow</strong></h3>
<p>新しいメッセージを待機します（<code>tail -f</code>と同様）。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>-w
<span style="color: #000; font-style: italic">[    0.000000] Linux version 5.15.0-76-generic</span>
<span style="color: #000; font-style: italic">[...]</span>
<span style="color: #000; font-style: italic">[  123.456789] usb 1-2: new high-speed USB device number 3 using xhci_hcd</span>
</pre></div>
<h2>使用例</h2>
<h3>USBに関連するメッセージのフィルタリング</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span><span style="color: #000; font-weight: bold">|</span><span style="color: #F8F8F8"> </span>grep<span style="color: #F8F8F8"> </span>-i<span style="color: #F8F8F8"> </span>usb
<span style="color: #000; font-style: italic">[    2.123456] usb 1-1: new high-speed USB device number 2 using xhci_hcd</span>
<span style="color: #000; font-style: italic">[    2.234567] usb 1-1: New USB device found, idVendor=8087, idProduct=0024, bcdDevice= 0.01</span>
<span style="color: #000; font-style: italic">[    2.345678] usb 1-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0</span>
</pre></div>
<h3>ハードウェアエラーの確認</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>dmesg<span style="color: #F8F8F8"> </span>--level<span style="color: #CE5C00; font-weight: bold">=</span>err
<span style="color: #000; font-style: italic">[    5.123456] ACPI BIOS Error (bug): Could not resolve symbol [\_SB.PCI0.GFX0.DD1F], AE_NOT_FOUND</span>
<span style="color: #000; font-style: italic">[   10.234567] EXT4-fs error (device sda1): ext4_lookup:1809: inode #2: comm systemd-journal: deleted inode referenced: 12345</span>
</pre></div>
<h3>リアルタイムでのカーネルメッセージの監視</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>dmesg<span style="color: #F8F8F8"> </span>--follow<span style="color: #F8F8F8"> </span>--human
<span style="color: #000; font-style: italic">[May 4 09:20] Linux version 5.15.0-76-generic</span>
<span style="color: #000; font-style: italic">[...]</span>
<span style="color: #000; font-style: italic">[+0.005678] Booting paravirtualized kernel on bare hardware</span>
<span style="color: #000; font-style: italic">[+1.234567] usb 1-2: new high-speed USB device number 3 using xhci_hcd</span>
</pre></div>
<h2>ヒント:</h2>
<h3>読みやすさを向上させるために人間が読みやすい形式を使用する</h3>
<p><code>-H</code>または<code>--human</code>オプションを使用すると、相対的なタイムスタンプ、色付き、適切なフォーマットで出力が読みやすくなります。</p>
<h3>対象を絞ったトラブルシューティングのためにgrepと組み合わせる</h3>
<p>特定のハードウェアのトラブルシューティングを行う場合は、<code>dmesg</code>の出力を「usb」、「wifi」、「error」などの関連キーワードで<code>grep</code>にパイプすると効果的です。</p>
<h3>読み取り後にバッファをクリアする</h3>
<p><code>sudo dmesg -c</code>を使用して、読み取り後にバッファをクリアします。これは、特定のアクションの後に表示される新しいメッセージのみを監視したい場合に役立ちます。</p>
<h3>後で分析するために起動メッセージを保存する</h3>
<p>起動後、<code>dmesg &gt; boot_log.txt</code>でカーネルメッセージを保存しておくと、後で分析や比較ができます。</p>
<h2>よくある質問</h2>
<h4>Q1. 「dmesg: read kernel buffer failed: Operation not permitted」というエラーが出るのはなぜですか？</h4>
<p>A. 多くのシステムでは、カーネルバッファにアクセスするには root 権限が必要です。代わりに <code>sudo dmesg</code> を使用してください。</p>
<h4>Q2. 最近のメッセージだけを見るにはどうすればいいですか？</h4>
<p>A. <code>dmesg | tail</code> を使用して最新のメッセージを表示するか、<code>dmesg -T</code> を使用して人間が読みやすいタイムスタンプを表示し、時間でフィルタリングします。</p>
<h4>Q3. dmesg 出力のタイムスタンプをどう解釈すればいいですか？</h4>
<p>A. デフォルトでは、タイムスタンプは起動からの秒数を示します。人間が読みやすいタイムスタンプには <code>-T</code> または <code>--ctime</code> を、相対的なタイムスタンプには <code>-H</code> を使用してください。</p>
<h4>Q4. tail -f のように dmesg を継続的に監視できますか？</h4>
<p>A. はい、<code>dmesg -w</code> または <code>dmesg --follow</code> を使用して、新しいカーネルメッセージを継続的に監視できます。</p>
<h2>macOSに関する注意点</h2>
<p>macOSでは、<code>dmesg</code>コマンドのオプションはLinuxよりも少なくなっています。<code>--human</code>や<code>--follow</code>などのオプションはサポートされていません。macOSでより詳細なシステムログを取得するには、代わりに<code>log</code>コマンドの使用を検討してください。例えば、<code>log show --predicate 'eventMessage contains &quot;kernel&quot;'</code>などです。</p>
<h2>参考資料</h2>
<p>https://man7.org/linux/man-pages/man1/dmesg.1.html</p>
<h2>改訂履歴</h2>
<p>2025/05/04 初版作成</p>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>