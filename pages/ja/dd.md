# ddコマンド概要

`dd`コマンドは、ファイルの変換とコピーを行うための低レベルなユーティリティです。主にディスクイメージの作成、バックアップ、データ復旧などに使用されます。

## 主なオプション

- **if=ファイル**: 入力ファイルを指定します（input file）
  - 例: `dd if=/dev/sda`（ディスクからの読み取り）

- **of=ファイル**: 出力ファイルを指定します（output file）
  - 例: `dd of=backup.img`（イメージファイルへの書き込み）

- **bs=バイト数**: 一度に読み書きするブロックサイズを指定します（block size）
  - 例: `dd bs=4M`（4メガバイトのブロックサイズを使用）

- **count=数**: コピーするブロック数を指定します
  - 例: `dd count=10`（10ブロックだけコピー）

- **status=progress**: 処理の進行状況を表示します
  - 例: `dd status=progress`（コピー中の進捗を表示）

- **conv=オプション**: 変換オプションを指定します
  - 例: `dd conv=sync,noerror`（エラーを無視して同期モードでコピー）

## 使用例

### USBドライブにISOイメージを書き込む
```bash
# LinuxディストリビューションのイメージをUSBドライブに書き込む
sudo dd if=ubuntu.iso of=/dev/sdb bs=4M status=progress

# 出力例
1790MB 0:00:42 [42.1MB/s] [======================>       ] 45% ETA 0:00:51
```

### ディスクのバックアップを作成する
```bash
# ディスク全体のバックアップを作成
sudo dd if=/dev/sda of=/path/to/disk.img bs=8M status=progress

# 出力例
34359738368 bytes (34 GB, 32 GiB) copied, 1200 s, 28.6 MB/s
```

### ファイルの一部を抽出する
```bash
# ファイルの先頭1MBだけを抽出
dd if=largefile.dat of=header.dat bs=1M count=1

# 出力例
1+0 records in
1+0 records out
1048576 bytes (1.0 MB, 1.0 MiB) copied, 0.00253 s, 414 MB/s
```

## 追加情報

- `dd`コマンドは「ディスクデストロイヤー」とも呼ばれるほど強力なため、特に`of`パラメータの指定には細心の注意が必要です。間違ったデバイスを指定すると、データが完全に失われる可能性があります。
- 大きなファイルをコピーする場合は、`bs`パラメータを大きくすると（例：4M、8M）パフォーマンスが向上することがあります。
- `status=progress`オプションは新しいバージョンの`dd`でのみ使用可能です。古いバージョンでは、別のターミナルで`kill -USR1 $(pidof dd)`を実行することで進捗を確認できます。
- データ復旧の場合は、`conv=sync,noerror`オプションを使用すると、読み取りエラーがあっても処理を続行できます。