# free コマンド

システムのメモリ使用状況を表示します。

## 概要

`free` コマンドはシステムの物理メモリ（RAM）とスワップメモリの使用状況を表示します。利用可能なメモリ、使用中のメモリ、バッファやキャッシュとして使われているメモリなどの情報を確認できます。システムのメモリリソースを監視する際に役立ちます。

## オプション

### **-h (human-readable)**

メモリサイズを読みやすい単位（KB、MB、GB）で表示します。

```console
$ free -h
              total        used        free      shared  buff/cache   available
Mem:          7.7Gi       3.2Gi       1.2Gi       264Mi       3.3Gi       3.9Gi
Swap:         2.0Gi       156Mi       1.8Gi
```

### **-b, -k, -m, -g**

メモリサイズをバイト(-b)、キロバイト(-k)、メガバイト(-m)、ギガバイト(-g)単位で表示します。

```console
$ free -m
              total        used        free      shared  buff/cache   available
Mem:           7861        3312        1226         264        3322        4028
Swap:          2048         156        1892
```

### **-t (total)**

RAM とスワップメモリの合計行を追加表示します。

```console
$ free -ht
              total        used        free      shared  buff/cache   available
Mem:          7.7Gi       3.2Gi       1.2Gi       264Mi       3.3Gi       3.9Gi
Swap:         2.0Gi       156Mi       1.8Gi
Total:        9.7Gi       3.3Gi       3.0Gi
```

### **-s N (seconds)**

N秒ごとに継続的にメモリ情報を表示します。Ctrl+Cで終了できます。

```console
$ free -h -s 2
# 2秒ごとにメモリ情報が更新表示される
```

## 使用例

### 基本的なメモリ情報の表示

```console
$ free
              total        used        free      shared  buff/cache   available
Mem:        8030208     3391488     1255424      270336     3383296     4123648
Swap:       2097152      159744     1937408
```

### 継続的なメモリ監視（5秒間隔）

```console
$ free -h -s 5
# 5秒ごとにメモリ情報が更新表示される
# Ctrl+Cで終了
```

### カウント指定での繰り返し表示

```console
$ free -h -c 3
# メモリ情報を3回表示して終了
```

## ヒント:

### バッファとキャッシュについて理解する

`buff/cache` 列はLinuxがファイルシステムのパフォーマンス向上のために使用しているメモリです。このメモリは必要に応じて解放されるため、実質的に利用可能なメモリは `available` 列で確認するのが適切です。

### 実質的な空きメモリを確認する

`free` 列だけでなく `available` 列も確認しましょう。`available` はバッファやキャッシュも含めて、アプリケーションが利用可能なメモリ量を示しています。

### スワップの使用状況を監視する

スワップメモリの過度な使用はシステムパフォーマンスの低下を示す可能性があります。`free` でスワップの使用率が高い場合は、物理メモリの増設を検討するか、メモリを多く消費するプロセスを特定して対処しましょう。

## よくある質問

#### Q1. `free` と `top` コマンドのメモリ表示の違いは何ですか？
A. `free` はメモリ情報のみをシンプルに表示しますが、`top` はメモリ情報に加えてCPU使用率やプロセス情報なども表示します。`free` はメモリ状況の素早い確認に適しています。

#### Q2. バッファとキャッシュの違いは何ですか？
A. バッファはディスクブロックの一時的なストレージとして使用され、キャッシュはファイルの内容を保持するために使用されます。どちらも必要に応じて解放可能なメモリです。

#### Q3. 「available」メモリとは何ですか？
A. 新しいアプリケーションが起動できる実質的に利用可能なメモリ量を示します。これには「free」メモリに加えて、必要に応じて解放できるバッファやキャッシュも含まれます。

#### Q4. スワップメモリとは何ですか？
A. 物理メモリ（RAM）が不足した場合に使用されるディスク上の領域です。RAMより遅いため、過度な使用はシステムの遅延を引き起こす可能性があります。

## 参考資料

https://www.man7.org/linux/man-pages/man1/free.1.html

## 改訂履歴

- 2025/04/30 初版作成