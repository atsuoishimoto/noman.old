{
  "id": "msg_019h3qxs1MpdAHkGDueuydyA",
  "content": [
    {
      "text": "# ss コマンド\n\nソケット統計を表示し、ネットワーク接続に関する情報を提供します。\n\n## 概要\n\n`ss` コマンドは、ソケットを調査するためのユーティリティで、ネットワーク接続、ルーティングテーブル、ネットワークインターフェイスに関する情報を表示します。古い `netstat` コマンドよりも強力で高速な代替手段であり、Linux システム上の TCP、UDP、およびその他のソケットタイプに関する詳細な情報を提供します。\n\n## オプション\n\n### **-a, --all**\n\nリッスン中および非リッスン中の両方のソケットを表示します\n\n```console\n$ ss -a\nNetid  State   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port  Process\nu_str  ESTAB   0       0       * 19350               * 19351\nu_str  ESTAB   0       0       * 19351               * 19350\ntcp    LISTEN  0       128     0.0.0.0:22            0.0.0.0:*\ntcp    ESTAB   0       0       192.168.1.5:22        192.168.1.10:52914\n```\n\n### **-l, --listening**\n\nリッスン中のソケットのみを表示します\n\n```console\n$ ss -l\nNetid  State   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port  Process\ntcp    LISTEN  0       128     0.0.0.0:22            0.0.0.0:*\ntcp    LISTEN  0       128     127.0.0.1:631         0.0.0.0:*\ntcp    LISTEN  0       128     127.0.0.1:25          0.0.0.0:*\n```\n\n### **-t, --tcp**\n\nTCP ソケットのみを表示します\n\n```console\n$ ss -t\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nESTAB   0       0       192.168.1.5:22        192.168.1.10:52914\n```\n\n### **-u, --udp**\n\nUDP ソケットのみを表示します\n\n```console\n$ ss -u\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nUNCONN  0       0       0.0.0.0:68            0.0.0.0:*\nUNCONN  0       0       0.0.0.0:5353          0.0.0.0:*\n```\n\n### **-p, --processes**\n\nソケットを使用しているプロセスを表示します\n\n```console\n$ ss -p\nNetid  State   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port  Process\ntcp    ESTAB   0       0       192.168.1.5:22        192.168.1.10:52914 users:((\"sshd\",pid=1234,fd=3))\n```\n\n### **-n, --numeric**\n\nサービス名を解決しません（代わりにポート番号を表示）\n\n```console\n$ ss -n\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nESTAB   0       0       192.168.1.5:22        192.168.1.10:52914\n```\n\n### **-r, --resolve**\n\n数値アドレス/ポートを解決します\n\n```console\n$ ss -r\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nESTAB   0       0       server:ssh            client:52914\n```\n\n## 使用例\n\n### すべての TCP 接続を表示\n\n```console\n$ ss -ta\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nLISTEN  0       128     0.0.0.0:ssh           0.0.0.0:*\nLISTEN  0       128     127.0.0.1:ipp         0.0.0.0:*\nESTAB   0       0       192.168.1.5:ssh       192.168.1.10:52914\n```\n\n### プロセス情報付きでリッスン中の TCP ソケットを表示\n\n```console\n$ ss -tlp\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port   Process\nLISTEN  0       128     0.0.0.0:ssh           0.0.0.0:*           users:((\"sshd\",pid=1234,fd=3))\nLISTEN  0       128     127.0.0.1:ipp         0.0.0.0:*           users:((\"cupsd\",pid=5678,fd=12))\n```\n\n### ポートで接続をフィルタリング\n\n```console\n$ ss -t '( dport = :ssh or sport = :ssh )'\nState   Recv-Q  Send-Q  Local Address:Port   Peer Address:Port\nESTAB   0       0       192.168.1.5:ssh       192.168.1.10:52914\n```\n\n## ヒント:\n\n### 詳細な出力のためにオプションを組み合わせる\n\n`ss -tuln` のようにオプションを組み合わせて、数値アドレスを持つ TCP および UDP のリッスンソケットを表示します。これはシステム上で開いているポートを素早く確認するのに役立ちます。\n\n### 接続状態でフィルタリングする\n\n`ss state established` を使用して確立された接続のみを表示したり、`ss state time-wait` を使用して TIME-WAIT 状態の接続を表示したりします。これは接続の問題をトラブルシューティングする際に役立ちます。\n\n### リアルタイムで接続を監視する\n\n`watch -n1 'ss -t'` を使用して、1秒ごとに更新される TCP 接続をリアルタイムで監視します。これはトラブルシューティング中に接続の変化を追跡する際に役立ちます。\n\n## よくある質問\n\n#### Q1. `ss` と `netstat` の違いは何ですか？\nA. `ss` は `netstat` よりも高速で、より多くの情報を提供します。`/proc` ファイルを解析するのではなく、ソケット情報をカーネル空間から直接クエリします。\n\n#### Q2. 特定のポートを使用しているプロセスを確認するにはどうすればよいですか？\nA. `ss -ltp` を使用して、プロセス情報付きのリッスン中の TCP ソケットを表示します。ポートでフィルタリングすることもできます：`ss -ltp sport = :80`。\n\n#### Q3. 特定の IP アドレスへの確立された接続を確認するにはどうすればよいですか？\nA. `ss -t dst 192.168.1.10` を使用して、その IP アドレスへのすべての TCP 接続を表示します。\n\n#### Q4. ソケットのメモリ使用量を確認するにはどうすればよいですか？\nA. `ss -m` を使用して、ソケットのメモリ使用量情報を表示します。\n\n## 参考文献\n\nhttps://man7.org/linux/man-pages/man8/ss.8.html\n\n## 改訂履歴\n\n- 2025/05/05 初版",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1654,
    "output_tokens": 2017
  }
}