# exprコマンド概要

`expr`は、数値計算や文字列操作を行うためのコマンドラインユーティリティです。シェルスクリプト内で算術演算や文字列の比較、パターンマッチングなどを実行するのに使用されます。

## 主な機能

- **算術演算**: 加算、減算、乗算、除算、剰余演算
  - 例: `expr 5 + 3`（加算）
  - 例: `expr 10 \* 2`（乗算。`*`はシェルで特殊文字のためエスケープが必要）

- **比較演算**: 数値や文字列の比較
  - 例: `expr 5 \> 3`（大なり比較）
  - 例: `expr "abc" = "abc"`（文字列の等価比較）

- **文字列操作**: 文字列の長さ取得、部分文字列の抽出、パターンマッチング
  - 例: `expr length "hello"`（文字列の長さを取得）
  - 例: `expr substr "hello world" 7 5`（部分文字列の抽出）
  - 例: `expr "hello" : "h.*o"`（正規表現によるマッチング）

## 使用例

```bash
# 基本的な算術演算
$ expr 10 + 5
15

# 乗算（*はエスケープが必要）
$ expr 4 \* 3
12

# 文字列の長さを取得
$ expr length "こんにちは"
5

# 部分文字列の抽出（7文字目から5文字分）
$ expr substr "Hello World" 7 5
World

# 文字列の比較
$ expr "apple" = "apple"
1
$ expr "apple" = "orange"
0

# 正規表現によるマッチング
$ expr "hello123" : ".*\([0-9]*\)"
123
```

## 追加情報

- シェルスクリプト内で変数に結果を格納する場合は、バッククォートまたは`$()`を使用します：
  ```bash
  result=`expr $a + $b`
  # または
  result=$(expr $a + $b)
  ```

- 現代のシェルスクリプトでは、`expr`の代わりにシェル組み込みの算術展開`$(( ))`を使用することが多いです：
  ```bash
  # exprの代わりに
  result=$(( a + b ))
  ```

- `expr`は空白で区切られた引数として演算子と被演算子を受け取るため、構文に注意が必要です。

- 0を返す場合（比較が偽の場合など）と、エラーが発生した場合は区別されるので注意してください。