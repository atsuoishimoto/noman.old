{
  "id": "msg_01FjWmC4qpuMPf547EmFYnXo",
  "content": [
    {
      "text": "# ssh-add command\n\nAdds private key identities to the OpenSSH authentication agent.\n\n## Overview\n\n`ssh-add` manages the private keys used for SSH authentication. It adds keys to the SSH agent, which holds private keys in memory so you don't need to type passphrases repeatedly when connecting to remote servers. The SSH agent must be running before using ssh-add.\n\n## Options\n\n### **-l**\n\nLists fingerprints of all identities currently represented by the agent.\n\n```console\n$ ssh-add -l\n2048 SHA256:abcdefghijklmnopqrstuvwxyz1234567890ABCD user@hostname (RSA)\n```\n\n### **-L**\n\nLists public key parameters of all identities currently represented by the agent.\n\n```console\n$ ssh-add -L\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC... user@hostname\n```\n\n### **-d**\n\nRemoves the specified private key identity from the agent.\n\n```console\n$ ssh-add -d ~/.ssh/id_rsa\nIdentity removed: /home/user/.ssh/id_rsa (user@hostname)\n```\n\n### **-D**\n\nDeletes all identities from the agent.\n\n```console\n$ ssh-add -D\nAll identities removed.\n```\n\n### **-t life**\n\nSets a maximum lifetime when adding identities to an agent. The lifetime may be specified in seconds or in a time format specified in sshd_config(5).\n\n```console\n$ ssh-add -t 3600 ~/.ssh/id_rsa\nIdentity added: /home/user/.ssh/id_rsa (user@hostname)\nLifetime set to 3600 seconds\n```\n\n### **-x**\n\nLocks the agent with a password.\n\n```console\n$ ssh-add -x\nEnter lock password: \nAgain: \nAgent locked.\n```\n\n### **-X**\n\nUnlocks the agent.\n\n```console\n$ ssh-add -X\nEnter unlock password: \nAgent unlocked.\n```\n\n## Usage Examples\n\n### Adding a key to the agent\n\n```console\n$ ssh-add ~/.ssh/id_rsa\nEnter passphrase for /home/user/.ssh/id_rsa: \nIdentity added: /home/user/.ssh/id_rsa (user@hostname)\n```\n\n### Adding multiple keys at once\n\n```console\n$ ssh-add ~/.ssh/id_rsa ~/.ssh/id_ed25519\nEnter passphrase for /home/user/.ssh/id_rsa: \nIdentity added: /home/user/.ssh/id_rsa (user@hostname)\nEnter passphrase for /home/user/.ssh/id_ed25519: \nIdentity added: /home/user/.ssh/id_ed25519 (user@hostname)\n```\n\n### Adding all default keys\n\n```console\n$ ssh-add\nIdentity added: /home/user/.ssh/id_rsa (user@hostname)\nIdentity added: /home/user/.ssh/id_ed25519 (user@hostname)\n```\n\n## Tips:\n\n### Start SSH Agent Automatically\n\nOn most systems, you can ensure the SSH agent starts automatically by adding these lines to your `~/.bashrc` or `~/.bash_profile`:\n```bash\nif [ -z \"$SSH_AUTH_SOCK\" ]; then\n   eval $(ssh-agent -s)\nfi\n```\n\n### Use SSH Config for Key Management\n\nInstead of manually adding keys, you can specify which key to use for specific hosts in your `~/.ssh/config` file:\n```\nHost example.com\n    IdentityFile ~/.ssh/special_key\n```\n\n### Check If Keys Are Already Added\n\nBefore adding keys, check if they're already loaded with `ssh-add -l` to avoid duplicate entries.\n\n## Frequently Asked Questions\n\n#### Q1. Why do I need to use ssh-add?\nA. `ssh-add` lets you store your private key passphrases in the SSH agent, so you don't need to type them each time you connect to a server.\n\n#### Q2. How do I make ssh-add remember my keys after reboot?\nA. SSH agent doesn't persist across reboots by default. You can use tools like `keychain` or configure your login manager to start the SSH agent and add keys automatically.\n\n#### Q3. What's the difference between ssh-add -l and ssh-add -L?\nA. `-l` shows fingerprints of loaded keys (shorter output), while `-L` shows the complete public key data (longer, more detailed output).\n\n#### Q4. How can I limit how long a key stays in the agent?\nA. Use `ssh-add -t <seconds>` to set a time limit, after which the key will be automatically removed.\n\n## macOS Specifics\n\nOn macOS, the SSH agent is integrated with Keychain, so keys added with `ssh-add -K` are stored persistently across reboots. In newer macOS versions (Monterey and later), use `ssh-add --apple-use-keychain` instead of the deprecated `-K` option.\n\n## References\n\nhttps://man.openbsd.org/ssh-add.1\n\n## Revisions\n\n- 2025/05/05 First revision",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1680,
    "output_tokens": 1223
  }
}