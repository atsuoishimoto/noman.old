<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  openssl - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">コマンド一覧</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>opensslコマンド</h1>
<p>暗号化機能の管理（証明書の作成、暗号化、安全な接続など）を行います。</p>
<h2>概要</h2>
<p>OpenSSLは、SSL/TLSプロトコルとさまざまな暗号化機能を扱うための堅牢なコマンドラインツールです。証明書の作成、鍵の生成、ファイルの暗号化/復号化、データのハッシュ化、安全な接続のテストなどが可能です。このコマンドは、ネットワーク通信のセキュリティ実装やデジタル証明書の管理のための幅広い機能を提供します。</p>
<h2>オプション</h2>
<h3><strong>req</strong></h3>
<p>証明書リクエストの作成と処理</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>req<span style="color: #F8F8F8"> </span>-new<span style="color: #F8F8F8"> </span>-key<span style="color: #F8F8F8"> </span>private.key<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>request.csr
<span style="color: #000; font-style: italic">You are about to be asked to enter information that will be incorporated</span>
<span style="color: #000; font-style: italic">into your certificate request.</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>x509</strong></h3>
<p>証明書の表示と署名ユーティリティ</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>x509<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>certificate.crt<span style="color: #F8F8F8"> </span>-text<span style="color: #F8F8F8"> </span>-noout
<span style="color: #000; font-style: italic">Certificate:</span>
<span style="color: #000; font-style: italic">    Data:</span>
<span style="color: #000; font-style: italic">        Version: 3 (0x2)</span>
<span style="color: #000; font-style: italic">        Serial Number: 12345 (0x3039)</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>genrsa</strong></h3>
<p>RSA秘密鍵の生成</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>genrsa<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>private.key<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">2048</span>
<span style="color: #000; font-style: italic">Generating RSA private key, 2048 bit long modulus</span>
<span style="color: #000; font-style: italic">.....+++</span>
<span style="color: #000; font-style: italic">.............+++</span>
<span style="color: #000; font-style: italic">e is 65537 (0x10001)</span>
</pre></div>
<h3><strong>rsa</strong></h3>
<p>RSA鍵の処理</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>rsa<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>private.key<span style="color: #F8F8F8"> </span>-pubout<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>public.key
<span style="color: #000; font-style: italic">writing RSA key</span>
</pre></div>
<h3><strong>s_client</strong></h3>
<p>接続テスト用のSSL/TLSクライアントプログラム</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>s_client<span style="color: #F8F8F8"> </span>-connect<span style="color: #F8F8F8"> </span>example.com:443
<span style="color: #000; font-style: italic">CONNECTED(00000003)</span>
<span style="color: #000; font-style: italic">depth=2 O = Digital Signature Trust Co., CN = DST Root CA X3</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3><strong>enc</strong></h3>
<p>さまざまな暗号アルゴリズムを使用した暗号化または復号化</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>enc<span style="color: #F8F8F8"> </span>-aes-256-cbc<span style="color: #F8F8F8"> </span>-salt<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>plaintext.txt<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>encrypted.txt
<span style="color: #000; font-style: italic">enter aes-256-cbc encryption password:</span>
<span style="color: #000; font-style: italic">Verifying - enter aes-256-cbc encryption password:</span>
</pre></div>
<h3><strong>dgst</strong></h3>
<p>メッセージダイジェスト（ハッシュ）の計算</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>dgst<span style="color: #F8F8F8"> </span>-sha256<span style="color: #F8F8F8"> </span>file.txt
<span style="color: #000; font-style: italic">SHA256(file.txt)= 3a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b</span>
</pre></div>
<h2>使用例</h2>
<h3>自己署名証明書の作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>req<span style="color: #F8F8F8"> </span>-x509<span style="color: #F8F8F8"> </span>-newkey<span style="color: #F8F8F8"> </span>rsa:4096<span style="color: #F8F8F8"> </span>-keyout<span style="color: #F8F8F8"> </span>key.pem<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>cert.pem<span style="color: #F8F8F8"> </span>-days<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">365</span><span style="color: #F8F8F8"> </span>-nodes
<span style="color: #000; font-style: italic">Generating a 4096 bit RSA private key</span>
<span style="color: #000; font-style: italic">.......................++</span>
<span style="color: #000; font-style: italic">.......................++</span>
<span style="color: #000; font-style: italic">writing new private key to &#39;key.pem&#39;</span>
<span style="color: #000; font-style: italic">-----</span>
<span style="color: #000; font-style: italic">You are about to be asked to enter information that will be incorporated</span>
<span style="color: #000; font-style: italic">into your certificate request.</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h3>証明書チェーンの検証</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>verify<span style="color: #F8F8F8"> </span>-CAfile<span style="color: #F8F8F8"> </span>ca-bundle.crt<span style="color: #F8F8F8"> </span>certificate.crt
<span style="color: #000; font-style: italic">certificate.crt: OK</span>
</pre></div>
<h3>証明書フォーマットの変換</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>x509<span style="color: #F8F8F8"> </span>-in<span style="color: #F8F8F8"> </span>certificate.crt<span style="color: #F8F8F8"> </span>-inform<span style="color: #F8F8F8"> </span>PEM<span style="color: #F8F8F8"> </span>-out<span style="color: #F8F8F8"> </span>certificate.der<span style="color: #F8F8F8"> </span>-outform<span style="color: #F8F8F8"> </span>DER
</pre></div>
<h3>SSL/TLS接続の詳細確認</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>openssl<span style="color: #F8F8F8"> </span>s_client<span style="color: #F8F8F8"> </span>-connect<span style="color: #F8F8F8"> </span>example.com:443<span style="color: #F8F8F8"> </span>-showcerts
<span style="color: #000; font-style: italic">CONNECTED(00000003)</span>
<span style="color: #000; font-style: italic">depth=2 O = Digital Signature Trust Co., CN = DST Root CA X3</span>
<span style="color: #000; font-style: italic">...</span>
</pre></div>
<h2>ヒント:</h2>
<h3>証明書の有効期限の確認</h3>
<p><code>openssl x509 -enddate -noout -in certificate.crt</code>を使用すると、証明書の詳細をすべて表示せずに、証明書の有効期限をすぐに確認できます。</p>
<h3>強力なランダムパスワードの生成</h3>
<p><code>openssl rand -base64 16</code>を使用して、16バイトの安全なランダムパスワード（base64でエンコードされて表示）を生成できます。</p>
<h3>ブラウザでの証明書情報の表示</h3>
<p>ウェブサイトに接続せずに証明書の詳細を確認するには、証明書をローカルに保存した後、<code>openssl x509 -in certificate.crt -text -noout</code>を使用します。</p>
<h3>SSL/TLS接続のトラブルシューティング</h3>
<p>接続の問題が発生した場合は、<code>openssl s_client -connect hostname:port -debug</code>を使用して、ハンドシェイクプロセスに関する詳細情報を確認できます。</p>
<h2>よくある質問</h2>
<h4>Q1. CSR（証明書署名リクエスト）を作成するにはどうすればよいですか？</h4>
<p>A. <code>openssl req -new -key private.key -out request.csr</code>を使用します。組織名や共通名などの証明書情報の入力を求められます。</p>
<h4>Q2. 証明書の内容を確認するにはどうすればよいですか？</h4>
<p>A. <code>openssl x509 -in certificate.crt -text -noout</code>を使用すると、人間が読める形式で証明書の詳細が表示されます。</p>
<h4>Q3. 証明書をPEM形式からPKCS#12形式に変換するにはどうすればよいですか？</h4>
<p>A. <code>openssl pkcs12 -export -out certificate.pfx -inkey private.key -in certificate.crt</code>を使用して、証明書と秘密鍵の両方を含むPKCS#12ファイルを作成します。</p>
<h4>Q4. サーバーへのSSL/TLS接続をテストするにはどうすればよいですか？</h4>
<p>A. <code>openssl s_client -connect hostname:port</code>を使用して接続を確立し、証明書情報を表示します。</p>
<h4>Q5. 鍵やパスワードとして使用するランダムな文字列を生成するにはどうすればよいですか？</h4>
<p>A. <code>openssl rand -base64 32</code>を使用して、base64でエンコードされた32バイトのランダムな文字列を生成します。</p>
<h2>参考資料</h2>
<p>https://www.openssl.org/docs/man1.1.1/man1/</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/05 初版</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>