# date コマンド

現在の日付と時刻を表示または設定します。

## 概要

`date` コマンドは、システムの現在の日付と時刻を表示したり、システム時計を設定したりするために使用します。デフォルトでは、現在のローカル時間を表示しますが、様々なフォーマットオプションを使用して出力をカスタマイズすることができます。

## オプション

### **-u (--utc, --universal)**

協定世界時（UTC）で日付と時刻を表示します。

```console
$ date -u
水  5月  1 00:30:45 UTC 2025
```

### **+FORMAT**

日付と時刻を指定したフォーマットで表示します。

```console
$ date "+%Y-%m-%d %H:%M:%S"
2025-04-30 15:30:45
```

### **-d, --date=STRING**

現在の時刻ではなく、指定した日時を表示します。

```console
$ date -d "next day" "+%Y-%m-%d"
2025-05-01
```

### **-s, --set=STRING**

システムの日付と時刻を設定します（通常は管理者権限が必要）。

```console
$ sudo date -s "2025-04-30 15:30:00"
水  4月 30 15:30:00 JST 2025
```

## 使用例

### 基本的な日付表示

```console
$ date
水  4月 30 15:30:45 JST 2025
```

### カスタムフォーマットでの表示

```console
$ date "+今日は%Y年%m月%d日、%A、%H時%M分%S秒です。"
今日は2025年04月30日、水曜日、15時30分45秒です。
```

### 特定の日付の計算

```console
$ date -d "2025-04-30 + 7 days" "+%Y-%m-%d"
2025-05-07
```

### ファイル名に日付を使用する

```console
$ touch backup-$(date +%Y%m%d).tar.gz
$ ls
backup-20250430.tar.gz
```

## ヒント:

### よく使われるフォーマット指定子

- `%Y`: 4桁の年（例: 2025）
- `%m`: 月（01-12）
- `%d`: 日（01-31）
- `%H`: 時（00-23）
- `%M`: 分（00-59）
- `%S`: 秒（00-59）
- `%A`: 曜日の名前（例: 水曜日）
- `%a`: 曜日の短縮名（例: 水）
- `%Z`: タイムゾーン（例: JST）

### UNIXタイムスタンプの取得

```console
$ date +%s
1745826645
```

これはエポック（1970年1月1日 UTC）からの秒数であり、プログラミングやスクリプトで便利です。

## よくある質問

#### Q1. システム時刻を変更するには管理者権限が必要ですか？
A. はい、通常はシステム時刻を変更するには `sudo` などで管理者権限が必要です。

#### Q2. 特定のタイムゾーンで時刻を表示するにはどうすればいいですか？
A. `TZ` 環境変数を設定して実行します。例: `TZ=America/New_York date`

#### Q3. 日付の計算はどのように行いますか？
A. `-d` オプションを使用して相対的な日付を指定できます。例えば、`date -d "next month"` や `date -d "2 days ago"` などです。

#### Q4. macOSでの date コマンドは Linux と同じですか？
A. macOSの `date` コマンドは BSD 由来で、Linux（GNU）版とは一部のオプションやフォーマット指定子が異なります。特に `-d` オプションは macOS では使用できません。

## macOSでの注意点

macOSでは、GNU版の `date` コマンドとは異なる BSD 版が使用されています。主な違いは以下の通りです：

- `-d` オプションがありません。代わりに `-v` を使用して日付を調整できます。
  例: `date -v+1d` （1日後）
- 日付を設定するには `-s` ではなく、別の構文を使用します。
  例: `sudo date MMDDHHmmYY`

GNU版の機能が必要な場合は、Homebrewで `coreutils` パッケージをインストールし、`gdate` コマンドを使用できます。

```console
$ brew install coreutils
$ gdate -d "next week" +%Y-%m-%d
2025-05-07
```

## 参考

https://www.gnu.org/software/coreutils/manual/html_node/date-invocation.html

## 改訂

- 2025/04/30 初版作成