{
  "id": "msg_01MAWjcfT6ChHyPfyqNJMbZz",
  "content": [
    {
      "text": "# systemctl command\n\nControl the systemd system and service manager.\n\n## Overview\n\n`systemctl` is a command-line utility used to control and manage the systemd system and service manager. It allows users to start, stop, restart, enable, disable, and check the status of system services. It's the primary tool for interacting with systemd, which is the init system and service manager for most modern Linux distributions.\n\n## Options\n\n### **status**\n\nShow the runtime status of one or more units\n\n```console\n$ systemctl status nginx\n● nginx.service - A high performance web server and a reverse proxy server\n   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\n   Active: active (running) since Mon 2025-05-05 10:15:30 UTC; 2h 30min ago\n     Docs: man:nginx(8)\n  Process: 1234 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n  Process: 1235 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n Main PID: 1236 (nginx)\n    Tasks: 2 (limit: 4915)\n   Memory: 3.0M\n   CGroup: /system.slice/nginx.service\n           ├─1236 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\n           └─1237 nginx: worker process\n```\n\n### **start**\n\nStart (activate) one or more units\n\n```console\n$ sudo systemctl start nginx\n```\n\n### **stop**\n\nStop (deactivate) one or more units\n\n```console\n$ sudo systemctl stop nginx\n```\n\n### **restart**\n\nRestart one or more units\n\n```console\n$ sudo systemctl restart nginx\n```\n\n### **reload**\n\nReload one or more units\n\n```console\n$ sudo systemctl reload nginx\n```\n\n### **enable**\n\nEnable one or more units to be started at boot\n\n```console\n$ sudo systemctl enable nginx\nCreated symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /lib/systemd/system/nginx.service.\n```\n\n### **disable**\n\nDisable one or more units from starting at boot\n\n```console\n$ sudo systemctl disable nginx\nRemoved /etc/systemd/system/multi-user.target.wants/nginx.service.\n```\n\n### **is-active**\n\nCheck whether units are active\n\n```console\n$ systemctl is-active nginx\nactive\n```\n\n### **is-enabled**\n\nCheck whether units are enabled\n\n```console\n$ systemctl is-enabled nginx\nenabled\n```\n\n### **list-units**\n\nList loaded units\n\n```console\n$ systemctl list-units\nUNIT                                      LOAD   ACTIVE SUB     DESCRIPTION\nproc-sys-fs-binfmt_misc.automount         loaded active waiting Arbitrary Executable File Formats File System\nsys-devices-pci0000:00-0000:00:02.0-drm-card0-card0\\x2dDP\\x2d1-intel_backlight.device loaded active plugged /sys/devices/pci0000:00/0000:00:02.0/drm/card0/card0-DP-1/intel_backlight\nsys-devices-platform-serial8250-tty-ttyS0.device loaded active plugged /sys/devices/platform/serial8250/tty/ttyS0\n...\n```\n\n### **--type=TYPE**\n\nList units of a specific type\n\n```console\n$ systemctl --type=service\nUNIT                               LOAD   ACTIVE SUB     DESCRIPTION\naccounts-daemon.service            loaded active running Accounts Service\napparmor.service                   loaded active exited  AppArmor initialization\napport.service                     loaded active exited  LSB: automatic crash report generation\n...\n```\n\n### **daemon-reload**\n\nReload systemd manager configuration\n\n```console\n$ sudo systemctl daemon-reload\n```\n\n## Usage Examples\n\n### Checking the status of a specific service\n\n```console\n$ systemctl status ssh\n● ssh.service - OpenBSD Secure Shell server\n   Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)\n   Active: active (running) since Mon 2025-05-05 09:45:23 UTC; 3h 10min ago\n  Process: 1122 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)\n Main PID: 1123 (sshd)\n    Tasks: 1 (limit: 4915)\n   Memory: 5.6M\n   CGroup: /system.slice/ssh.service\n           └─1123 /usr/sbin/sshd -D\n```\n\n### Restarting a service and checking its status\n\n```console\n$ sudo systemctl restart nginx && systemctl status nginx\n● nginx.service - A high performance web server and a reverse proxy server\n   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\n   Active: active (running) since Mon 2025-05-05 13:05:45 UTC; 2s ago\n     Docs: man:nginx(8)\n  Process: 5678 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n  Process: 5679 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n Main PID: 5680 (nginx)\n    Tasks: 2 (limit: 4915)\n   Memory: 2.8M\n   CGroup: /system.slice/nginx.service\n           ├─5680 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\n           └─5681 nginx: worker process\n```\n\n### Listing all failed services\n\n```console\n$ systemctl list-units --state=failed\nUNIT                  LOAD   ACTIVE SUB    DESCRIPTION\nmysql.service         loaded failed failed MySQL Database Server\nopenvpn.service       loaded failed failed OpenVPN service\n```\n\n## Tips:\n\n### Use Tab Completion\n\nSystemctl supports tab completion for service names, making it easier to manage services without remembering exact names.\n\n### Check Service Logs\n\nWhen troubleshooting services, use `journalctl -u service-name` to view logs specific to that service.\n\n### Mask Services\n\nTo completely prevent a service from being started (even manually), use `systemctl mask service-name`. This creates a symlink to /dev/null, making it impossible to start the service until it's unmasked with `systemctl unmask service-name`.\n\n### View Service Dependencies\n\nUse `systemctl list-dependencies service-name` to see what other services a particular service depends on.\n\n### Manage System State\n\nBeyond services, systemctl can manage system states like reboot (`systemctl reboot`), poweroff (`systemctl poweroff`), and suspend (`systemctl suspend`).\n\n## Frequently Asked Questions\n\n#### Q1. What's the difference between `systemctl stop` and `systemctl disable`?\nA. `systemctl stop` immediately stops a running service but doesn't change its boot behavior. `systemctl disable` prevents a service from starting automatically at boot but doesn't affect currently running services.\n\n#### Q2. How do I make changes to a service configuration take effect?\nA. After modifying a service file, run `sudo systemctl daemon-reload` to reload the systemd manager configuration, then restart the service with `sudo systemctl restart service-name`.\n\n#### Q3. How can I see all available services?\nA. Use `systemctl list-unit-files --type=service` to see all available service unit files and their states.\n\n#### Q4. How do I create a custom systemd service?\nA. Create a .service file in /etc/systemd/system/, then run `systemctl daemon-reload` to register it, and `systemctl enable` to enable it at boot.\n\n#### Q5. What does \"masked\" status mean for a service?\nA. A masked service is completely prevented from starting, either manually or automatically. It's a stronger form of \"disabled\" and is done by creating a symlink from the service file to /dev/null.\n\n## References\n\nhttps://www.freedesktop.org/software/systemd/man/systemctl.html\n\n## Revisions\n\n- 2025/05/05 First revision",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1679,
    "output_tokens": 2056
  }
}