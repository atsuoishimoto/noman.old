<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  journalctl - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>journalctl コマンド</h1>
<p>システムログを表示・管理するためのコマンドです。</p>
<h2>概要</h2>
<p><code>journalctl</code> は systemd のジャーナルログを閲覧するためのコマンドです。システムの起動メッセージ、サービスのログ、カーネルメッセージなど、システム全体のログを時系列で表示します。デフォルトでは、すべてのログエントリを表示しますが、様々なオプションを使用して特定のサービス、時間範囲、優先度などでフィルタリングすることができます。</p>
<h2>オプション</h2>
<h3><strong>-f, --follow</strong></h3>
<p>リアルタイムでログを追跡表示します（tail -f のような動作）</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-f
<span style="color: #000; font-style: italic">4月 30 10:15:23 hostname systemd[1]: Started User Manager for UID 1000.</span>
<span style="color: #000; font-style: italic">4月 30 10:15:24 hostname sshd[1234]: Accepted publickey for user from 192.168.1.10 port 54321</span>
<span style="color: #000; font-style: italic">4月 30 10:15:25 hostname sudo[1235]: user : TTY=pts/0 ; PWD=/home/user ; USER=root ; COMMAND=/bin/systemctl restart nginx</span>
<span style="color: #000; font-style: italic">-- ログが追加されるたびに表示が更新される --</span>
</pre></div>
<h3><strong>-u, --unit=</strong></h3>
<p>特定のサービスユニットのログのみを表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-u<span style="color: #F8F8F8"> </span>nginx.service
<span style="color: #000; font-style: italic">4月 29 08:30:12 hostname systemd[1]: Starting A high performance web server and a reverse proxy server...</span>
<span style="color: #000; font-style: italic">4月 29 08:30:12 hostname systemd[1]: Started A high performance web server and a reverse proxy server.</span>
<span style="color: #000; font-style: italic">4月 30 10:15:26 hostname systemd[1]: Restarting A high performance web server and a reverse proxy server...</span>
<span style="color: #000; font-style: italic">4月 30 10:15:26 hostname systemd[1]: Started A high performance web server and a reverse proxy server.</span>
</pre></div>
<h3><strong>-b, --boot</strong></h3>
<p>現在の起動セッションのログのみを表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-b
<span style="color: #000; font-style: italic">4月 30 08:00:01 hostname kernel: Linux version 5.15.0-25-generic (gcc version 11.2.0)</span>
<span style="color: #000; font-style: italic">4月 30 08:00:02 hostname systemd[1]: Detected virtualization kvm.</span>
<span style="color: #000; font-style: italic">4月 30 08:00:03 hostname systemd[1]: Detected architecture x86-64.</span>
<span style="color: #000; font-style: italic">-- 現在の起動セッションのログが表示される --</span>
</pre></div>
<h3><strong>--since=, --until=</strong></h3>
<p>指定した時間範囲のログを表示します</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>--since<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #4E9A06">&quot;2025-04-30 09:00:00&quot;</span><span style="color: #F8F8F8"> </span>--until<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #4E9A06">&quot;2025-04-30 10:00:00&quot;</span>
<span style="color: #000; font-style: italic">4月 30 09:00:05 hostname systemd[1]: Started Daily apt download activities.</span>
<span style="color: #000; font-style: italic">4月 30 09:15:01 hostname CRON[1234]: (root) CMD (command -v debian-sa1 &gt; /dev/null &amp;&amp; debian-sa1 1 1)</span>
<span style="color: #000; font-style: italic">4月 30 09:45:23 hostname sshd[1235]: Accepted publickey for user from 192.168.1.10 port 54321</span>
<span style="color: #000; font-style: italic">-- 指定した時間範囲のログが表示される --</span>
</pre></div>
<h3><strong>-p, --priority=</strong></h3>
<p>指定した優先度以上のログを表示します（0=emerg, 1=alert, 2=crit, 3=err, 4=warning, 5=notice, 6=info, 7=debug）</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span>err
<span style="color: #000; font-style: italic">4月 29 15:45:12 hostname kernel: CPU: 0 PID: 1234 Comm: process Tainted: G        W  5.15.0-25-generic</span>
<span style="color: #000; font-style: italic">4月 30 02:30:45 hostname nginx[5678]: [error] 5678#5678: *1 open() &quot;/var/www/html/favicon.ico&quot; failed (2: No such file or directory)</span>
<span style="color: #000; font-style: italic">-- エラー以上の重要度のログのみ表示される --</span>
</pre></div>
<h2>使用例</h2>
<h3>特定のプロセスIDのログを表示</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span><span style="color: #000">_PID</span><span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #0000CF; font-weight: bold">1234</span>
<span style="color: #000; font-style: italic">4月 30 10:15:24 hostname sshd[1234]: Accepted publickey for user from 192.168.1.10 port 54321</span>
<span style="color: #000; font-style: italic">4月 30 10:20:15 hostname sshd[1234]: Received disconnect from 192.168.1.10 port 54321:11: disconnected by user</span>
<span style="color: #000; font-style: italic">4月 30 10:20:15 hostname sshd[1234]: Disconnected from user 192.168.1.10 port 54321</span>
</pre></div>
<h3>最新の起動から特定のサービスのログを表示</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-b<span style="color: #F8F8F8"> </span>-u<span style="color: #F8F8F8"> </span>ssh.service
<span style="color: #000; font-style: italic">4月 30 08:00:45 hostname systemd[1]: Starting OpenBSD Secure Shell server...</span>
<span style="color: #000; font-style: italic">4月 30 08:00:46 hostname sshd[1234]: Server listening on 0.0.0.0 port 22.</span>
<span style="color: #000; font-style: italic">4月 30 08:00:46 hostname sshd[1234]: Server listening on :: port 22.</span>
<span style="color: #000; font-style: italic">4月 30 08:00:46 hostname systemd[1]: Started OpenBSD Secure Shell server.</span>
</pre></div>
<h3>ログの出力形式を変更（JSON形式）</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>journalctl<span style="color: #F8F8F8"> </span>-b<span style="color: #F8F8F8"> </span>-u<span style="color: #F8F8F8"> </span>ssh.service<span style="color: #F8F8F8"> </span>-o<span style="color: #F8F8F8"> </span>json
<span style="color: #000; font-style: italic">{&quot;_HOSTNAME&quot;:&quot;hostname&quot;,&quot;_SYSTEMD_UNIT&quot;:&quot;ssh.service&quot;,&quot;MESSAGE&quot;:&quot;Starting OpenBSD Secure Shell server...&quot;,&quot;__REALTIME_TIMESTAMP&quot;:&quot;1714521645000000&quot;}</span>
<span style="color: #000; font-style: italic">{&quot;_HOSTNAME&quot;:&quot;hostname&quot;,&quot;_SYSTEMD_UNIT&quot;:&quot;ssh.service&quot;,&quot;MESSAGE&quot;:&quot;Server listening on 0.0.0.0 port 22.&quot;,&quot;__REALTIME_TIMESTAMP&quot;:&quot;1714521646000000&quot;}</span>
</pre></div>
<h2>ヒント:</h2>
<h3>ディスク使用量の確認と管理</h3>
<p><code>journalctl --disk-usage</code> でジャーナルが使用しているディスク容量を確認できます。容量を節約するには <code>sudo journalctl --vacuum-size=500M</code> のようにして古いログを削除できます。</p>
<h3>カーネルメッセージの確認</h3>
<p><code>journalctl -k</code> または <code>journalctl --dmesg</code> でカーネルメッセージのみを表示できます。これはシステムの問題を診断する際に役立ちます。</p>
<h3>出力のページャーを無効化</h3>
<p><code>journalctl --no-pager</code> を使用すると、lessなどのページャーを使わずに出力を直接表示します。これはログをファイルにリダイレクトする場合に便利です。</p>
<h3>出力形式のカスタマイズ</h3>
<p><code>-o</code> オプションで出力形式を変更できます。例えば <code>journalctl -o json</code> でJSON形式、<code>-o short-precise</code> で精密なタイムスタンプ付きの短い形式で表示できます。</p>
<h2>よくある質問</h2>
<h4>Q1. journalctlとsyslogの違いは何ですか？</h4>
<p>A. journalctlはsystemdのジャーナルシステムを使用し、バイナリ形式で構造化されたログを保存します。従来のsyslogはテキストファイルベースです。journalctlはより多くのメタデータを保持し、検索やフィルタリングが容易です。</p>
<h4>Q2. ログはどこに保存されていますか？</h4>
<p>A. ジャーナルログは通常 <code>/var/log/journal/</code> ディレクトリに保存されています。ただし、設定によっては <code>/run/log/journal/</code>（揮発性）に保存される場合もあります。</p>
<h4>Q3. 古いログを削除するにはどうすればよいですか？</h4>
<p>A. <code>sudo journalctl --vacuum-time=1month</code>（1ヶ月より古いログを削除）や <code>sudo journalctl --vacuum-size=1G</code>（ログサイズを1GBに制限）などのコマンドを使用できます。</p>
<h4>Q4. 特定のユーザーのログだけを見るにはどうすればよいですか？</h4>
<p>A. <code>journalctl _UID=1000</code> のように、ユーザーIDを指定してフィルタリングできます。</p>
<h2>参考</h2>
<p>https://www.freedesktop.org/software/systemd/man/journalctl.html</p>
<h2>改訂</h2>
<ul>
<li>2025/04/30 初版作成</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>