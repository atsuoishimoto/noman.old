<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  pstack - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>pstack command</h1>
<p>Print a stack trace of running processes.</p>
<h2>Overview</h2>
<p><code>pstack</code> is a diagnostic tool that displays the execution stack trace of a running process. It helps developers and system administrators debug programs by showing the function calls that led to the current execution point. This command is particularly useful for diagnosing hung or misbehaving processes.</p>
<h2>Options</h2>
<p><code>pstack</code> is a simple command that doesn't have many options. It primarily takes a process ID (PID) as its argument.</p>
<h3><strong>Basic Usage</strong></h3>
<p>Simply provide the PID of the process you want to examine:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>pstack<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">1234</span>
</pre></div>
<h2>Usage Examples</h2>
<h3>Examining a specific process</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>pstack<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">3456</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #F8F8F8">  </span>0x00007f8e2d72ead3<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>__read_nocancel<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span><span style="color: #F8F8F8"> </span>from<span style="color: #F8F8F8"> </span>/lib64/libc.so.6
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #F8F8F8">  </span>0x00007f8e2c8b89c0<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>??<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span><span style="color: #F8F8F8"> </span>from<span style="color: #F8F8F8"> </span>/lib64/libpthread.so.0
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">2</span><span style="color: #F8F8F8">  </span>0x00000000004e472d<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>read_packet<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">3</span><span style="color: #F8F8F8">  </span>0x00000000004e2d2c<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>process_input<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">4</span><span style="color: #F8F8F8">  </span>0x000000000046574c<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>main<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
</pre></div>
<h3>Examining multiple processes</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>pstack<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">3456</span><span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">7890</span>
<span style="color: #000; font-style: italic">==&gt; 3456 &lt;==</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #F8F8F8">  </span>0x00007f8e2d72ead3<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>__read_nocancel<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span><span style="color: #F8F8F8"> </span>from<span style="color: #F8F8F8"> </span>/lib64/libc.so.6
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #F8F8F8">  </span>0x00007f8e2c8b89c0<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>??<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span><span style="color: #F8F8F8"> </span>from<span style="color: #F8F8F8"> </span>/lib64/libpthread.so.0
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">2</span><span style="color: #F8F8F8">  </span>0x00000000004e472d<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>read_packet<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">3</span><span style="color: #F8F8F8">  </span>0x00000000004e2d2c<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>process_input<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">4</span><span style="color: #F8F8F8">  </span>0x000000000046574c<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>main<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>

<span style="color: #000; font-style: italic">==&gt; 7890 &lt;==</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">0</span><span style="color: #F8F8F8">  </span>0x00007f4a3c45e923<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>poll<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span><span style="color: #F8F8F8"> </span>from<span style="color: #F8F8F8"> </span>/lib64/libc.so.6
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">1</span><span style="color: #F8F8F8">  </span>0x000000000045e2fc<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>wait_for_event<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
<span style="color: #8F5902">#</span><span style="color: #0000CF; font-weight: bold">2</span><span style="color: #F8F8F8">  </span>0x000000000040a8e3<span style="color: #F8F8F8"> </span><span style="color: #204A87; font-weight: bold">in</span><span style="color: #F8F8F8"> </span>main<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">()</span>
</pre></div>
<h2>Tips</h2>
<h3>Use with sudo for processes owned by other users</h3>
<p>If you need to examine a process owned by another user, you'll need to use <code>sudo</code>:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>sudo<span style="color: #F8F8F8"> </span>pstack<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">1234</span>
</pre></div>
<h3>Combine with other diagnostic tools</h3>
<p>For comprehensive debugging, use <code>pstack</code> alongside other tools like <code>strace</code>, <code>ltrace</code>, or <code>gdb</code> to get a complete picture of what a process is doing.</p>
<h3>Alternative commands</h3>
<p>On some systems, <code>pstack</code> might not be available. You can use equivalent commands:</p>
<ul>
<li><code>gdb -p PID -batch -ex &quot;thread apply all bt&quot; -ex &quot;quit&quot;</code></li>
<li>On Linux, you can also check <code>/proc/PID/stack</code></li>
</ul>
<h2>Frequently Asked Questions</h2>
<h4>Q1. What does a stack trace tell me?</h4>
<p>A. A stack trace shows the sequence of function calls that led to the current execution point in a process, helping you understand what the program was doing when it was examined.</p>
<h4>Q2. Why does my pstack output show question marks or missing function names?</h4>
<p>A. This typically happens when debugging information is not available for the binary or its libraries. Programs compiled without debugging symbols will show incomplete information.</p>
<h4>Q3. Is pstack available on all Unix systems?</h4>
<p>A. No, <code>pstack</code> is not universally available. It's common on Solaris and some Linux distributions, but may be missing on others. On macOS, similar functionality is available through other tools.</p>
<h4>Q4. Can pstack affect the running process?</h4>
<p>A. <code>pstack</code> is generally non-intrusive and doesn't modify the target process, making it safe to use on production systems.</p>
<h2>macOS Considerations</h2>
<p><code>pstack</code> is not natively available on macOS. Instead, you can use:</p>
<ul>
<li><code>sample</code> command: <code>sample PID 1 -file /dev/stdout</code></li>
<li><code>lldb</code> (the macOS debugger): <code>lldb -p PID -o &quot;bt all&quot; -o &quot;quit&quot;</code></li>
</ul>
<p>These alternatives provide similar stack trace information on macOS systems.</p>
<h2>References</h2>
<p>https://man7.org/linux/man-pages/man1/pstack.1.html</p>
<h2>Revisions</h2>
<ul>
<li>2025/04/30 First revision</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>