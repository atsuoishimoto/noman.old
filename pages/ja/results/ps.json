{
  "id": "msg_01RwMCDN6nSVW2ifBQcGQ429",
  "content": [
    {
      "text": "# ps コマンド\n\n実行中のプロセスに関する情報を表示します。\n\n## 概要\n\n`ps` コマンドは、システム上で現在実行中のプロセスのスナップショットを表示します。プロセスID（PID）、CPU使用率、メモリ消費量、その他のプロセス関連情報の詳細を提供します。デフォルトでは、`ps` は現在のユーザーが所有し、現在の端末に関連付けられたプロセスのみを表示します。\n\n## オプション\n\n### **-e**\n\nすべてのプロセスに関する情報を表示します（-Aと同等）。\n\n```console\n$ ps -e\n  PID TTY          TIME CMD\n    1 ?        00:00:03 systemd\n  546 ?        00:00:00 systemd-journal\n  578 ?        00:00:00 systemd-udevd\n  933 ?        00:00:00 sshd\n 1028 tty1     00:00:00 bash\n 1892 tty1     00:00:00 ps\n```\n\n### **-f**\n\nUID、PID、PPID、CPU使用率などを表示する完全なフォーマットのリストを表示します。\n\n```console\n$ ps -f\nUID        PID  PPID  C STIME TTY          TIME CMD\nuser      1028  1027  0 10:30 tty1     00:00:00 bash\nuser      1893  1028  0 10:35 tty1     00:00:00 ps -f\n```\n\n### **-l**\n\n優先度、状態コード、メモリ使用量などの詳細情報を含む長いフォーマットで表示します。\n\n```console\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  1028  1027  0  80   0 -  2546 wait   tty1     00:00:00 bash\n0 R  1000  1894  1028  0  80   0 -  2715 -      tty1     00:00:00 ps\n```\n\n### **-u username**\n\n指定したユーザーに属するプロセスを表示します。\n\n```console\n$ ps -u john\n  PID TTY          TIME CMD\n 1028 tty1     00:00:00 bash\n 1895 tty1     00:00:00 ps\n 2156 ?        00:00:01 firefox\n```\n\n### **-aux**\n\nすべてのプロセスに関する詳細情報を表示します（BSDスタイル）。\n\n```console\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.1 168940  9128 ?        Ss   May04   0:03 /sbin/init\nroot       546  0.0  0.1  55492  8456 ?        Ss   May04   0:00 /lib/systemd/systemd-journald\nuser      1028  0.0  0.0  21712  5312 tty1     Ss   10:30   0:00 bash\nuser      1896  0.0  0.0  37364  3328 tty1     R+   10:36   0:00 ps aux\n```\n\n## 使用例\n\n### 名前でプロセスを検索する\n\n```console\n$ ps -ef | grep firefox\nuser      2156  1028  2 10:15 ?        00:01:23 /usr/lib/firefox/firefox\nuser      1897  1028  0 10:36 tty1     00:00:00 grep --color=auto firefox\n```\n\n### プロセスツリーを表示する\n\n```console\n$ ps -ejH\n  PID  PGID   SID TTY          TIME CMD\n    1     1     1 ?        00:00:03 systemd\n  546   546   546 ?        00:00:00   systemd-journal\n  578   578   578 ?        00:00:00   systemd-udevd\n  933   933   933 ?        00:00:00   sshd\n 1027  1027  1027 tty1     00:00:00   login\n 1028  1028  1028 tty1     00:00:00     bash\n 1898  1898  1028 tty1     00:00:00       ps\n```\n\n### メモリ使用量でプロセスをソートする\n\n```console\n$ ps aux --sort=-%mem\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nuser      2156  2.0  8.5 1854036 348216 ?      Sl   10:15   1:23 /usr/lib/firefox/firefox\nuser      2201  0.5  2.3 1123460 95684 ?       Sl   10:18   0:15 /usr/lib/thunderbird/thunderbird\nroot       546  0.0  0.1  55492  8456 ?        Ss   May04   0:00 /lib/systemd/systemd-journald\n```\n\n## ヒント:\n\n### 出力フィールドをカスタマイズする\n\n`-o` オプションを使用して表示するフィールドを指定します：\n\n```console\n$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu\n  PID  PPID CMD                         %MEM %CPU\n 2156  1028 /usr/lib/firefox/firefox     8.5  2.0\n 2201  1028 /usr/lib/thunderbird/thun    2.3  0.5\n    1     0 /sbin/init                   0.1  0.0\n```\n\n### プロセスをリアルタイムで監視する\n\n`ps` と `watch` を組み合わせてプロセスをリアルタイムで監視します：\n\n```console\n$ watch -n 1 'ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu | head -10'\n```\n\n### 親子プロセスの関係を見つける\n\n`ps -f` を使用して PPID（親プロセスID）列を確認し、プロセス間の関係を理解します。\n\n## よくある質問\n\n#### Q1. `ps aux` と `ps -ef` の違いは何ですか？\nA. どちらもすべてのプロセスを表示しますが、`ps aux` は BSD スタイルの出力で、`ps -ef` は UNIX スタイルの出力です。`ps aux` は %CPU と %MEM の使用率を表示し、`ps -ef` は PPID（親プロセスID）を表示します。\n\n#### Q2. CPU を最も消費しているプロセスを見つけるにはどうすればよいですか？\nA. `ps aux --sort=-%cpu` を使用して、CPU 使用率の降順でプロセスをソートします。\n\n#### Q3. メモリを最も消費しているプロセスを見つけるにはどうすればよいですか？\nA. `ps aux --sort=-%mem` を使用して、メモリ使用率の降順でプロセスをソートします。\n\n#### Q4. 特定のユーザーのプロセスだけを表示するにはどうすればよいですか？\nA. `ps -u ユーザー名` を使用して、特定のユーザーが所有するプロセスのみを表示します。\n\n## macOSに関する考慮事項\n\nmacOSでは、一部のBSDスタイルのオプションがLinuxとは異なります。例えば、`-e` は利用できませんが、`ps -A` を使用してすべてのプロセスを表示できます。また、メモリレポートの列はLinuxシステムとは異なる値を表示する場合があります。\n\n## 参考文献\n\nhttps://man7.org/linux/man-pages/man1/ps.1.html\n\n## 改訂履歴\n\n- 2025/05/05 初版",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1857,
    "output_tokens": 2186
  }
}