{
  "id": "msg_01ChNunpbUbXzPMSA2ARyicD",
  "content": [
    {
      "text": "# rsync command\n\nSynchronize files and directories between local and remote systems or between local directories.\n\n## Overview\n\n`rsync` is a fast, versatile file copying and synchronization tool that efficiently transfers and synchronizes files between locations. It only copies the differences between source and destination, making it much faster than regular copy commands for subsequent transfers. It can work over SSH for secure remote transfers or locally between directories.\n\n## Options\n\n### **-a, --archive**\n\nArchive mode; preserves permissions, ownership, timestamps, and recursively copies directories.\n\n```console\n$ rsync -a /source/directory/ /destination/directory/\n```\n\n### **-v, --verbose**\n\nIncreases verbosity, showing files being transferred and a summary at the end.\n\n```console\n$ rsync -av /source/directory/ /destination/directory/\nsending incremental file list\nfile1.txt\nfile2.txt\ndirectory/\ndirectory/file3.txt\n\nsent 1,234 bytes  received 42 bytes  2,552.00 bytes/sec\ntotal size is 10,240  speedup is 8.04\n```\n\n### **-z, --compress**\n\nCompresses file data during transfer to reduce bandwidth usage.\n\n```console\n$ rsync -az /source/directory/ user@remote:/destination/directory/\n```\n\n### **-P, --partial --progress**\n\nShows progress during transfer and keeps partially transferred files.\n\n```console\n$ rsync -avP large_file.iso user@remote:/destination/\nsending incremental file list\nlarge_file.iso\n    153,092,096  14%   15.23MB/s    0:01:12\n```\n\n### **--delete**\n\nDeletes files in the destination that don't exist in the source, making destination an exact mirror.\n\n```console\n$ rsync -av --delete /source/directory/ /destination/directory/\n```\n\n### **-n, --dry-run**\n\nPerforms a trial run without making any changes.\n\n```console\n$ rsync -avn --delete /source/directory/ /destination/directory/\n```\n\n### **-e, --rsh=COMMAND**\n\nSpecifies the remote shell to use (typically ssh with options).\n\n```console\n$ rsync -av -e \"ssh -p 2222\" /source/directory/ user@remote:/destination/\n```\n\n### **-u, --update**\n\nSkip files that are newer on the destination.\n\n```console\n$ rsync -avu /source/directory/ /destination/directory/\n```\n\n### **--exclude=PATTERN**\n\nExcludes files matching the specified pattern.\n\n```console\n$ rsync -av --exclude=\"*.log\" /source/directory/ /destination/directory/\n```\n\n## Usage Examples\n\n### Synchronize local directories\n\n```console\n$ rsync -av /home/user/documents/ /media/backup/documents/\nsending incremental file list\nreport.docx\npresentation.pptx\nnotes.txt\n\nsent 15,234 bytes  received 85 bytes  30,638.00 bytes/sec\ntotal size is 45,678  speedup is 2.98\n```\n\n### Backup to a remote server\n\n```console\n$ rsync -avz --delete ~/documents/ user@remote.server:/backup/documents/\nsending incremental file list\n./\nreport.docx\npresentation.pptx\nnotes.txt\n\nsent 45,678 bytes  received 612 bytes  9,258.00 bytes/sec\ntotal size is 45,678  speedup is 0.99\n```\n\n### Download from a remote server\n\n```console\n$ rsync -avz user@remote.server:/remote/directory/ /local/directory/\nreceiving incremental file list\n./\nfile1.txt\nfile2.txt\ndirectory/\ndirectory/file3.txt\n\nreceived 10,240 bytes  received 214 bytes  6,969.33 bytes/sec\ntotal size is 10,240  speedup is 0.98\n```\n\n### Mirror a website (excluding certain files)\n\n```console\n$ rsync -avz --delete --exclude=\"*.tmp\" --exclude=\".git/\" /local/website/ user@server:/var/www/html/\n```\n\n## Tips:\n\n### Use Trailing Slashes Carefully\n\nA trailing slash on the source means \"copy the contents of this directory\" while no trailing slash means \"copy this directory and its contents.\" This subtle difference can significantly change what gets copied.\n\n### Preserve Hard Links\n\nUse the `-H` or `--hard-links` option when you need to preserve hard links between files in the transferred set.\n\n### Use Bandwidth Limiting for Large Transfers\n\nFor large transfers over networks, use `--bwlimit=KBPS` to limit bandwidth usage (e.g., `--bwlimit=1000` limits to 1000 KB/s).\n\n### Create Backup Snapshots\n\nCombine rsync with the `--link-dest` option to create efficient backup snapshots that use hard links for unchanged files, saving disk space.\n\n```console\n$ rsync -av --link-dest=/backups/daily.1 /source/ /backups/daily.0/\n```\n\n## Frequently Asked Questions\n\n#### Q1. How does rsync differ from scp?\nA. rsync only transfers the differences between files, making subsequent transfers much faster. It also offers more options for synchronization, preservation of attributes, and can resume interrupted transfers.\n\n#### Q2. How can I test what rsync will do before actually doing it?\nA. Use the `-n` or `--dry-run` option to see what would be transferred without making any changes.\n\n#### Q3. How do I synchronize files while preserving all attributes?\nA. Use the `-a` (archive) option, which is equivalent to `-rlptgoD` (recursive, preserve links, permissions, times, group, owner, and special files).\n\n#### Q4. Can rsync delete files at the destination that don't exist in the source?\nA. Yes, use the `--delete` option to make the destination an exact mirror of the source.\n\n#### Q5. How can I exclude certain files or directories?\nA. Use `--exclude=PATTERN` for individual patterns or `--exclude-from=FILE` to read patterns from a file.\n\n## References\n\nhttps://download.samba.org/pub/rsync/rsync.html\n\n## Revisions\n\n- 2025/05/05 First revision",
      "type": "text"
    }
  ],
  "model": "claude-3-7-sonnet-20250219",
  "role": "assistant",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "type": "message",
  "usage": {
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "input_tokens": 1679,
    "output_tokens": 1482
  }
}