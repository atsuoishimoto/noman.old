<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  scp - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>scp コマンド</h1>
<p>ネットワーク経由でファイルやディレクトリを安全にコピーします。</p>
<h2>概要</h2>
<p><code>scp</code>（Secure Copy Protocol）は、SSHプロトコルを使用してローカルマシンとリモートマシン間、またはリモートマシン同士でファイルを安全に転送するためのコマンドです。データは暗号化されて送信されるため、セキュリティが確保されます。</p>
<h2>オプション</h2>
<h3><strong>-r</strong>（再帰的コピー）</h3>
<p>ディレクトリとその中身を再帰的にコピーします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>-r<span style="color: #F8F8F8"> </span>~/Documents/project<span style="color: #F8F8F8"> </span>user@remote-host:/home/user/backup/
<span style="color: #000; font-style: italic">project/                                   100%  4096     1.2MB/s   00:00    </span>
<span style="color: #000; font-style: italic">file1.txt                                  100%  1024     0.5MB/s   00:00</span>
<span style="color: #000; font-style: italic">file2.txt                                  100%  2048     0.8MB/s   00:00</span>
</pre></div>
<h3><strong>-P</strong>（ポート指定）</h3>
<p>デフォルト（22）以外のSSHポートを指定します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>-P<span style="color: #F8F8F8"> </span><span style="color: #0000CF; font-weight: bold">2222</span><span style="color: #F8F8F8"> </span>file.txt<span style="color: #F8F8F8"> </span>user@remote-host:/home/user/
<span style="color: #000; font-style: italic">file.txt                                   100%  1024     0.5MB/s   00:00</span>
</pre></div>
<h3><strong>-p</strong>（パーミッション保持）</h3>
<p>元のファイルの修正時刻、アクセス時刻、モードを保持します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span>important.conf<span style="color: #F8F8F8"> </span>user@remote-host:/etc/
<span style="color: #000; font-style: italic">important.conf                             100%  2048     0.8MB/s   00:00</span>
</pre></div>
<h3><strong>-C</strong>（圧縮）</h3>
<p>転送中にデータを圧縮します。低速ネットワークで有用です。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>-C<span style="color: #F8F8F8"> </span>large_file.zip<span style="color: #F8F8F8"> </span>user@remote-host:~/
<span style="color: #000; font-style: italic">large_file.zip                             100%  10MB     2.5MB/s   00:04</span>
</pre></div>
<h3><strong>-q</strong>（静かモード）</h3>
<p>進行状況メーターやエラー以外のメッセージを表示しません。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>-q<span style="color: #F8F8F8"> </span>file.txt<span style="color: #F8F8F8"> </span>user@remote-host:~/
</pre></div>
<h2>使用例</h2>
<h3>ローカルからリモートへのファイルコピー</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>document.txt<span style="color: #F8F8F8"> </span>user@remote-host:/path/to/destination/
<span style="color: #000; font-style: italic">document.txt                               100%  1024     0.5MB/s   00:00</span>
</pre></div>
<h3>リモートからローカルへのファイルコピー</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>user@remote-host:/path/to/file.txt<span style="color: #F8F8F8"> </span>./
<span style="color: #000; font-style: italic">file.txt                                   100%  2048     0.8MB/s   00:00</span>
</pre></div>
<h3>リモートからリモートへのファイルコピー</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>user1@host1:/path/file.txt<span style="color: #F8F8F8"> </span>user2@host2:/path/
<span style="color: #000; font-style: italic">file.txt                                   100%  1024     0.5MB/s   00:00</span>
</pre></div>
<h3>ワイルドカードを使用した複数ファイルのコピー</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>scp<span style="color: #F8F8F8"> </span>user@remote-host:/path/*.txt<span style="color: #F8F8F8"> </span>./
<span style="color: #000; font-style: italic">file1.txt                                  100%  1024     0.5MB/s   00:00</span>
<span style="color: #000; font-style: italic">file2.txt                                  100%  2048     0.8MB/s   00:00</span>
</pre></div>
<h2>ヒント:</h2>
<h3>SSH鍵認証の利用</h3>
<p>パスワード入力を省略するためにSSH鍵認証を設定しておくと、自動化スクリプトでの利用が容易になります。</p>
<h3>大きなファイルの転送</h3>
<p>大きなファイルを転送する場合は、<code>-C</code>オプションで圧縮するか、事前にファイルを圧縮してから転送すると効率的です。</p>
<h3>安全な接続の確認</h3>
<p>初めて接続するホストの場合、フィンガープリントの確認を求められます。セキュリティのため、これを確認することが重要です。</p>
<h3>帯域制限</h3>
<p><code>-l</code>オプションを使用して帯域幅を制限できます（例：<code>scp -l 1000</code>で約1Mbps）。共有ネットワークでの大きなファイル転送時に有用です。</p>
<h2>よくある質問</h2>
<h4>Q1. scpとrsyncの違いは何ですか？</h4>
<p>A. scpは単純なファイルコピーに適していますが、rsyncは差分転送や同期機能があり、大量のファイルや定期的な同期に適しています。</p>
<h4>Q2. パスワードなしでscpを使うにはどうすればいいですか？</h4>
<p>A. SSH鍵ペアを生成し、<code>ssh-copy-id user@remote-host</code>でリモートホストに公開鍵を登録します。</p>
<h4>Q3. 特定のSSH設定ファイルを使用するには？</h4>
<p>A. <code>-F</code>オプションで設定ファイルを指定できます：<code>scp -F /path/to/ssh_config file.txt user@host:~/</code></p>
<h4>Q4. 転送速度が遅い場合はどうすればいいですか？</h4>
<p>A. <code>-C</code>オプションで圧縮を有効にするか、Cipher指定（<code>-c aes128-ctr</code>など）で高速な暗号化アルゴリズムを選択できます。</p>
<h2>macOSでの注意点</h2>
<p>macOSでは、Homebrewを使って最新版のOpenSSHをインストールすることができます。デフォルトのバージョンでは一部の新しいオプションが使えない場合があります。また、macOSのファイルシステム属性（拡張属性）は転送されないため、重要な場合は<code>tar</code>でアーカイブしてから転送することをお勧めします。</p>
<h2>参考</h2>
<p>https://man.openbsd.org/scp.1</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/04/30 初版作成</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>