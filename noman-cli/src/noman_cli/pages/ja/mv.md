# mv コマンド

ファイルやディレクトリを移動または名前変更します。

## 概要

`mv`コマンドはファイルやディレクトリをある場所から別の場所へ移動したり、名前を変更したりします。異なるファイルシステム間で移動する場合は、元のファイルをコピーして削除します。ファイルの整理、データのバックアップ、単純なファイル名の変更などによく使用されます。

## オプション

### **-f, --force**

確認プロンプトなしで宛先ファイルを上書きします。

```console
$ mv -f important.txt backup/
# 確認なしでファイルを上書き移動する
```

### **-i, --interactive**

既存のファイルを上書きする前に確認を求めます。デフォルトの動作よりも安全です。

```console
$ mv -i document.txt ~/Documents/
mv: overwrite '/home/user/Documents/document.txt'? y
# 上書きする前に確認を求められる
```

### **-n, --no-clobber**

既存のファイルを上書きしません。

```console
$ mv -n *.txt backup/
# 既存のファイルは上書きせずに移動する
```

### **-u, --update**

ソースファイルが宛先ファイルより新しい場合、または宛先ファイルが存在しない場合にのみ移動します。

```console
$ mv -u new_version.txt ~/Documents/
# 新しいバージョンのファイルのみ移動する
```

### **-v, --verbose**

実行中の操作を説明します。

```console
$ mv -v file.txt newname.txt
'file.txt' -> 'newname.txt'
# 何が行われているかを表示する
```

## 使用例

### ファイルの名前変更

```console
$ mv oldname.txt newname.txt
# ファイル名を変更する
```

### 複数のファイルをディレクトリに移動

```console
$ mv file1.txt file2.txt file3.txt destination_directory/
# 複数のファイルを一度に移動する
```

### 移動と名前変更を同時に行う

```console
$ mv ~/Downloads/report.pdf ~/Documents/quarterly_report_2025.pdf
# ファイルを移動しながら名前も変更する
```

### 特定のタイプのファイルをすべて移動

```console
$ mv *.jpg ~/Pictures/
# すべてのJPGファイルを移動する
```

## ヒント:

### ワイルドカードを慎重に使用する

ワイルドカードを`mv`で使用する前に、同じパターンで`ls`を実行して、どのファイルが対象になるかを確認しましょう。

### 先に宛先ディレクトリを作成する

ファイルを移動する前に、宛先ディレクトリが存在することを確認してください。存在しない場合、`mv`はファイルを移動せずに名前を変更します。

### 属性を保持する

一部のシステムでは、`mv -p`を使用してファイルを移動する際に属性を保持できます。

### 移動前にバックアップを作成する

重要なファイルの場合、特にファイルシステム間で移動する場合は、移動前に`cp`を使用してバックアップを作成することを検討してください。

### 隠しファイルの移動

`mv .*`を使用すると、`.`と`..`（現在のディレクトリと親ディレクトリ）も移動しようとして失敗します。隠しファイルのみを移動するには、`mv .[a-zA-Z0-9]*`を使用してください。

## よくある質問

#### Q1. `mv`と`cp`の違いは何ですか？
A. `mv`はファイルを移動または名前変更し、元の場所からファイルを削除します。一方、`cp`はファイルをコピーし、元のファイルはそのまま残ります。

#### Q2. 既存のファイルを上書きせずにファイルを移動するにはどうすればよいですか？
A. `mv -n ソース 宛先`を使用して、既存のファイルの上書きを防ぎます。

#### Q3. `mv`でディレクトリを移動できますか？
A. はい、`mv`はディレクトリ全体をその内容と一緒に移動できます。

#### Q4. データを失わずに安全にファイルを移動するにはどうすればよいですか？
A. `mv -i`を使用して、既存のファイルを上書きする前に確認を求めるようにします。

#### Q5. 異なるファイルシステム間での`mv`が時々時間がかかるのはなぜですか？
A. 異なるファイルシステム間で移動する場合、`mv`はデータをコピーしてから元のファイルを削除する必要があり、単にディレクトリエントリを更新するよりも時間がかかります。

## 参考資料

https://www.gnu.org/software/coreutils/manual/html_node/mv-invocation.html

## 改訂履歴

- 2025/05/04 初版作成