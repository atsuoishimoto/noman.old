<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  rsync - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="Search command..." />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>rsync コマンド</h1>
<p>ファイルやディレクトリを効率的に同期・コピーするためのツール。</p>
<h2>概要</h2>
<p>rsync（remote synchronization）は、ローカルまたはリモートのファイルやディレクトリを同期するためのコマンドです。増分バックアップ機能を持ち、変更されたファイルのみを転送することで効率的なデータ転送を実現します。ネットワーク帯域幅を節約し、大量のデータを扱う場合に特に有用です。</p>
<h2>オプション</h2>
<h3><strong>-a (アーカイブモード)</strong></h3>
<p>ディレクトリの再帰的コピー、シンボリックリンクの保持、ファイル権限・タイムスタンプ・所有者などのメタデータを保持します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-a<span style="color: #F8F8F8"> </span>/home/user/documents/<span style="color: #F8F8F8"> </span>/backup/documents/
</pre></div>
<h3><strong>-v (詳細表示)</strong></h3>
<p>転送されるファイルの一覧と進捗状況を表示します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-av<span style="color: #F8F8F8"> </span>/home/user/documents/<span style="color: #F8F8F8"> </span>/backup/documents/
<span style="color: #000; font-style: italic">sending incremental file list</span>
<span style="color: #000; font-style: italic">./</span>
<span style="color: #000; font-style: italic">file1.txt</span>
<span style="color: #000; font-style: italic">file2.txt</span>
<span style="color: #000; font-style: italic">directory/</span>
<span style="color: #000; font-style: italic">directory/file3.txt</span>

<span style="color: #000; font-style: italic">sent 1,234 bytes  received 42 bytes  2,552.00 bytes/sec</span>
<span style="color: #000; font-style: italic">total size is 10,240  speedup is 8.02</span>
</pre></div>
<h3><strong>-z (圧縮)</strong></h3>
<p>転送中にデータを圧縮します。ネットワーク経由の転送で特に有用です。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avz<span style="color: #F8F8F8"> </span>/home/user/documents/<span style="color: #F8F8F8"> </span>user@remote-server:/backup/documents/
</pre></div>
<h3><strong>--delete</strong></h3>
<p>送信先にあって送信元にないファイルを削除し、完全な同期を行います。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-av<span style="color: #F8F8F8"> </span>--delete<span style="color: #F8F8F8"> </span>/home/user/documents/<span style="color: #F8F8F8"> </span>/backup/documents/
</pre></div>
<h3><strong>-P (進捗表示と部分転送の再開)</strong></h3>
<p>進捗バーを表示し、中断された転送を再開できるようにします。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avP<span style="color: #F8F8F8"> </span>large_file.iso<span style="color: #F8F8F8"> </span>user@remote-server:/backup/
<span style="color: #000; font-style: italic">sending incremental file list</span>
<span style="color: #000; font-style: italic">large_file.iso</span>
<span style="color: #000; font-style: italic">    873,123,456 67% 25.4MB/s    0:01:23</span>
</pre></div>
<h2>使用例</h2>
<h3>ローカルディレクトリの同期</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-av<span style="color: #F8F8F8"> </span>~/documents/<span style="color: #F8F8F8"> </span>/media/backup/documents/
<span style="color: #000; font-style: italic">sending incremental file list</span>
<span style="color: #000; font-style: italic">./</span>
<span style="color: #000; font-style: italic">report.docx</span>
<span style="color: #000; font-style: italic">presentation.pptx</span>
<span style="color: #000; font-style: italic">images/</span>
<span style="color: #000; font-style: italic">images/photo1.jpg</span>
<span style="color: #000; font-style: italic">images/photo2.jpg</span>

<span style="color: #000; font-style: italic">sent 15,234,567 bytes  received 1,234 bytes  10,156,534.00 bytes/sec</span>
<span style="color: #000; font-style: italic">total size is 15,200,000  speedup is 0.99</span>
</pre></div>
<h3>リモートサーバーへのバックアップ</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avz<span style="color: #F8F8F8"> </span>--delete<span style="color: #F8F8F8"> </span>~/projects/<span style="color: #F8F8F8"> </span>user@server.example.com:/backup/projects/
<span style="color: #000; font-style: italic">sending incremental file list</span>
<span style="color: #000; font-style: italic">./</span>
<span style="color: #000; font-style: italic">index.html</span>
<span style="color: #000; font-style: italic">css/style.css</span>
<span style="color: #000; font-style: italic">js/script.js</span>

<span style="color: #000; font-style: italic">sent 45,678 bytes  received 987 bytes  18,666.00 bytes/sec</span>
<span style="color: #000; font-style: italic">total size is 45,000  speedup is 0.97</span>
</pre></div>
<h3>特定のファイルタイプのみ同期</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-av<span style="color: #F8F8F8"> </span>--include<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #4E9A06">&quot;*.jpg&quot;</span><span style="color: #F8F8F8"> </span>--include<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #4E9A06">&quot;*.png&quot;</span><span style="color: #F8F8F8"> </span>--exclude<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #4E9A06">&quot;*&quot;</span><span style="color: #F8F8F8"> </span>~/pictures/<span style="color: #F8F8F8"> </span>/media/backup/pictures/
<span style="color: #000; font-style: italic">sending incremental file list</span>
<span style="color: #000; font-style: italic">./</span>
<span style="color: #000; font-style: italic">vacation.jpg</span>
<span style="color: #000; font-style: italic">family.png</span>
<span style="color: #000; font-style: italic">portrait.jpg</span>

<span style="color: #000; font-style: italic">sent 8,765,432 bytes  received 123 bytes  5,843,703.33 bytes/sec</span>
<span style="color: #000; font-style: italic">total size is 8,700,000  speedup is 0.99</span>
</pre></div>
<h2>ヒント:</h2>
<h3>ドライランで確認</h3>
<p><code>--dry-run</code>（または <code>-n</code>）オプションを使用すると、実際にファイルを転送せずに何が行われるかを確認できます。重要な同期やバックアップ前に試すと安全です。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avn<span style="color: #F8F8F8"> </span>--delete<span style="color: #F8F8F8"> </span>~/documents/<span style="color: #F8F8F8"> </span>/backup/documents/
</pre></div>
<h3>SSHポートの指定</h3>
<p>デフォルト以外のSSHポートを使用する場合は、<code>-e</code>オプションで指定できます。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avz<span style="color: #F8F8F8"> </span>-e<span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;ssh -p 2222&quot;</span><span style="color: #F8F8F8"> </span>~/documents/<span style="color: #F8F8F8"> </span>user@server.example.com:/backup/
</pre></div>
<h3>帯域制限</h3>
<p><code>--bwlimit</code>オプションを使用して転送速度を制限できます。値はKB/秒で指定します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-av<span style="color: #F8F8F8"> </span>--bwlimit<span style="color: #CE5C00; font-weight: bold">=</span><span style="color: #0000CF; font-weight: bold">1000</span><span style="color: #F8F8F8"> </span>large_file.iso<span style="color: #F8F8F8"> </span>user@server.example.com:/backup/
</pre></div>
<h2>よくある質問</h2>
<h4>Q1. rsyncとscpの違いは何ですか？</h4>
<p>A. rsyncは増分転送機能があり、変更されたファイルのみを転送するため効率的です。また、中断された転送の再開や同期機能があります。scpはシンプルなファイルコピーツールで、常に全ファイルを転送します。</p>
<h4>Q2. rsyncでディレクトリをコピーする際のスラッシュ（/）の意味は？</h4>
<p>A. 送信元パスの末尾にスラッシュを付けると、ディレクトリの内容のみがコピーされます。スラッシュがない場合は、ディレクトリ自体も含めてコピーされます。</p>
<h4>Q3. バックグラウンドでrsyncを実行するには？</h4>
<p>A. <code>nohup rsync -av source/ destination/ &amp;</code>のように実行すると、ターミナルを閉じても処理が継続します。</p>
<h4>Q4. 特定のファイルやディレクトリを除外するには？</h4>
<p>A. <code>--exclude=&quot;pattern&quot;</code>オプションを使用します。例：<code>rsync -av --exclude=&quot;*.tmp&quot; --exclude=&quot;cache/&quot; source/ destination/</code></p>
<h2>macOSでの注意点</h2>
<p>macOSでrsyncを使用する場合、デフォルトのバージョンは古い場合があります。Homebrewを使用して最新版をインストールすることをお勧めします：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>brew<span style="color: #F8F8F8"> </span>install<span style="color: #F8F8F8"> </span>rsync
</pre></div>
<p>また、macOSのファイルシステムには特殊な属性（リソースフォーク、拡張属性など）があります。これらを保持するには<code>-E</code>オプションを追加してください：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>rsync<span style="color: #F8F8F8"> </span>-avE<span style="color: #F8F8F8"> </span>source/<span style="color: #F8F8F8"> </span>destination/
</pre></div>
<h2>参考情報</h2>
<p>https://rsync.samba.org/documentation.html</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/04/30 macOSでの注意点を追加。</li>
<li>2025/04/30 初版作成。</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>