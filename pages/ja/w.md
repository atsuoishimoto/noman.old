# w コマンド

現在ログインしているユーザーとその活動状況を表示します。

## 概要

`w` コマンドは、システムにログインしているユーザーの一覧と、各ユーザーが何をしているかを表示します。システムの稼働時間、負荷平均、ログインユーザー数なども確認できます。システム管理者やユーザーが、誰がシステムを使用しているか、どのようなプロセスを実行しているかを把握するのに役立ちます。

## オプション

### **-h (--no-header)**

ヘッダー情報（システムの稼働時間、負荷平均など）を表示しません。

```console
$ w -h
user     tty      from             login@   idle   JCPU   PCPU  what
yamada   pts/0    192.168.1.5      08:30    2:35   0.10s  0.05s  vim report.txt
tanaka   pts/1    192.168.1.10     09:15    0.00s  0.25s  0.25s  w
```

### **-s (--short)**

短い形式で表示します。ログイン時間、JCPU、PCPUの列を省略します。

```console
$ w -s
 10:30:25 up  3:45,  2 users,  load average: 0.08, 0.12, 0.10
USER     TTY      FROM             IDLE   WHAT
yamada   pts/0    192.168.1.5      2:35   vim report.txt
tanaka   pts/1    192.168.1.10     0.00s  w -s
```

### **-u (--no-current)**

現在のプロセス名とCPU時間の計算をスキップします。表示が高速になります。

```console
$ w -u
 10:30:25 up  3:45,  2 users,  load average: 0.08, 0.12, 0.10
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
yamada   pts/0    192.168.1.5      08:30    2:35   ?      ?    -
tanaka   pts/1    192.168.1.10     09:15    0.00s  ?      ?    -
```

## 使用例

### 基本的な使用方法

```console
$ w
 10:30:25 up  3:45,  2 users,  load average: 0.08, 0.12, 0.10
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
yamada   pts/0    192.168.1.5      08:30    2:35   0.10s  0.05s vim report.txt
tanaka   pts/1    192.168.1.10     09:15    0.00s  0.25s  0.25s w
```

### 特定のユーザーの情報を表示

```console
$ w yamada
 10:30:25 up  3:45,  2 users,  load average: 0.08, 0.12, 0.10
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
yamada   pts/0    192.168.1.5      08:30    2:35   0.10s  0.05s vim report.txt
```

## ヒント:

### 出力の見方

- **USER**: ログインしているユーザー名
- **TTY**: ユーザーが接続しているターミナル
- **FROM**: ユーザーがログインした場所（IPアドレスなど）
- **LOGIN@**: ログインした時刻
- **IDLE**: アイドル時間（何も操作していない時間）
- **JCPU**: そのターミナルに関連するすべてのプロセスが使用したCPU時間
- **PCPU**: 現在実行中のプロセスが使用したCPU時間
- **WHAT**: 現在実行中のコマンド

### 関連コマンド

`who` や `users` コマンドも同様にログインユーザーの情報を表示しますが、`w` コマンドはより詳細な情報を提供します。

### システム負荷の確認

ヘッダー部分の「load average」の値が継続的に高い場合（例：1.0以上）、システムに負荷がかかっている可能性があります。

## よくある質問

#### Q1. `w` コマンドと `who` コマンドの違いは何ですか？
A. `w` コマンドは `who` コマンドの情報に加えて、システムの稼働時間、負荷平均、各ユーザーが実行しているプロセスなどの詳細情報も表示します。

#### Q2. IDLE列の時間が長いユーザーはどういう意味ですか？
A. そのユーザーが指定された時間の間、キーボードやマウスなどの入力を行っていないことを示します。長時間アイドル状態のセッションは、放置されている可能性があります。

#### Q3. 負荷平均（load average）の値はどう解釈すればよいですか？
A. 負荷平均は直近1分、5分、15分のシステム負荷を示します。一般的に、この値がCPUコア数を超えると、システムが過負荷状態にあると考えられます。

#### Q4. macOSでの注意点はありますか？
A. macOSでは一部のオプションが異なる場合があります。特に `-u` オプションの動作がLinuxとは異なることがあるため、`man w` で確認することをお勧めします。

## 参照

https://man7.org/linux/man-pages/man1/w.1.html

## 改訂

- 2025/04/30 初版作成