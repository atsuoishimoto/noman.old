<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/search.css" />
      

      
        <script src="/ja/summary.js"></script>
        <script src="/js/search.js"></script>
        <script src="/js/language-switcher.js"></script>
      
      <title>
        
  ln - noman

      </title>

      

      
    
  </head>
  <body>
    
  <nav>
    <div class="nav-logo">
      <a href="/"><img src="../../../images/white.png" height="50px" /></a>
    </div>
    <div class="nav-right">
      <div class="nav-search">
        <input id="nav-searchbox" type="text" placeholder="コマンドを検索" />
      </div>
      <div class="nav-links">
        <a href="/ja/commandlist.html">Commands</a>
        <span id="language-switcher"></span>
      </div>
    </div>
  </nav>

  <div class="content">
    <main>
      
  <h1>ln コマンド</h1>
<p>ファイル間のリンクを作成します。</p>
<h2>概要</h2>
<p><code>ln</code> コマンドはファイルやディレクトリへのリンクを作成します。デフォルトではハードリンクを作成し、<code>-s</code> オプションを使用するとシンボリックリンクを作成します。ハードリンクはディスク上のファイルデータを直接指し、シンボリックリンクは名前で別のファイルやディレクトリを指す特殊なファイルです。</p>
<h2>オプション</h2>
<h3><strong>-s, --symbolic</strong></h3>
<p>ハードリンクではなくシンボリックリンクを作成します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-s<span style="color: #F8F8F8"> </span>対象ファイル<span style="color: #F8F8F8"> </span>リンク名
<span style="color: #8F5902">$ </span>ls<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>リンク名
<span style="color: #000; font-style: italic">lrwxrwxrwx 1 user user 10 5月 4 10:00 リンク名 -&gt; 対象ファイル</span>
</pre></div>
<h3><strong>-f, --force</strong></h3>
<p>既存の宛先ファイルを削除します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sf<span style="color: #F8F8F8"> </span>対象ファイル<span style="color: #F8F8F8"> </span>既存のリンク
</pre></div>
<h3><strong>-n, --no-dereference</strong></h3>
<p>ディレクトリへのシンボリックリンクである宛先を通常のファイルとして扱います。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sfn<span style="color: #F8F8F8"> </span>新しい対象<span style="color: #F8F8F8"> </span>既存のリンク
</pre></div>
<h3><strong>-v, --verbose</strong></h3>
<p>リンクされた各ファイルの名前を表示します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sv<span style="color: #F8F8F8"> </span>対象ファイル<span style="color: #F8F8F8"> </span>リンク名
<span style="color: #000; font-style: italic">&#39;リンク名&#39; -&gt; &#39;対象ファイル&#39;</span>
</pre></div>
<h3><strong>-r, --relative</strong></h3>
<p>リンクの場所を基準にした相対的なシンボリックリンクを作成します。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sr<span style="color: #F8F8F8"> </span>../dir1/file1<span style="color: #F8F8F8"> </span>リンク名
</pre></div>
<h2>使用例</h2>
<h3>ハードリンクの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span><span style="color: #204A87">echo</span><span style="color: #F8F8F8"> </span><span style="color: #4E9A06">&quot;オリジナルの内容&quot;</span><span style="color: #F8F8F8"> </span>&gt;<span style="color: #F8F8F8"> </span>original.txt
<span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>original.txt<span style="color: #F8F8F8"> </span>hardlink.txt
<span style="color: #8F5902">$ </span>ls<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>*txt
<span style="color: #000; font-style: italic">-rw-r--r-- 2 user user 16 5月 4 10:00 hardlink.txt</span>
<span style="color: #000; font-style: italic">-rw-r--r-- 2 user user 16 5月 4 10:00 original.txt</span>
</pre></div>
<h3>ファイルへのシンボリックリンクの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-s<span style="color: #F8F8F8"> </span>/path/to/file.txt<span style="color: #F8F8F8"> </span>symlink.txt
<span style="color: #8F5902">$ </span>ls<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>symlink.txt
<span style="color: #000; font-style: italic">lrwxrwxrwx 1 user user 15 5月 4 10:00 symlink.txt -&gt; /path/to/file.txt</span>
</pre></div>
<h3>ディレクトリへのシンボリックリンクの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-s<span style="color: #F8F8F8"> </span>/usr/local/bin<span style="color: #F8F8F8"> </span>bin_link
<span style="color: #8F5902">$ </span>ls<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>bin_link
<span style="color: #000; font-style: italic">lrwxrwxrwx 1 user user 14 5月 4 10:00 bin_link -&gt; /usr/local/bin</span>
</pre></div>
<h3>相対シンボリックリンクの作成</h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>mkdir<span style="color: #F8F8F8"> </span>-p<span style="color: #F8F8F8"> </span>dir1/subdir
<span style="color: #8F5902">$ </span>touch<span style="color: #F8F8F8"> </span>dir1/file.txt
<span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sr<span style="color: #F8F8F8"> </span>dir1/file.txt<span style="color: #F8F8F8"> </span>dir1/subdir/link.txt
<span style="color: #8F5902">$ </span>ls<span style="color: #F8F8F8"> </span>-l<span style="color: #F8F8F8"> </span>dir1/subdir/link.txt
<span style="color: #000; font-style: italic">lrwxrwxrwx 1 user user 9 5月 4 10:00 dir1/subdir/link.txt -&gt; ../file.txt</span>
</pre></div>
<h2>ヒント:</h2>
<h3>ハードリンクとシンボリックリンクの違い</h3>
<ul>
<li>ハードリンクは元のファイルと同じinodeを共有し、同じディスク上の物理データを参照します。どちらかのファイルを変更すると両方に影響します。</li>
<li>ハードリンクはファイルシステムをまたぐことができず、ディレクトリにリンクすることもできません。</li>
<li>シンボリックリンクは名前で別のファイルを指す別個のファイルであり、ファイルシステムをまたぐことができます。</li>
<li>シンボリックリンクの元のファイルが削除されると、リンクは「壊れた」状態になり、何も指さなくなります。</li>
</ul>
<h3>既存のシンボリックリンクの更新</h3>
<p>既存のシンボリックリンクを安全に更新するには、<code>-sfn</code> を一緒に使用します：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>ln<span style="color: #F8F8F8"> </span>-sfn<span style="color: #F8F8F8"> </span>新しい対象<span style="color: #F8F8F8"> </span>既存のリンク
</pre></div>
<h3>壊れたシンボリックリンクの確認</h3>
<p>現在のディレクトリで壊れたシンボリックリンクを見つけるには：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #8F5902">$ </span>find<span style="color: #F8F8F8"> </span>.<span style="color: #F8F8F8"> </span>-type<span style="color: #F8F8F8"> </span>l<span style="color: #F8F8F8"> </span>-exec<span style="color: #F8F8F8"> </span><span style="color: #204A87">test</span><span style="color: #F8F8F8"> </span>!<span style="color: #F8F8F8"> </span>-e<span style="color: #F8F8F8"> </span><span style="color: #CE5C00; font-weight: bold">{}</span><span style="color: #F8F8F8"> </span><span style="color: #4E9A06">\;</span><span style="color: #F8F8F8"> </span>-print
</pre></div>
<h2>よくある質問</h2>
<h4>Q1. ハードリンクとシンボリックリンクの違いは何ですか？</h4>
<p>A. ハードリンクはファイルのinode（ディスク上のデータ）を直接参照し、ファイルシステムをまたいだり、ディレクトリにリンクしたりすることはできません。シンボリックリンクはパスで別のファイルを参照するポインタファイルであり、ファイルシステムをまたいだり、ディレクトリにリンクしたりすることができます。</p>
<h4>Q2. 既存のシンボリックリンクを更新するにはどうすればよいですか？</h4>
<p>A. <code>ln -sf 新しい対象 既存のリンク</code> を使用して、既存のリンクを置き換える新しいリンクの作成を強制します。</p>
<h4>Q3. ディレクトリへのハードリンクを作成できますか？</h4>
<p>A. いいえ、ほとんどのUnix/Linuxシステムではファイルシステムのループを防ぐために、ディレクトリへのハードリンクは許可されていません。</p>
<h4>Q4. ファイルがシンボリックリンクかどうかを確認するにはどうすればよいですか？</h4>
<p>A. <code>ls -l ファイル名</code> を使用します - シンボリックリンクはパーミッションの先頭に「l」が表示され、ターゲットが矢印（-&gt;）で表示されます。</p>
<h2>macOSに関する考慮事項</h2>
<p>macOSでは、<code>ln</code> コマンドはLinuxと同様に動作しますが、いくつかの違いがあります：</p>
<ul>
<li><code>-r</code>（相対）オプションは古いmacOSバージョンでは利用できない場合があります。</li>
<li>システム間の互換性のために、問題が発生した場合は <code>-s</code> だけでなく完全な <code>-symbolic</code> オプションを使用してください。</li>
</ul>
<h2>参考資料</h2>
<p>https://www.gnu.org/software/coreutils/manual/html_node/ln-invocation.html</p>
<h2>改訂履歴</h2>
<ul>
<li>2025/05/04 初版</li>
</ul>


    </main>
  </div>

  <footer>
    <p>
      Copyright © 2025 noman project | <a href="https://github.com/atsuoishimoto/noman">GitHub</a> | MIT License
    </p>
  </footer>

  </body>
</html>