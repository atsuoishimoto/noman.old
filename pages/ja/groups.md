# groups コマンド

ユーザーが所属するグループを表示します。

## 概要

`groups` コマンドは、指定したユーザーまたはコマンドを実行しているユーザーが所属するグループのリストを表示します。Unixシステムでは、ファイルやディレクトリへのアクセス権限はユーザーとグループに基づいて管理されているため、自分がどのグループに所属しているかを確認する際に役立ちます。

## オプション

`groups` コマンドはシンプルで、一般的に使用されるオプションはほとんどありません。

### **ユーザー名の指定**

特定のユーザーが所属するグループを表示します。

```console
$ groups username
username : group1 group2 group3
```

## 使用例

### 現在のユーザーのグループを表示

```console
$ groups
user wheel staff admin
```
上記の例では、現在のユーザーが「user」、「wheel」、「staff」、「admin」の4つのグループに所属していることを示しています。

### 複数ユーザーのグループを表示

```console
$ groups user1 user2
user1 : user1 wheel staff
user2 : user2 developers
```
この例では、user1は「user1」、「wheel」、「staff」グループに、user2は「user2」と「developers」グループに所属していることがわかります。

## ヒント:

### プライマリグループとセカンダリグループ

表示されるグループのうち、最初に表示されるのは通常ユーザーのプライマリグループです。その後に続くのはセカンダリグループです。プライマリグループはユーザーがファイルを作成する際にデフォルトで設定されるグループです。

### グループメンバーシップの確認

特定のグループに誰が所属しているかを確認したい場合は、`groups` ではなく `/etc/group` ファイルを確認するか、`getent group グループ名` コマンドを使用します。

### 権限のトラブルシューティング

ファイルやディレクトリへのアクセス権限の問題が発生した場合、`groups` コマンドを使用して自分がどのグループに所属しているかを確認することで、問題解決の手がかりになることがあります。

## よくある質問

#### Q1. `groups` コマンドと `id -Gn` コマンドの違いは何ですか？
A. 両方とも同様の情報を表示しますが、`id -Gn` はより多くのオプションを持ち、ユーザーIDやグループIDも表示できます。基本的な使用では、結果は同じです。

#### Q2. グループに所属しているユーザーを確認するにはどうすればよいですか？
A. `groups` コマンドは逆の情報（ユーザーが所属するグループ）を表示します。グループのメンバーを確認するには、`getent group グループ名` または `/etc/group` ファイルを確認してください。

#### Q3. 新しいグループに追加された後、すぐに `groups` コマンドに反映されますか？
A. 新しいグループへの追加後、変更を反映させるためにはログアウトして再ログインするか、新しいシェルセッションを開始する必要があることがあります。

#### Q4. macOSでグループを管理するにはどうすればよいですか？
A. macOSでは、システム環境設定のユーザーとグループセクションからグラフィカルに管理できますが、コマンドラインでは `dseditgroup` コマンドを使用してグループを管理できます。

## 参考資料

https://www.gnu.org/software/coreutils/manual/html_node/groups-invocation.html

## 改訂履歴

- 2025/04/30 初版作成