# printf コマンド

指定されたフォーマットに従ってテキストを整形して出力します。

## 概要

`printf` コマンドは、C言語の printf 関数と同様に、フォーマット文字列に基づいてテキストを整形して標準出力に表示します。変数の値を特定の書式で出力したり、特殊文字（改行、タブなど）を含めたりするのに便利です。シェルスクリプトでの出力整形によく使われます。

## オプション

### **-v VAR**

出力を変数 VAR に格納します（標準出力には表示されません）。

```console
$ printf -v result "Hello, %s!" "World"
$ echo $result
Hello, World!
```

## 基本的な使い方

### フォーマット指定子

```console
$ printf "整数: %d, 文字列: %s, 浮動小数点: %f\n" 42 "テキスト" 3.14
整数: 42, 文字列: テキスト, 浮動小数点: 3.140000
```

### 幅と精度の指定

```console
$ printf "右寄せ10桁: %10s\n左寄せ10桁: %-10s\n小数点以下2桁: %.2f\n" "テキスト" "テキスト" 3.14159
右寄せ10桁:     テキスト
左寄せ10桁: テキスト    
小数点以下2桁: 3.14
```

### エスケープシーケンス

```console
$ printf "改行\nタブ\t文字\n"
改行
タブ	文字
```

### 繰り返し出力

```console
$ printf "%s\n" file1 file2 file3
file1
file2
file3
```

## 使用例

### テーブル形式の出力

```console
$ printf "%-10s %-8s %s\n" "名前" "年齢" "職業"
$ printf "%-10s %-8s %s\n" "田中" "28" "エンジニア"
$ printf "%-10s %-8s %s\n" "佐藤" "35" "デザイナー"
名前       年齢     職業
田中       28       エンジニア
佐藤       35       デザイナー
```

### 数値のフォーマット

```console
$ printf "10進数: %d\n16進数: %x\n8進数: %o\n" 42 42 42
10進数: 42
16進数: 2a
8進数: 52
```

## ヒント:

### echo との違い

`printf` は `echo` よりも出力形式の制御が細かくできます。特に複数行の整形出力や、数値のフォーマットが必要な場合に便利です。

### ゼロパディング

数値の前にゼロを埋めたい場合は `%02d` のように指定できます。日付や時刻の表示に便利です。

```console
$ printf "%02d:%02d:%02d\n" 9 5 1
09:05:01
```

### 変数展開との組み合わせ

シェル変数を使う場合は、変数展開をフォーマット文字列の外で行うか、シングルクォートではなくダブルクォートを使います。

```console
$ name="山田"
$ printf "こんにちは、%sさん\n" "$name"
こんにちは、山田さん
```

## よくある質問

#### Q1. printf と echo の違いは何ですか？
A. `printf` はフォーマット指定子を使って出力形式を細かく制御できますが、`echo` はシンプルなテキスト出力に向いています。`printf` は自動で改行しないのに対し、`echo` は自動で改行します。

#### Q2. printf で自動的に改行するにはどうすればいいですか？
A. フォーマット文字列の最後に `\n` を追加します。例: `printf "Hello\n"`

#### Q3. 小数点以下の桁数を指定するにはどうすればいいですか？
A. `%.2f` のように指定します。この例では小数点以下2桁まで表示されます。

#### Q4. 出力を変数に保存するにはどうすればいいですか？
A. `-v` オプションを使います。例: `printf -v result "値: %d" 42`

## macOSでの注意点

macOSの `printf` コマンドは GNU バージョンと若干の違いがあります。特に `-v` オプションは GNU 版特有のため、macOSのデフォルトの `printf` では使用できません。Homebrew などで GNU coreutils をインストールして `gprintf` を使うことで GNU 互換の機能が利用できます。

## 参考資料

https://www.gnu.org/software/coreutils/manual/html_node/printf-invocation.html

## 改訂履歴

- 2025/04/30 初版作成