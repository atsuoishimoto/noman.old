# sort コマンド

テキストファイルの行を並べ替えます。

## 概要

`sort` コマンドはテキストファイルの行をソートするために使用されます。デフォルトでは、アルファベット順（辞書順）にソートしますが、数値順、月名順、ランダム順など、さまざまな方法でソートすることができます。また、特定のフィールドやキーに基づいてソートすることも可能です。

## オプション

### **-n（数値順ソート）**

文字列を数値として解釈し、数値の大きさでソートします。

```console
$ cat numbers.txt
10
2
1
$ sort -n numbers.txt
1
2
10
```

### **-r（逆順ソート）**

ソート結果を逆順（降順）に表示します。

```console
$ sort -r fruits.txt
りんご
みかん
いちご
```

### **-k（キーフィールド指定）**

特定のフィールド（列）を基準にしてソートします。フィールドは空白で区切られます。

```console
$ cat employees.txt
山田 営業 35
佐藤 技術 28
鈴木 営業 42
$ sort -k2,2 employees.txt
鈴木 営業 42
山田 営業 35
佐藤 技術 28
```

### **-t（区切り文字指定）**

フィールドの区切り文字を指定します。

```console
$ cat data.csv
山田,35,営業
佐藤,28,技術
鈴木,42,営業
$ sort -t, -k2,2n data.csv
佐藤,28,技術
山田,35,営業
鈴木,42,営業
```

### **-u（重複行の削除）**

ソート結果から重複する行を削除します。

```console
$ cat duplicates.txt
りんご
みかん
りんご
いちご
$ sort -u duplicates.txt
いちご
みかん
りんご
```

## 使用例

### 基本的なソート

```console
$ sort fruits.txt
いちご
みかん
りんご
```

### 数値の降順ソート

```console
$ sort -nr numbers.txt
10
2
1
```

### CSVファイルの3列目でソート

```console
$ sort -t, -k3,3 data.csv
山田,35,営業
鈴木,42,営業
佐藤,28,技術
```

### 複数のキーでソート（部署で昇順、年齢で降順）

```console
$ sort -t, -k3,3 -k2,2nr data.csv
鈴木,42,営業
山田,35,営業
佐藤,28,技術
```

## ヒント:

### 大文字小文字を区別しないソート

`-f` オプションを使用すると、大文字と小文字を区別せずにソートできます。これは英語のテキストを扱う際に便利です。

### 安定ソート

`-s` オプションを使うと安定ソートが行われます。これは、同じキー値を持つ項目の相対的な順序が保持されるということです。

### メモリ使用量の制限

大きなファイルをソートする場合、`-S` オプションでメモリ使用量を制限できます。例：`sort -S 100M bigfile.txt`

### 一時ファイルの場所指定

`-T` オプションで一時ファイルの保存場所を指定できます。大きなファイルをソートする際に役立ちます。例：`sort -T /tmp bigfile.txt`

## よくある質問

#### Q1. `sort` コマンドはどのような時に使いますか？
A. テキストファイルの内容を特定の順序で並べ替えたい時に使います。データ分析、ログファイルの整理、重複エントリの検出などに役立ちます。

#### Q2. 数値と文字列が混在するファイルをどうソートしますか？
A. `-g` オプションを使うと、一般的な数値（浮動小数点数を含む）として認識してソートします。

#### Q3. 特定の列だけを無視してソートするには？
A. `-k` オプションで開始フィールドと終了フィールドを指定します。例えば、2列目から3列目までをソートキーにするには `sort -k2,3` とします。

#### Q4. ソート結果をファイルに保存するには？
A. リダイレクト演算子 `>` を使います。例：`sort file.txt > sorted_file.txt`

## 参考

https://www.gnu.org/software/coreutils/manual/html_node/sort-invocation.html

## 改訂履歴

- 2025/04/30 初版作成